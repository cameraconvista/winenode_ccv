var Pp=Object.defineProperty;var Ip=(e,t,r)=>t in e?Pp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Un=(e,t,r)=>(Ip(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Op(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var _d={exports:{}},oo={},Sd={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),Lp=Symbol.for("react.portal"),Ap=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),Dp=Symbol.for("react.provider"),Mp=Symbol.for("react.context"),Up=Symbol.for("react.forward_ref"),Fp=Symbol.for("react.suspense"),Bp=Symbol.for("react.memo"),Wp=Symbol.for("react.lazy"),$u=Symbol.iterator;function Vp(e){return e===null||typeof e!="object"?null:(e=$u&&e[$u]||e["@@iterator"],typeof e=="function"?e:null)}var jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ed=Object.assign,Nd={};function Pn(e,t,r){this.props=e,this.context=t,this.refs=Nd,this.updater=r||jd}Pn.prototype.isReactComponent={};Pn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cd(){}Cd.prototype=Pn.prototype;function jl(e,t,r){this.props=e,this.context=t,this.refs=Nd,this.updater=r||jd}var El=jl.prototype=new Cd;El.constructor=jl;Ed(El,Pn.prototype);El.isPureReactComponent=!0;var zu=Array.isArray,Td=Object.prototype.hasOwnProperty,Nl={current:null},Rd={key:!0,ref:!0,__self:!0,__source:!0};function Pd(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Td.call(t,n)&&!Rd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:$s,type:e,key:i,ref:o,props:s,_owner:Nl.current}}function Hp(e,t){return{$$typeof:$s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===$s}function qp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Du=/\/+/g;function zo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?qp(""+e.key):t.toString(36)}function vi(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $s:case Lp:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+zo(o,0):n,zu(s)?(r="",e!=null&&(r=e.replace(Du,"$&/")+"/"),vi(s,t,r,"",function(c){return c})):s!=null&&(Cl(s)&&(s=Hp(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Du,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",zu(e))for(var l=0;l<e.length;l++){i=e[l];var u=n+zo(i,l);o+=vi(i,t,r,u,s)}else if(u=Vp(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=n+zo(i,l++),o+=vi(i,t,r,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qs(e,t,r){if(e==null)return e;var n=[],s=0;return vi(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Gp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},yi={transition:null},Kp={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:yi,ReactCurrentOwner:Nl};function Id(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:qs,forEach:function(e,t,r){qs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!Cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Pn;J.Fragment=Ap;J.Profiler=zp;J.PureComponent=jl;J.StrictMode=$p;J.Suspense=Fp;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kp;J.act=Id;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ed({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Nl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)Td.call(t,u)&&!Rd.hasOwnProperty(u)&&(n[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:$s,type:e.type,key:s,ref:i,props:n,_owner:o}};J.createContext=function(e){return e={$$typeof:Mp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dp,_context:e},e.Consumer=e};J.createElement=Pd;J.createFactory=function(e){var t=Pd.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Up,render:e}};J.isValidElement=Cl;J.lazy=function(e){return{$$typeof:Wp,_payload:{_status:-1,_result:e},_init:Gp}};J.memo=function(e,t){return{$$typeof:Bp,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=yi.transition;yi.transition={};try{e()}finally{yi.transition=t}};J.unstable_act=Id;J.useCallback=function(e,t){return We.current.useCallback(e,t)};J.useContext=function(e){return We.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return We.current.useDeferredValue(e)};J.useEffect=function(e,t){return We.current.useEffect(e,t)};J.useId=function(){return We.current.useId()};J.useImperativeHandle=function(e,t,r){return We.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return We.current.useMemo(e,t)};J.useReducer=function(e,t,r){return We.current.useReducer(e,t,r)};J.useRef=function(e){return We.current.useRef(e)};J.useState=function(e){return We.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return We.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return We.current.useTransition()};J.version="18.3.1";Sd.exports=J;var x=Sd.exports;const Zr=kd(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=x,Jp=Symbol.for("react.element"),Yp=Symbol.for("react.fragment"),Xp=Object.prototype.hasOwnProperty,Zp=Qp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,em={key:!0,ref:!0,__self:!0,__source:!0};function Od(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Xp.call(t,n)&&!em.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Jp,type:e,key:i,ref:o,props:s,_owner:Zp.current}}oo.Fragment=Yp;oo.jsx=Od;oo.jsxs=Od;_d.exports=oo;var a=_d.exports,ya={},Ld={exports:{}},st={},Ad={exports:{}},$d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,I){var $=T.length;T.push(I);e:for(;0<$;){var O=$-1>>>1,z=T[O];if(0<s(z,I))T[O]=I,T[$]=z,$=O;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var I=T[0],$=T.pop();if($!==I){T[0]=$;e:for(var O=0,z=T.length,A=z>>>1;O<A;){var Z=2*(O+1)-1,re=T[Z],oe=Z+1,me=T[oe];if(0>s(re,$))oe<z&&0>s(me,re)?(T[O]=me,T[oe]=$,O=oe):(T[O]=re,T[Z]=$,O=Z);else if(oe<z&&0>s(me,$))T[O]=me,T[oe]=$,O=oe;else break e}}return I}function s(T,I){var $=T.sortIndex-I.sortIndex;return $!==0?$:T.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,y=!1,b=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(T){for(var I=r(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=T)n(c),I.sortIndex=I.expirationTime,t(u,I);else break;I=r(c)}}function S(T){if(_=!1,p(T),!b)if(r(u)!==null)b=!0,F(N);else{var I=r(c);I!==null&&M(S,I.startTime-T)}}function N(T,I){b=!1,_&&(_=!1,m(v),v=-1),y=!0;var $=f;try{for(p(I),h=r(u);h!==null&&(!(h.expirationTime>I)||T&&!P());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var z=O(h.expirationTime<=I);I=e.unstable_now(),typeof z=="function"?h.callback=z:h===r(u)&&n(u),p(I)}else n(u);h=r(u)}if(h!==null)var A=!0;else{var Z=r(c);Z!==null&&M(S,Z.startTime-I),A=!1}return A}finally{h=null,f=$,y=!1}}var C=!1,j=null,v=-1,w=5,E=-1;function P(){return!(e.unstable_now()-E<w)}function R(){if(j!==null){var T=e.unstable_now();E=T;var I=!0;try{I=j(!0,T)}finally{I?D():(C=!1,j=null)}}else C=!1}var D;if(typeof g=="function")D=function(){g(R)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=R,D=function(){ie.postMessage(null)}}else D=function(){k(R,0)};function F(T){j=T,C||(C=!0,D())}function M(T,I){v=k(function(){T(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,F(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var $=f;f=I;try{return T()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,I){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var $=f;f=T;try{return I()}finally{f=$}},e.unstable_scheduleCallback=function(T,I,$){var O=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?O+$:O):$=O,T){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=$+z,T={id:d++,callback:I,priorityLevel:T,startTime:$,expirationTime:z,sortIndex:-1},$>O?(T.sortIndex=$,t(c,T),r(u)===null&&T===r(c)&&(_?(m(v),v=-1):_=!0,M(S,$-O))):(T.sortIndex=z,t(u,T),b||y||(b=!0,F(N))),T},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(T){var I=f;return function(){var $=f;f=I;try{return T.apply(this,arguments)}finally{f=$}}}})($d);Ad.exports=$d;var tm=Ad.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=x,nt=tm;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zd=new Set,ms={};function Fr(e,t){_n(e,t),_n(e+"Capture",t)}function _n(e,t){for(ms[e]=t,e=0;e<t.length;e++)zd.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xa=Object.prototype.hasOwnProperty,nm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mu={},Uu={};function sm(e){return xa.call(Uu,e)?!0:xa.call(Mu,e)?!1:nm.test(e)?Uu[e]=!0:(Mu[e]=!0,!1)}function im(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function om(e,t,r,n){if(t===null||typeof t>"u"||im(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ve(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Le[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Le[t]=new Ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Le[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Le[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Le[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Le[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Le[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Le[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Le[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tl=/[\-:]([a-z])/g;function Rl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tl,Rl);Le[t]=new Ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tl,Rl);Le[t]=new Ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tl,Rl);Le[t]=new Ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Le[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Le[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pl(e,t,r,n){var s=Le.hasOwnProperty(t)?Le[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(om(t,r,s,n)&&(r=null),n||s===null?sm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Qt=rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),tn=Symbol.for("react.portal"),rn=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),wa=Symbol.for("react.profiler"),Dd=Symbol.for("react.provider"),Md=Symbol.for("react.context"),Ol=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Ll=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Ud=Symbol.for("react.offscreen"),Fu=Symbol.iterator;function Fn(e){return e===null||typeof e!="object"?null:(e=Fu&&e[Fu]||e["@@iterator"],typeof e=="function"?e:null)}var we=Object.assign,Do;function Yn(e){if(Do===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Do=t&&t[1]||""}return`
`+Do+e}var Mo=!1;function Uo(e,t){if(!e||Mo)return"";Mo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=l);break}}}finally{Mo=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Yn(e):""}function am(e){switch(e.tag){case 5:return Yn(e.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 2:case 15:return e=Uo(e.type,!1),e;case 11:return e=Uo(e.type.render,!1),e;case 1:return e=Uo(e.type,!0),e;default:return""}}function _a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rn:return"Fragment";case tn:return"Portal";case wa:return"Profiler";case Il:return"StrictMode";case ba:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Md:return(e.displayName||"Context")+".Consumer";case Dd:return(e._context.displayName||"Context")+".Provider";case Ol:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ll:return t=e.displayName||null,t!==null?t:_a(e.type)||"Memo";case tr:t=e._payload,e=e._init;try{return _a(e(t))}catch{}}return null}function lm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _a(t);case 8:return t===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function um(e){var t=Fd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ks(e){e._valueTracker||(e._valueTracker=um(e))}function Bd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Fd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sa(e,t){var r=t.checked;return we({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Bu(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=vr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wd(e,t){t=t.checked,t!=null&&Pl(e,"checked",t,!1)}function ja(e,t){Wd(e,t);var r=vr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ea(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ea(e,t.type,vr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wu(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ea(e,t,r){(t!=="number"||Ii(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xn=Array.isArray;function gn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+vr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Na(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return we({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vu(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(L(92));if(Xn(r)){if(1<r.length)throw Error(L(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:vr(r)}}function Vd(e,t){var r=vr(t.value),n=vr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Hu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ca(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qs,qd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qs=Qs||document.createElement("div"),Qs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ns={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cm=["Webkit","ms","Moz","O"];Object.keys(ns).forEach(function(e){cm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ns[t]=ns[e]})});function Gd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ns.hasOwnProperty(e)&&ns[e]?(""+t).trim():t+"px"}function Kd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Gd(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var dm=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(e,t){if(t){if(dm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Ra(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,vn=null,yn=null;function qu(e){if(e=Ms(e)){if(typeof Ia!="function")throw Error(L(280));var t=e.stateNode;t&&(t=ho(t),Ia(e.stateNode,e.type,t))}}function Qd(e){vn?yn?yn.push(e):yn=[e]:vn=e}function Jd(){if(vn){var e=vn,t=yn;if(yn=vn=null,qu(e),t)for(e=0;e<t.length;e++)qu(t[e])}}function Yd(e,t){return e(t)}function Xd(){}var Fo=!1;function Zd(e,t,r){if(Fo)return e(t,r);Fo=!0;try{return Yd(e,t,r)}finally{Fo=!1,(vn!==null||yn!==null)&&(Xd(),Jd())}}function vs(e,t){var r=e.stateNode;if(r===null)return null;var n=ho(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(L(231,t,typeof r));return r}var Oa=!1;if(Vt)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{Oa=!1}function hm(e,t,r,n,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var ss=!1,Oi=null,Li=!1,La=null,fm={onError:function(e){ss=!0,Oi=e}};function pm(e,t,r,n,s,i,o,l,u){ss=!1,Oi=null,hm.apply(fm,arguments)}function mm(e,t,r,n,s,i,o,l,u){if(pm.apply(this,arguments),ss){if(ss){var c=Oi;ss=!1,Oi=null}else throw Error(L(198));Li||(Li=!0,La=c)}}function Br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function eh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gu(e){if(Br(e)!==e)throw Error(L(188))}function gm(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(L(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Gu(s),e;if(i===n)return Gu(s),t;i=i.sibling}throw Error(L(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(L(189))}}if(r.alternate!==n)throw Error(L(190))}if(r.tag!==3)throw Error(L(188));return r.stateNode.current===r?e:t}function th(e){return e=gm(e),e!==null?rh(e):null}function rh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rh(e);if(t!==null)return t;e=e.sibling}return null}var nh=nt.unstable_scheduleCallback,Ku=nt.unstable_cancelCallback,vm=nt.unstable_shouldYield,ym=nt.unstable_requestPaint,_e=nt.unstable_now,xm=nt.unstable_getCurrentPriorityLevel,$l=nt.unstable_ImmediatePriority,sh=nt.unstable_UserBlockingPriority,Ai=nt.unstable_NormalPriority,wm=nt.unstable_LowPriority,ih=nt.unstable_IdlePriority,ao=null,Rt=null;function bm(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(ao,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Sm,km=Math.log,_m=Math.LN2;function Sm(e){return e>>>=0,e===0?32:31-(km(e)/_m|0)|0}var Js=64,Ys=4194304;function Zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $i(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Zn(l):(i&=o,i!==0&&(n=Zn(i)))}else o=r&~s,o!==0?n=Zn(o):i!==0&&(n=Zn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-bt(t),s=1<<r,n|=e[r],t&=~s;return n}function jm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Em(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-bt(i),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=jm(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function Aa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oh(){var e=Js;return Js<<=1,!(Js&4194240)&&(Js=64),e}function Bo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=r}function Nm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-bt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function zl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-bt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ae=0;function ah(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lh,Dl,uh,ch,dh,$a=!1,Xs=[],ur=null,cr=null,dr=null,ys=new Map,xs=new Map,sr=[],Cm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qu(e,t){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function Wn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ms(t),t!==null&&Dl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Tm(e,t,r,n,s){switch(t){case"focusin":return ur=Wn(ur,e,t,r,n,s),!0;case"dragenter":return cr=Wn(cr,e,t,r,n,s),!0;case"mouseover":return dr=Wn(dr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ys.set(i,Wn(ys.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,xs.set(i,Wn(xs.get(i)||null,e,t,r,n,s)),!0}return!1}function hh(e){var t=Pr(e.target);if(t!==null){var r=Br(t);if(r!==null){if(t=r.tag,t===13){if(t=eh(r),t!==null){e.blockedOn=t,dh(e.priority,function(){uh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=za(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Pa=n,r.target.dispatchEvent(n),Pa=null}else return t=Ms(r),t!==null&&Dl(t),e.blockedOn=r,!1;t.shift()}return!0}function Ju(e,t,r){xi(e)&&r.delete(t)}function Rm(){$a=!1,ur!==null&&xi(ur)&&(ur=null),cr!==null&&xi(cr)&&(cr=null),dr!==null&&xi(dr)&&(dr=null),ys.forEach(Ju),xs.forEach(Ju)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Rm)))}function ws(e){function t(s){return Vn(s,e)}if(0<Xs.length){Vn(Xs[0],e);for(var r=1;r<Xs.length;r++){var n=Xs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ur!==null&&Vn(ur,e),cr!==null&&Vn(cr,e),dr!==null&&Vn(dr,e),ys.forEach(t),xs.forEach(t),r=0;r<sr.length;r++)n=sr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<sr.length&&(r=sr[0],r.blockedOn===null);)hh(r),r.blockedOn===null&&sr.shift()}var xn=Qt.ReactCurrentBatchConfig,zi=!0;function Pm(e,t,r,n){var s=ae,i=xn.transition;xn.transition=null;try{ae=1,Ml(e,t,r,n)}finally{ae=s,xn.transition=i}}function Im(e,t,r,n){var s=ae,i=xn.transition;xn.transition=null;try{ae=4,Ml(e,t,r,n)}finally{ae=s,xn.transition=i}}function Ml(e,t,r,n){if(zi){var s=za(e,t,r,n);if(s===null)Xo(e,t,n,Di,r),Qu(e,n);else if(Tm(s,e,t,r,n))n.stopPropagation();else if(Qu(e,n),t&4&&-1<Cm.indexOf(e)){for(;s!==null;){var i=Ms(s);if(i!==null&&lh(i),i=za(e,t,r,n),i===null&&Xo(e,t,n,Di,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Xo(e,t,n,null,r)}}var Di=null;function za(e,t,r,n){if(Di=null,e=Al(n),e=Pr(e),e!==null)if(t=Br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=eh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Di=e,null}function fh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xm()){case $l:return 1;case sh:return 4;case Ai:case wm:return 16;case ih:return 536870912;default:return 16}default:return 16}}var ar=null,Ul=null,wi=null;function ph(){if(wi)return wi;var e,t=Ul,r=t.length,n,s="value"in ar?ar.value:ar.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return wi=s.slice(e,1<n?1-n:void 0)}function bi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function Yu(){return!1}function it(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zs:Yu,this.isPropagationStopped=Yu,this}return we(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=it(In),Ds=we({},In,{view:0,detail:0}),Om=it(Ds),Wo,Vo,Hn,lo=we({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(Wo=e.screenX-Hn.screenX,Vo=e.screenY-Hn.screenY):Vo=Wo=0,Hn=e),Wo)},movementY:function(e){return"movementY"in e?e.movementY:Vo}}),Xu=it(lo),Lm=we({},lo,{dataTransfer:0}),Am=it(Lm),$m=we({},Ds,{relatedTarget:0}),Ho=it($m),zm=we({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Dm=it(zm),Mm=we({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Um=it(Mm),Fm=we({},In,{data:0}),Zu=it(Fm),Bm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vm[e])?!!t[e]:!1}function Bl(){return Hm}var qm=we({},Ds,{key:function(e){if(e.key){var t=Bm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(e){return e.type==="keypress"?bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gm=it(qm),Km=we({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ec=it(Km),Qm=we({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),Jm=it(Qm),Ym=we({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xm=it(Ym),Zm=we({},lo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e0=it(Zm),t0=[9,13,27,32],Wl=Vt&&"CompositionEvent"in window,is=null;Vt&&"documentMode"in document&&(is=document.documentMode);var r0=Vt&&"TextEvent"in window&&!is,mh=Vt&&(!Wl||is&&8<is&&11>=is),tc=String.fromCharCode(32),rc=!1;function gh(e,t){switch(e){case"keyup":return t0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nn=!1;function n0(e,t){switch(e){case"compositionend":return vh(t);case"keypress":return t.which!==32?null:(rc=!0,tc);case"textInput":return e=t.data,e===tc&&rc?null:e;default:return null}}function s0(e,t){if(nn)return e==="compositionend"||!Wl&&gh(e,t)?(e=ph(),wi=Ul=ar=null,nn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mh&&t.locale!=="ko"?null:t.data;default:return null}}var i0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!i0[e.type]:t==="textarea"}function yh(e,t,r,n){Qd(n),t=Mi(t,"onChange"),0<t.length&&(r=new Fl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var os=null,bs=null;function o0(e){Th(e,0)}function uo(e){var t=an(e);if(Bd(t))return e}function a0(e,t){if(e==="change")return t}var xh=!1;if(Vt){var qo;if(Vt){var Go="oninput"in document;if(!Go){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),Go=typeof sc.oninput=="function"}qo=Go}else qo=!1;xh=qo&&(!document.documentMode||9<document.documentMode)}function ic(){os&&(os.detachEvent("onpropertychange",wh),bs=os=null)}function wh(e){if(e.propertyName==="value"&&uo(bs)){var t=[];yh(t,bs,e,Al(e)),Zd(o0,t)}}function l0(e,t,r){e==="focusin"?(ic(),os=t,bs=r,os.attachEvent("onpropertychange",wh)):e==="focusout"&&ic()}function u0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(bs)}function c0(e,t){if(e==="click")return uo(t)}function d0(e,t){if(e==="input"||e==="change")return uo(t)}function h0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:h0;function ks(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xa.call(t,s)||!_t(e[s],t[s]))return!1}return!0}function oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ac(e,t){var r=oc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oc(r)}}function bh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kh(){for(var e=window,t=Ii();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ii(e.document)}return t}function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function f0(e){var t=kh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&bh(r.ownerDocument.documentElement,r)){if(n!==null&&Vl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=ac(r,i);var o=ac(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p0=Vt&&"documentMode"in document&&11>=document.documentMode,sn=null,Da=null,as=null,Ma=!1;function lc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ma||sn==null||sn!==Ii(n)||(n=sn,"selectionStart"in n&&Vl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),as&&ks(as,n)||(as=n,n=Mi(Da,"onSelect"),0<n.length&&(t=new Fl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=sn)))}function ei(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var on={animationend:ei("Animation","AnimationEnd"),animationiteration:ei("Animation","AnimationIteration"),animationstart:ei("Animation","AnimationStart"),transitionend:ei("Transition","TransitionEnd")},Ko={},_h={};Vt&&(_h=document.createElement("div").style,"AnimationEvent"in window||(delete on.animationend.animation,delete on.animationiteration.animation,delete on.animationstart.animation),"TransitionEvent"in window||delete on.transitionend.transition);function co(e){if(Ko[e])return Ko[e];if(!on[e])return e;var t=on[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _h)return Ko[e]=t[r];return e}var Sh=co("animationend"),jh=co("animationiteration"),Eh=co("animationstart"),Nh=co("transitionend"),Ch=new Map,uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(e,t){Ch.set(e,t),Fr(t,[e])}for(var Qo=0;Qo<uc.length;Qo++){var Jo=uc[Qo],m0=Jo.toLowerCase(),g0=Jo[0].toUpperCase()+Jo.slice(1);wr(m0,"on"+g0)}wr(Sh,"onAnimationEnd");wr(jh,"onAnimationIteration");wr(Eh,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(Nh,"onTransitionEnd");_n("onMouseEnter",["mouseout","mouseover"]);_n("onMouseLeave",["mouseout","mouseover"]);_n("onPointerEnter",["pointerout","pointerover"]);_n("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v0=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function cc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,mm(n,t,void 0,e),e.currentTarget=null}function Th(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;cc(s,l,c),i=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;cc(s,l,c),i=u}}}if(Li)throw e=La,Li=!1,La=null,e}function he(e,t){var r=t[Va];r===void 0&&(r=t[Va]=new Set);var n=e+"__bubble";r.has(n)||(Rh(t,e,2,!1),r.add(n))}function Yo(e,t,r){var n=0;t&&(n|=4),Rh(r,e,n,t)}var ti="_reactListening"+Math.random().toString(36).slice(2);function _s(e){if(!e[ti]){e[ti]=!0,zd.forEach(function(r){r!=="selectionchange"&&(v0.has(r)||Yo(r,!1,e),Yo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ti]||(t[ti]=!0,Yo("selectionchange",!1,t))}}function Rh(e,t,r,n){switch(fh(t)){case 1:var s=Pm;break;case 4:s=Im;break;default:s=Ml}r=s.bind(null,t,r,e),s=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Xo(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Pr(l),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Zd(function(){var c=i,d=Al(r),h=[];e:{var f=Ch.get(e);if(f!==void 0){var y=Fl,b=e;switch(e){case"keypress":if(bi(r)===0)break e;case"keydown":case"keyup":y=Gm;break;case"focusin":b="focus",y=Ho;break;case"focusout":b="blur",y=Ho;break;case"beforeblur":case"afterblur":y=Ho;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Am;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Jm;break;case Sh:case jh:case Eh:y=Dm;break;case Nh:y=Xm;break;case"scroll":y=Om;break;case"wheel":y=e0;break;case"copy":case"cut":case"paste":y=Um;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ec}var _=(t&4)!==0,k=!_&&e==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var g=c,p;g!==null;){p=g;var S=p.stateNode;if(p.tag===5&&S!==null&&(p=S,m!==null&&(S=vs(g,m),S!=null&&_.push(Ss(g,S,p)))),k)break;g=g.return}0<_.length&&(f=new y(f,b,null,r,d),h.push({event:f,listeners:_}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&r!==Pa&&(b=r.relatedTarget||r.fromElement)&&(Pr(b)||b[Ht]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(b=r.relatedTarget||r.toElement,y=c,b=b?Pr(b):null,b!==null&&(k=Br(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=c),y!==b)){if(_=Xu,S="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(_=ec,S="onPointerLeave",m="onPointerEnter",g="pointer"),k=y==null?f:an(y),p=b==null?f:an(b),f=new _(S,g+"leave",y,r,d),f.target=k,f.relatedTarget=p,S=null,Pr(d)===c&&(_=new _(m,g+"enter",b,r,d),_.target=p,_.relatedTarget=k,S=_),k=S,y&&b)t:{for(_=y,m=b,g=0,p=_;p;p=Kr(p))g++;for(p=0,S=m;S;S=Kr(S))p++;for(;0<g-p;)_=Kr(_),g--;for(;0<p-g;)m=Kr(m),p--;for(;g--;){if(_===m||m!==null&&_===m.alternate)break t;_=Kr(_),m=Kr(m)}_=null}else _=null;y!==null&&dc(h,f,y,_,!1),b!==null&&k!==null&&dc(h,k,b,_,!0)}}e:{if(f=c?an(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var N=a0;else if(nc(f))if(xh)N=d0;else{N=u0;var C=l0}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=c0);if(N&&(N=N(e,c))){yh(h,N,r,d);break e}C&&C(e,f,c),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Ea(f,"number",f.value)}switch(C=c?an(c):window,e){case"focusin":(nc(C)||C.contentEditable==="true")&&(sn=C,Da=c,as=null);break;case"focusout":as=Da=sn=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,lc(h,r,d);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":lc(h,r,d)}var j;if(Wl)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else nn?gh(e,r)&&(v="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(v="onCompositionStart");v&&(mh&&r.locale!=="ko"&&(nn||v!=="onCompositionStart"?v==="onCompositionEnd"&&nn&&(j=ph()):(ar=d,Ul="value"in ar?ar.value:ar.textContent,nn=!0)),C=Mi(c,v),0<C.length&&(v=new Zu(v,e,null,r,d),h.push({event:v,listeners:C}),j?v.data=j:(j=vh(r),j!==null&&(v.data=j)))),(j=r0?n0(e,r):s0(e,r))&&(c=Mi(c,"onBeforeInput"),0<c.length&&(d=new Zu("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=j))}Th(h,t)})}function Ss(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mi(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vs(e,r),i!=null&&n.unshift(Ss(e,i,s)),i=vs(e,t),i!=null&&n.push(Ss(e,i,s))),e=e.return}return n}function Kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=vs(r,i),u!=null&&o.unshift(Ss(r,u,l))):s||(u=vs(r,i),u!=null&&o.push(Ss(r,u,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var y0=/\r\n?/g,x0=/\u0000|\uFFFD/g;function hc(e){return(typeof e=="string"?e:""+e).replace(y0,`
`).replace(x0,"")}function ri(e,t,r){if(t=hc(t),hc(e)!==t&&r)throw Error(L(425))}function Ui(){}var Ua=null,Fa=null;function Ba(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,w0=typeof clearTimeout=="function"?clearTimeout:void 0,fc=typeof Promise=="function"?Promise:void 0,b0=typeof queueMicrotask=="function"?queueMicrotask:typeof fc<"u"?function(e){return fc.resolve(null).then(e).catch(k0)}:Wa;function k0(e){setTimeout(function(){throw e})}function Zo(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ws(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ws(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function pc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),Tt="__reactFiber$"+On,js="__reactProps$"+On,Ht="__reactContainer$"+On,Va="__reactEvents$"+On,_0="__reactListeners$"+On,S0="__reactHandles$"+On;function Pr(e){var t=e[Tt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ht]||r[Tt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=pc(e);e!==null;){if(r=e[Tt])return r;e=pc(e)}return t}e=r,r=e.parentNode}return null}function Ms(e){return e=e[Tt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function an(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function ho(e){return e[js]||null}var Ha=[],ln=-1;function br(e){return{current:e}}function fe(e){0>ln||(e.current=Ha[ln],Ha[ln]=null,ln--)}function de(e,t){ln++,Ha[ln]=e.current,e.current=t}var yr={},Me=br(yr),Je=br(!1),$r=yr;function Sn(e,t){var r=e.type.contextTypes;if(!r)return yr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ye(e){return e=e.childContextTypes,e!=null}function Fi(){fe(Je),fe(Me)}function mc(e,t,r){if(Me.current!==yr)throw Error(L(168));de(Me,t),de(Je,r)}function Ph(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(L(108,lm(e)||"Unknown",s));return we({},r,n)}function Bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yr,$r=Me.current,de(Me,e),de(Je,Je.current),!0}function gc(e,t,r){var n=e.stateNode;if(!n)throw Error(L(169));r?(e=Ph(e,t,$r),n.__reactInternalMemoizedMergedChildContext=e,fe(Je),fe(Me),de(Me,e)):fe(Je),de(Je,r)}var Mt=null,fo=!1,ea=!1;function Ih(e){Mt===null?Mt=[e]:Mt.push(e)}function j0(e){fo=!0,Ih(e)}function kr(){if(!ea&&Mt!==null){ea=!0;var e=0,t=ae;try{var r=Mt;for(ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Mt=null,fo=!1}catch(s){throw Mt!==null&&(Mt=Mt.slice(e+1)),nh($l,kr),s}finally{ae=t,ea=!1}}return null}var un=[],cn=0,Wi=null,Vi=0,lt=[],ut=0,zr=null,Ut=1,Ft="";function Er(e,t){un[cn++]=Vi,un[cn++]=Wi,Wi=e,Vi=t}function Oh(e,t,r){lt[ut++]=Ut,lt[ut++]=Ft,lt[ut++]=zr,zr=e;var n=Ut;e=Ft;var s=32-bt(n)-1;n&=~(1<<s),r+=1;var i=32-bt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ut=1<<32-bt(t)+s|r<<s|n,Ft=i+e}else Ut=1<<i|r<<s|n,Ft=e}function Hl(e){e.return!==null&&(Er(e,1),Oh(e,1,0))}function ql(e){for(;e===Wi;)Wi=un[--cn],un[cn]=null,Vi=un[--cn],un[cn]=null;for(;e===zr;)zr=lt[--ut],lt[ut]=null,Ft=lt[--ut],lt[ut]=null,Ut=lt[--ut],lt[ut]=null}var tt=null,et=null,pe=!1,wt=null;function Lh(e,t){var r=ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function vc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tt=e,et=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tt=e,et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zr!==null?{id:Ut,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,tt=e,et=null,!0):!1;default:return!1}}function qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ga(e){if(pe){var t=et;if(t){var r=t;if(!vc(e,t)){if(qa(e))throw Error(L(418));t=hr(r.nextSibling);var n=tt;t&&vc(e,t)?Lh(n,r):(e.flags=e.flags&-4097|2,pe=!1,tt=e)}}else{if(qa(e))throw Error(L(418));e.flags=e.flags&-4097|2,pe=!1,tt=e}}}function yc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function ni(e){if(e!==tt)return!1;if(!pe)return yc(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ba(e.type,e.memoizedProps)),t&&(t=et)){if(qa(e))throw Ah(),Error(L(418));for(;t;)Lh(e,t),t=hr(t.nextSibling)}if(yc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){et=hr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}et=null}}else et=tt?hr(e.stateNode.nextSibling):null;return!0}function Ah(){for(var e=et;e;)e=hr(e.nextSibling)}function jn(){et=tt=null,pe=!1}function Gl(e){wt===null?wt=[e]:wt.push(e)}var E0=Qt.ReactCurrentBatchConfig;function qn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(L(309));var n=r.stateNode}if(!n)throw Error(L(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(L(284));if(!r._owner)throw Error(L(290,e))}return e}function si(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xc(e){var t=e._init;return t(e._payload)}function $h(e){function t(m,g){if(e){var p=m.deletions;p===null?(m.deletions=[g],m.flags|=16):p.push(g)}}function r(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function n(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=gr(m,g),m.index=0,m.sibling=null,m}function i(m,g,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<g?(m.flags|=2,g):p):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,g,p,S){return g===null||g.tag!==6?(g=aa(p,m.mode,S),g.return=m,g):(g=s(g,p),g.return=m,g)}function u(m,g,p,S){var N=p.type;return N===rn?d(m,g,p.props.children,S,p.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===tr&&xc(N)===g.type)?(S=s(g,p.props),S.ref=qn(m,g,p),S.return=m,S):(S=Ci(p.type,p.key,p.props,null,m.mode,S),S.ref=qn(m,g,p),S.return=m,S)}function c(m,g,p,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=la(p,m.mode,S),g.return=m,g):(g=s(g,p.children||[]),g.return=m,g)}function d(m,g,p,S,N){return g===null||g.tag!==7?(g=Ar(p,m.mode,S,N),g.return=m,g):(g=s(g,p),g.return=m,g)}function h(m,g,p){if(typeof g=="string"&&g!==""||typeof g=="number")return g=aa(""+g,m.mode,p),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Gs:return p=Ci(g.type,g.key,g.props,null,m.mode,p),p.ref=qn(m,null,g),p.return=m,p;case tn:return g=la(g,m.mode,p),g.return=m,g;case tr:var S=g._init;return h(m,S(g._payload),p)}if(Xn(g)||Fn(g))return g=Ar(g,m.mode,p,null),g.return=m,g;si(m,g)}return null}function f(m,g,p,S){var N=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:l(m,g,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Gs:return p.key===N?u(m,g,p,S):null;case tn:return p.key===N?c(m,g,p,S):null;case tr:return N=p._init,f(m,g,N(p._payload),S)}if(Xn(p)||Fn(p))return N!==null?null:d(m,g,p,S,null);si(m,p)}return null}function y(m,g,p,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(p)||null,l(g,m,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gs:return m=m.get(S.key===null?p:S.key)||null,u(g,m,S,N);case tn:return m=m.get(S.key===null?p:S.key)||null,c(g,m,S,N);case tr:var C=S._init;return y(m,g,p,C(S._payload),N)}if(Xn(S)||Fn(S))return m=m.get(p)||null,d(g,m,S,N,null);si(g,S)}return null}function b(m,g,p,S){for(var N=null,C=null,j=g,v=g=0,w=null;j!==null&&v<p.length;v++){j.index>v?(w=j,j=null):w=j.sibling;var E=f(m,j,p[v],S);if(E===null){j===null&&(j=w);break}e&&j&&E.alternate===null&&t(m,j),g=i(E,g,v),C===null?N=E:C.sibling=E,C=E,j=w}if(v===p.length)return r(m,j),pe&&Er(m,v),N;if(j===null){for(;v<p.length;v++)j=h(m,p[v],S),j!==null&&(g=i(j,g,v),C===null?N=j:C.sibling=j,C=j);return pe&&Er(m,v),N}for(j=n(m,j);v<p.length;v++)w=y(j,m,v,p[v],S),w!==null&&(e&&w.alternate!==null&&j.delete(w.key===null?v:w.key),g=i(w,g,v),C===null?N=w:C.sibling=w,C=w);return e&&j.forEach(function(P){return t(m,P)}),pe&&Er(m,v),N}function _(m,g,p,S){var N=Fn(p);if(typeof N!="function")throw Error(L(150));if(p=N.call(p),p==null)throw Error(L(151));for(var C=N=null,j=g,v=g=0,w=null,E=p.next();j!==null&&!E.done;v++,E=p.next()){j.index>v?(w=j,j=null):w=j.sibling;var P=f(m,j,E.value,S);if(P===null){j===null&&(j=w);break}e&&j&&P.alternate===null&&t(m,j),g=i(P,g,v),C===null?N=P:C.sibling=P,C=P,j=w}if(E.done)return r(m,j),pe&&Er(m,v),N;if(j===null){for(;!E.done;v++,E=p.next())E=h(m,E.value,S),E!==null&&(g=i(E,g,v),C===null?N=E:C.sibling=E,C=E);return pe&&Er(m,v),N}for(j=n(m,j);!E.done;v++,E=p.next())E=y(j,m,v,E.value,S),E!==null&&(e&&E.alternate!==null&&j.delete(E.key===null?v:E.key),g=i(E,g,v),C===null?N=E:C.sibling=E,C=E);return e&&j.forEach(function(R){return t(m,R)}),pe&&Er(m,v),N}function k(m,g,p,S){if(typeof p=="object"&&p!==null&&p.type===rn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Gs:e:{for(var N=p.key,C=g;C!==null;){if(C.key===N){if(N=p.type,N===rn){if(C.tag===7){r(m,C.sibling),g=s(C,p.props.children),g.return=m,m=g;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===tr&&xc(N)===C.type){r(m,C.sibling),g=s(C,p.props),g.ref=qn(m,C,p),g.return=m,m=g;break e}r(m,C);break}else t(m,C);C=C.sibling}p.type===rn?(g=Ar(p.props.children,m.mode,S,p.key),g.return=m,m=g):(S=Ci(p.type,p.key,p.props,null,m.mode,S),S.ref=qn(m,g,p),S.return=m,m=S)}return o(m);case tn:e:{for(C=p.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){r(m,g.sibling),g=s(g,p.children||[]),g.return=m,m=g;break e}else{r(m,g);break}else t(m,g);g=g.sibling}g=la(p,m.mode,S),g.return=m,m=g}return o(m);case tr:return C=p._init,k(m,g,C(p._payload),S)}if(Xn(p))return b(m,g,p,S);if(Fn(p))return _(m,g,p,S);si(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,g!==null&&g.tag===6?(r(m,g.sibling),g=s(g,p),g.return=m,m=g):(r(m,g),g=aa(p,m.mode,S),g.return=m,m=g),o(m)):r(m,g)}return k}var En=$h(!0),zh=$h(!1),Hi=br(null),qi=null,dn=null,Kl=null;function Ql(){Kl=dn=qi=null}function Jl(e){var t=Hi.current;fe(Hi),e._currentValue=t}function Ka(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wn(e,t){qi=e,Kl=dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(Kl!==e)if(e={context:e,memoizedValue:t,next:null},dn===null){if(qi===null)throw Error(L(308));dn=e,qi.dependencies={lanes:0,firstContext:e}}else dn=dn.next=e;return t}var Ir=null;function Yl(e){Ir===null?Ir=[e]:Ir.push(e)}function Dh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Yl(t)):(r.next=s.next,s.next=r),t.interleaved=r,qt(e,n)}function qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var rr=!1;function Xl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ne&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,qt(e,r)}return s=n.interleaved,s===null?(t.next=t,Yl(n)):(t.next=s.next,s.next=t),n.interleaved=t,qt(e,r)}function ki(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zl(e,r)}}function wc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Gi(e,t,r,n){var s=e.updateQueue;rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,l=i;do{var f=l.lane,y=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,_=l;switch(f=t,y=r,_.tag){case 1:if(b=_.payload,typeof b=="function"){h=b.call(y,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,f=typeof b=="function"?b.call(y,h,f):b,f==null)break e;h=we({},h,f);break e;case 2:rr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=y,u=h):d=d.next=y,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Mr|=o,e.lanes=o,e.memoizedState=h}}function bc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(L(191,s));s.call(n)}}}var Us={},Pt=br(Us),Es=br(Us),Ns=br(Us);function Or(e){if(e===Us)throw Error(L(174));return e}function Zl(e,t){switch(de(Ns,t),de(Es,e),de(Pt,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ca(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ca(t,e)}fe(Pt),de(Pt,t)}function Nn(){fe(Pt),fe(Es),fe(Ns)}function Uh(e){Or(Ns.current);var t=Or(Pt.current),r=Ca(t,e.type);t!==r&&(de(Es,e),de(Pt,r))}function eu(e){Es.current===e&&(fe(Pt),fe(Es))}var ve=br(0);function Ki(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function tu(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var _i=Qt.ReactCurrentDispatcher,ra=Qt.ReactCurrentBatchConfig,Dr=0,ye=null,Ee=null,Re=null,Qi=!1,ls=!1,Cs=0,N0=0;function $e(){throw Error(L(321))}function ru(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_t(e[r],t[r]))return!1;return!0}function nu(e,t,r,n,s,i){if(Dr=i,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_i.current=e===null||e.memoizedState===null?P0:I0,e=r(n,s),ls){i=0;do{if(ls=!1,Cs=0,25<=i)throw Error(L(301));i+=1,Re=Ee=null,t.updateQueue=null,_i.current=O0,e=r(n,s)}while(ls)}if(_i.current=Ji,t=Ee!==null&&Ee.next!==null,Dr=0,Re=Ee=ye=null,Qi=!1,t)throw Error(L(300));return e}function su(){var e=Cs!==0;return Cs=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ye.memoizedState=Re=e:Re=Re.next=e,Re}function ft(){if(Ee===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Re===null?ye.memoizedState:Re.next;if(t!==null)Re=t,Ee=e;else{if(e===null)throw Error(L(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Re===null?ye.memoizedState=Re=e:Re=Re.next=e}return Re}function Ts(e,t){return typeof t=="function"?t(e):t}function na(e){var t=ft(),r=t.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=e;var n=Ee,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((Dr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=n):u=u.next=h,ye.lanes|=d,Mr|=d}c=c.next}while(c!==null&&c!==i);u===null?o=n:u.next=l,_t(n,t.memoizedState)||(Qe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=u,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ye.lanes|=i,Mr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function sa(e){var t=ft(),r=t.queue;if(r===null)throw Error(L(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);_t(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Fh(){}function Bh(e,t){var r=ye,n=ft(),s=t(),i=!_t(n.memoizedState,s);if(i&&(n.memoizedState=s,Qe=!0),n=n.queue,iu(Hh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Re!==null&&Re.memoizedState.tag&1){if(r.flags|=2048,Rs(9,Vh.bind(null,r,n,s,t),void 0,null),Pe===null)throw Error(L(349));Dr&30||Wh(r,t,s)}return s}function Wh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Vh(e,t,r,n){t.value=r,t.getSnapshot=n,qh(t)&&Gh(e)}function Hh(e,t,r){return r(function(){qh(t)&&Gh(e)})}function qh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_t(e,r)}catch{return!0}}function Gh(e){var t=qt(e,1);t!==null&&kt(t,e,1,-1)}function kc(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=R0.bind(null,ye,e),[t.memoizedState,e]}function Rs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Kh(){return ft().memoizedState}function Si(e,t,r,n){var s=Ct();ye.flags|=e,s.memoizedState=Rs(1|t,r,void 0,n===void 0?null:n)}function po(e,t,r,n){var s=ft();n=n===void 0?null:n;var i=void 0;if(Ee!==null){var o=Ee.memoizedState;if(i=o.destroy,n!==null&&ru(n,o.deps)){s.memoizedState=Rs(t,r,i,n);return}}ye.flags|=e,s.memoizedState=Rs(1|t,r,i,n)}function _c(e,t){return Si(8390656,8,e,t)}function iu(e,t){return po(2048,8,e,t)}function Qh(e,t){return po(4,2,e,t)}function Jh(e,t){return po(4,4,e,t)}function Yh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xh(e,t,r){return r=r!=null?r.concat([e]):null,po(4,4,Yh.bind(null,t,e),r)}function ou(){}function Zh(e,t){var r=ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ru(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ef(e,t){var r=ft();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ru(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function tf(e,t,r){return Dr&21?(_t(r,t)||(r=oh(),ye.lanes|=r,Mr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=r)}function C0(e,t){var r=ae;ae=r!==0&&4>r?r:4,e(!0);var n=ra.transition;ra.transition={};try{e(!1),t()}finally{ae=r,ra.transition=n}}function rf(){return ft().memoizedState}function T0(e,t,r){var n=mr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nf(e))sf(t,r);else if(r=Dh(e,t,r,n),r!==null){var s=Be();kt(r,e,n,s),of(r,t,n)}}function R0(e,t,r){var n=mr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nf(e))sf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,_t(l,o)){var u=t.interleaved;u===null?(s.next=s,Yl(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}r=Dh(e,t,s,n),r!==null&&(s=Be(),kt(r,e,n,s),of(r,t,n))}}function nf(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function sf(e,t){ls=Qi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function of(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zl(e,r)}}var Ji={readContext:ht,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},P0={readContext:ht,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:_c,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Si(4194308,4,Yh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Si(4194308,4,e,t)},useInsertionEffect:function(e,t){return Si(4,2,e,t)},useMemo:function(e,t){var r=Ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ct();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=T0.bind(null,ye,e),[n.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:kc,useDebugValue:ou,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=kc(!1),t=e[0];return e=C0.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ye,s=Ct();if(pe){if(r===void 0)throw Error(L(407));r=r()}else{if(r=t(),Pe===null)throw Error(L(349));Dr&30||Wh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,_c(Hh.bind(null,n,i,e),[e]),n.flags|=2048,Rs(9,Vh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ct(),t=Pe.identifierPrefix;if(pe){var r=Ft,n=Ut;r=(n&~(1<<32-bt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=N0++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},I0={readContext:ht,useCallback:Zh,useContext:ht,useEffect:iu,useImperativeHandle:Xh,useInsertionEffect:Qh,useLayoutEffect:Jh,useMemo:ef,useReducer:na,useRef:Kh,useState:function(){return na(Ts)},useDebugValue:ou,useDeferredValue:function(e){var t=ft();return tf(t,Ee.memoizedState,e)},useTransition:function(){var e=na(Ts)[0],t=ft().memoizedState;return[e,t]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:rf,unstable_isNewReconciler:!1},O0={readContext:ht,useCallback:Zh,useContext:ht,useEffect:iu,useImperativeHandle:Xh,useInsertionEffect:Qh,useLayoutEffect:Jh,useMemo:ef,useReducer:sa,useRef:Kh,useState:function(){return sa(Ts)},useDebugValue:ou,useDeferredValue:function(e){var t=ft();return Ee===null?t.memoizedState=e:tf(t,Ee.memoizedState,e)},useTransition:function(){var e=sa(Ts)[0],t=ft().memoizedState;return[e,t]},useMutableSource:Fh,useSyncExternalStore:Bh,useId:rf,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=we({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Qa(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:we({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mo={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Be(),s=mr(e),i=Bt(n,s);i.payload=t,r!=null&&(i.callback=r),t=fr(e,i,s),t!==null&&(kt(t,e,s,n),ki(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Be(),s=mr(e),i=Bt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=fr(e,i,s),t!==null&&(kt(t,e,s,n),ki(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),n=mr(e),s=Bt(r,n);s.tag=2,t!=null&&(s.callback=t),t=fr(e,s,n),t!==null&&(kt(t,e,n,r),ki(t,e,n))}};function Sc(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ks(r,n)||!ks(s,i):!0}function af(e,t,r){var n=!1,s=yr,i=t.contextType;return typeof i=="object"&&i!==null?i=ht(i):(s=Ye(t)?$r:Me.current,n=t.contextTypes,i=(n=n!=null)?Sn(e,s):yr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function jc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Ja(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Xl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ht(i):(i=Ye(t)?$r:Me.current,s.context=Sn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Qa(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Gi(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Cn(e,t){try{var r="",n=t;do r+=am(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ia(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ya(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var L0=typeof WeakMap=="function"?WeakMap:Map;function lf(e,t,r){r=Bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xi||(Xi=!0,al=n),Ya(e,t)},r}function uf(e,t,r){r=Bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ya(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ya(e,t),typeof n!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ec(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new L0;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=K0.bind(null,e,t,r),t.then(e,e))}function Nc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bt(-1,1),t.tag=2,fr(r,t,1))),r.lanes|=1),e)}var A0=Qt.ReactCurrentOwner,Qe=!1;function Fe(e,t,r,n){t.child=e===null?zh(t,null,r,n):En(t,e.child,r,n)}function Tc(e,t,r,n,s){r=r.render;var i=t.ref;return wn(t,s),n=nu(e,t,r,n,i,s),r=su(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(pe&&r&&Hl(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Rc(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!pu(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,cf(e,t,i,n,s)):(e=Ci(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ks,r(o,n)&&e.ref===t.ref)return Gt(e,t,s)}return t.flags|=1,e=gr(i,n),e.ref=t.ref,e.return=t,t.child=e}function cf(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ks(i,n)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Gt(e,t,s)}return Xa(e,t,r,n,s)}function df(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(fn,Ze),Ze|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(fn,Ze),Ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,de(fn,Ze),Ze|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,de(fn,Ze),Ze|=n;return Fe(e,t,s,r),t.child}function hf(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xa(e,t,r,n,s){var i=Ye(r)?$r:Me.current;return i=Sn(t,i),wn(t,s),r=nu(e,t,r,n,i,s),n=su(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(pe&&n&&Hl(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Pc(e,t,r,n,s){if(Ye(r)){var i=!0;Bi(t)}else i=!1;if(wn(t,s),t.stateNode===null)ji(e,t),af(t,r,n),Ja(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ht(c):(c=Ye(r)?$r:Me.current,c=Sn(t,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==c)&&jc(t,o,n,c),rr=!1;var f=t.memoizedState;o.state=f,Gi(t,n,o,s),u=t.memoizedState,l!==n||f!==u||Je.current||rr?(typeof d=="function"&&(Qa(t,r,d,n),u=t.memoizedState),(l=rr||Sc(t,r,l,n,f,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),o.props=n,o.state=u,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Mh(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:vt(t.type,l),o.props=c,h=t.pendingProps,f=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=ht(u):(u=Ye(r)?$r:Me.current,u=Sn(t,u));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==u)&&jc(t,o,n,u),rr=!1,f=t.memoizedState,o.state=f,Gi(t,n,o,s);var b=t.memoizedState;l!==h||f!==b||Je.current||rr?(typeof y=="function"&&(Qa(t,r,y,n),b=t.memoizedState),(c=rr||Sc(t,r,c,n,f,b,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=u,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Za(e,t,r,n,i,s)}function Za(e,t,r,n,s,i){hf(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&gc(t,r,!1),Gt(e,t,i);n=t.stateNode,A0.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=En(t,e.child,null,i),t.child=En(t,null,l,i)):Fe(e,t,l,i),t.memoizedState=n.state,s&&gc(t,r,!0),t.child}function ff(e){var t=e.stateNode;t.pendingContext?mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mc(e,t.context,!1),Zl(e,t.containerInfo)}function Ic(e,t,r,n,s){return jn(),Gl(s),t.flags|=256,Fe(e,t,r,n),t.child}var el={dehydrated:null,treeContext:null,retryLane:0};function tl(e){return{baseLanes:e,cachePool:null,transitions:null}}function pf(e,t,r){var n=t.pendingProps,s=ve.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(ve,s&1),e===null)return Ga(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yo(o,n,0,null),e=Ar(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=tl(r),t.memoizedState=el,e):au(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $0(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=u,t.deletions=null):(n=gr(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gr(l,i):(i=Ar(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?tl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=el,n}return i=e.child,e=i.sibling,n=gr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function au(e,t){return t=yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ii(e,t,r,n){return n!==null&&Gl(n),En(t,e.child,null,r),e=au(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $0(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ia(Error(L(422))),ii(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=yo({mode:"visible",children:n.children},s,0,null),i=Ar(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&En(t,e.child,null,o),t.child.memoizedState=tl(o),t.memoizedState=el,i);if(!(t.mode&1))return ii(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(L(419)),n=ia(i,n,void 0),ii(e,t,o,n)}if(l=(o&e.childLanes)!==0,Qe||l){if(n=Pe,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qt(e,s),kt(n,e,s,-1))}return fu(),n=ia(Error(L(421))),ii(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Q0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,et=hr(s.nextSibling),tt=t,pe=!0,wt=null,e!==null&&(lt[ut++]=Ut,lt[ut++]=Ft,lt[ut++]=zr,Ut=e.id,Ft=e.overflow,zr=t),t=au(t,n.children),t.flags|=4096,t)}function Oc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ka(e.return,t,r)}function oa(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function mf(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Fe(e,t,n.children,r),n=ve.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Oc(e,r,t);else if(e.tag===19)Oc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ve,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ki(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),oa(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ki(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}oa(t,!0,r,null,i);break;case"together":oa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ji(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,r=gr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=gr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function z0(e,t,r){switch(t.tag){case 3:ff(t),jn();break;case 5:Uh(t);break;case 1:Ye(t.type)&&Bi(t);break;case 4:Zl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;de(Hi,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ve,ve.current&1),t.flags|=128,null):r&t.child.childLanes?pf(e,t,r):(de(ve,ve.current&1),e=Gt(e,t,r),e!==null?e.sibling:null);de(ve,ve.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return mf(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ve,ve.current),n)break;return null;case 22:case 23:return t.lanes=0,df(e,t,r)}return Gt(e,t,r)}var gf,rl,vf,yf;gf=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};rl=function(){};vf=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Or(Pt.current);var i=null;switch(r){case"input":s=Sa(e,s),n=Sa(e,n),i=[];break;case"select":s=we({},s,{value:void 0}),n=we({},n,{value:void 0}),i=[];break;case"textarea":s=Na(e,s),n=Na(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ui)}Ta(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ms.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ms.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&he("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};yf=function(e,t,r,n){r!==n&&(t.flags|=4)};function Gn(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function D0(e,t,r){var n=t.pendingProps;switch(ql(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return Ye(t.type)&&Fi(),ze(t),null;case 3:return n=t.stateNode,Nn(),fe(Je),fe(Me),tu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ni(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(cl(wt),wt=null))),rl(e,t),ze(t),null;case 5:eu(t);var s=Or(Ns.current);if(r=t.type,e!==null&&t.stateNode!=null)vf(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(L(166));return ze(t),null}if(e=Or(Pt.current),ni(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Tt]=t,n[js]=i,e=(t.mode&1)!==0,r){case"dialog":he("cancel",n),he("close",n);break;case"iframe":case"object":case"embed":he("load",n);break;case"video":case"audio":for(s=0;s<es.length;s++)he(es[s],n);break;case"source":he("error",n);break;case"img":case"image":case"link":he("error",n),he("load",n);break;case"details":he("toggle",n);break;case"input":Bu(n,i),he("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},he("invalid",n);break;case"textarea":Vu(n,i),he("invalid",n)}Ta(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ri(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ri(n.textContent,l,e),s=["children",""+l]):ms.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&he("scroll",n)}switch(r){case"input":Ks(n),Wu(n,i,!0);break;case"textarea":Ks(n),Hu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ui)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Tt]=t,e[js]=n,gf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ra(r,n),r){case"dialog":he("cancel",e),he("close",e),s=n;break;case"iframe":case"object":case"embed":he("load",e),s=n;break;case"video":case"audio":for(s=0;s<es.length;s++)he(es[s],e);s=n;break;case"source":he("error",e),s=n;break;case"img":case"image":case"link":he("error",e),he("load",e),s=n;break;case"details":he("toggle",e),s=n;break;case"input":Bu(e,n),s=Sa(e,n),he("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=we({},n,{value:void 0}),he("invalid",e);break;case"textarea":Vu(e,n),s=Na(e,n),he("invalid",e);break;default:s=n}Ta(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Kd(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&qd(e,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&gs(e,u):typeof u=="number"&&gs(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?u!=null&&i==="onScroll"&&he("scroll",e):u!=null&&Pl(e,i,u,o))}switch(r){case"input":Ks(e),Wu(e,n,!1);break;case"textarea":Ks(e),Hu(e);break;case"option":n.value!=null&&e.setAttribute("value",""+vr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?gn(e,!!n.multiple,i,!1):n.defaultValue!=null&&gn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ui)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)yf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(L(166));if(r=Or(Ns.current),Or(Pt.current),ni(t)){if(n=t.stateNode,r=t.memoizedProps,n[Tt]=t,(i=n.nodeValue!==r)&&(e=tt,e!==null))switch(e.tag){case 3:ri(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ri(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Tt]=t,t.stateNode=n}return ze(t),null;case 13:if(fe(ve),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&et!==null&&t.mode&1&&!(t.flags&128))Ah(),jn(),t.flags|=98560,i=!1;else if(i=ni(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(L(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(L(317));i[Tt]=t}else jn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),i=!1}else wt!==null&&(cl(wt),wt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Ne===0&&(Ne=3):fu())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Nn(),rl(e,t),e===null&&_s(t.stateNode.containerInfo),ze(t),null;case 10:return Jl(t.type._context),ze(t),null;case 17:return Ye(t.type)&&Fi(),ze(t),null;case 19:if(fe(ve),i=t.memoizedState,i===null)return ze(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Gn(i,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ki(e),o!==null){for(t.flags|=128,Gn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&_e()>Tn&&(t.flags|=128,n=!0,Gn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ki(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Gn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return ze(t),null}else 2*_e()-i.renderingStartTime>Tn&&r!==1073741824&&(t.flags|=128,n=!0,Gn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=_e(),t.sibling=null,r=ve.current,de(ve,n?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return hu(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ze&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function M0(e,t){switch(ql(t),t.tag){case 1:return Ye(t.type)&&Fi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nn(),fe(Je),fe(Me),tu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return eu(t),null;case 13:if(fe(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));jn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(ve),null;case 4:return Nn(),null;case 10:return Jl(t.type._context),null;case 22:case 23:return hu(),null;case 24:return null;default:return null}}var oi=!1,De=!1,U0=typeof WeakSet=="function"?WeakSet:Set,U=null;function hn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ke(e,t,n)}else r.current=null}function nl(e,t,r){try{r()}catch(n){ke(e,t,n)}}var Lc=!1;function F0(e,t){if(Ua=zi,e=kh(),Vl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(u=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===e)break t;if(f===r&&++c===s&&(l=o),f===i&&++d===n&&(u=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fa={focusedElem:e,selectionRange:r},zi=!1,U=t;U!==null;)if(t=U,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,U=e;else for(;U!==null;){t=U;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var _=b.memoizedProps,k=b.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?_:vt(t.type,_),k);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(S){ke(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,U=e;break}U=t.return}return b=Lc,Lc=!1,b}function us(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&nl(t,r,i)}s=s.next}while(s!==n)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function sl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function xf(e){var t=e.alternate;t!==null&&(e.alternate=null,xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tt],delete t[js],delete t[Va],delete t[_0],delete t[S0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wf(e){return e.tag===5||e.tag===3||e.tag===4}function Ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function il(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ui));else if(n!==4&&(e=e.child,e!==null))for(il(e,t,r),e=e.sibling;e!==null;)il(e,t,r),e=e.sibling}function ol(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ol(e,t,r),e=e.sibling;e!==null;)ol(e,t,r),e=e.sibling}var Ie=null,yt=!1;function Zt(e,t,r){for(r=r.child;r!==null;)bf(e,t,r),r=r.sibling}function bf(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(ao,r)}catch{}switch(r.tag){case 5:De||hn(r,t);case 6:var n=Ie,s=yt;Ie=null,Zt(e,t,r),Ie=n,yt=s,Ie!==null&&(yt?(e=Ie,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ie.removeChild(r.stateNode));break;case 18:Ie!==null&&(yt?(e=Ie,r=r.stateNode,e.nodeType===8?Zo(e.parentNode,r):e.nodeType===1&&Zo(e,r),ws(e)):Zo(Ie,r.stateNode));break;case 4:n=Ie,s=yt,Ie=r.stateNode.containerInfo,yt=!0,Zt(e,t,r),Ie=n,yt=s;break;case 0:case 11:case 14:case 15:if(!De&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nl(r,t,o),s=s.next}while(s!==n)}Zt(e,t,r);break;case 1:if(!De&&(hn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ke(r,t,l)}Zt(e,t,r);break;case 21:Zt(e,t,r);break;case 22:r.mode&1?(De=(n=De)||r.memoizedState!==null,Zt(e,t,r),De=n):Zt(e,t,r);break;default:Zt(e,t,r)}}function $c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new U0),t.forEach(function(n){var s=J0.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function mt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ie=l.stateNode,yt=!1;break e;case 3:Ie=l.stateNode.containerInfo,yt=!0;break e;case 4:Ie=l.stateNode.containerInfo,yt=!0;break e}l=l.return}if(Ie===null)throw Error(L(160));bf(i,o,s),Ie=null,yt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){ke(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}function kf(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),Nt(e),n&4){try{us(3,e,e.return),go(3,e)}catch(_){ke(e,e.return,_)}try{us(5,e,e.return)}catch(_){ke(e,e.return,_)}}break;case 1:mt(t,e),Nt(e),n&512&&r!==null&&hn(r,r.return);break;case 5:if(mt(t,e),Nt(e),n&512&&r!==null&&hn(r,r.return),e.flags&32){var s=e.stateNode;try{gs(s,"")}catch(_){ke(e,e.return,_)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Wd(s,i),Ra(l,o);var c=Ra(l,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?Kd(s,h):d==="dangerouslySetInnerHTML"?qd(s,h):d==="children"?gs(s,h):Pl(s,d,h,c)}switch(l){case"input":ja(s,i);break;case"textarea":Vd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?gn(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?gn(s,!!i.multiple,i.defaultValue,!0):gn(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(_){ke(e,e.return,_)}}break;case 6:if(mt(t,e),Nt(e),n&4){if(e.stateNode===null)throw Error(L(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(_){ke(e,e.return,_)}}break;case 3:if(mt(t,e),Nt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(_){ke(e,e.return,_)}break;case 4:mt(t,e),Nt(e);break;case 13:mt(t,e),Nt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cu=_e())),n&4&&$c(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(De=(c=De)||d,mt(t,e),De=c):mt(t,e),Nt(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(U=e,d=e.child;d!==null;){for(h=U=d;U!==null;){switch(f=U,y=f.child,f.tag){case 0:case 11:case 14:case 15:us(4,f,f.return);break;case 1:hn(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(_){ke(n,r,_)}}break;case 5:hn(f,f.return);break;case 22:if(f.memoizedState!==null){Dc(h);continue}}y!==null?(y.return=f,U=y):Dc(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Gd("display",o))}catch(_){ke(e,e.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){ke(e,e.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mt(t,e),Nt(e),n&4&&$c(e);break;case 21:break;default:mt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wf(r)){var n=r;break e}r=r.return}throw Error(L(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(gs(s,""),n.flags&=-33);var i=Ac(e);ol(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ac(e);il(e,l,o);break;default:throw Error(L(161))}}catch(u){ke(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function B0(e,t,r){U=e,_f(e)}function _f(e,t,r){for(var n=(e.mode&1)!==0;U!==null;){var s=U,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||oi;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||De;l=oi;var c=De;if(oi=o,(De=u)&&!c)for(U=s;U!==null;)o=U,u=o.child,o.tag===22&&o.memoizedState!==null?Mc(s):u!==null?(u.return=o,U=u):Mc(s);for(;i!==null;)U=i,_f(i),i=i.sibling;U=s,oi=l,De=c}zc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,U=i):zc(e)}}function zc(e){for(;U!==null;){var t=U;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||go(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!De)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:vt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&bc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}bc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ws(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}De||t.flags&512&&sl(t)}catch(f){ke(t,t.return,f)}}if(t===e){U=null;break}if(r=t.sibling,r!==null){r.return=t.return,U=r;break}U=t.return}}function Dc(e){for(;U!==null;){var t=U;if(t===e){U=null;break}var r=t.sibling;if(r!==null){r.return=t.return,U=r;break}U=t.return}}function Mc(e){for(;U!==null;){var t=U;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{go(4,t)}catch(u){ke(t,r,u)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(u){ke(t,s,u)}}var i=t.return;try{sl(t)}catch(u){ke(t,i,u)}break;case 5:var o=t.return;try{sl(t)}catch(u){ke(t,o,u)}}}catch(u){ke(t,t.return,u)}if(t===e){U=null;break}var l=t.sibling;if(l!==null){l.return=t.return,U=l;break}U=t.return}}var W0=Math.ceil,Yi=Qt.ReactCurrentDispatcher,lu=Qt.ReactCurrentOwner,dt=Qt.ReactCurrentBatchConfig,ne=0,Pe=null,Se=null,Oe=0,Ze=0,fn=br(0),Ne=0,Ps=null,Mr=0,vo=0,uu=0,cs=null,Ge=null,cu=0,Tn=1/0,zt=null,Xi=!1,al=null,pr=null,ai=!1,lr=null,Zi=0,ds=0,ll=null,Ei=-1,Ni=0;function Be(){return ne&6?_e():Ei!==-1?Ei:Ei=_e()}function mr(e){return e.mode&1?ne&2&&Oe!==0?Oe&-Oe:E0.transition!==null?(Ni===0&&(Ni=oh()),Ni):(e=ae,e!==0||(e=window.event,e=e===void 0?16:fh(e.type)),e):1}function kt(e,t,r,n){if(50<ds)throw ds=0,ll=null,Error(L(185));zs(e,r,n),(!(ne&2)||e!==Pe)&&(e===Pe&&(!(ne&2)&&(vo|=r),Ne===4&&ir(e,Oe)),Xe(e,n),r===1&&ne===0&&!(t.mode&1)&&(Tn=_e()+500,fo&&kr()))}function Xe(e,t){var r=e.callbackNode;Em(e,t);var n=$i(e,e===Pe?Oe:0);if(n===0)r!==null&&Ku(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ku(r),t===1)e.tag===0?j0(Uc.bind(null,e)):Ih(Uc.bind(null,e)),b0(function(){!(ne&6)&&kr()}),r=null;else{switch(ah(n)){case 1:r=$l;break;case 4:r=sh;break;case 16:r=Ai;break;case 536870912:r=ih;break;default:r=Ai}r=Pf(r,Sf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Sf(e,t){if(Ei=-1,Ni=0,ne&6)throw Error(L(327));var r=e.callbackNode;if(bn()&&e.callbackNode!==r)return null;var n=$i(e,e===Pe?Oe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=eo(e,n);else{t=n;var s=ne;ne|=2;var i=Ef();(Pe!==e||Oe!==t)&&(zt=null,Tn=_e()+500,Lr(e,t));do try{q0();break}catch(l){jf(e,l)}while(1);Ql(),Yi.current=i,ne=s,Se!==null?t=0:(Pe=null,Oe=0,t=Ne)}if(t!==0){if(t===2&&(s=Aa(e),s!==0&&(n=s,t=ul(e,s))),t===1)throw r=Ps,Lr(e,0),ir(e,n),Xe(e,_e()),r;if(t===6)ir(e,n);else{if(s=e.current.alternate,!(n&30)&&!V0(s)&&(t=eo(e,n),t===2&&(i=Aa(e),i!==0&&(n=i,t=ul(e,i))),t===1))throw r=Ps,Lr(e,0),ir(e,n),Xe(e,_e()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(L(345));case 2:Nr(e,Ge,zt);break;case 3:if(ir(e,n),(n&130023424)===n&&(t=cu+500-_e(),10<t)){if($i(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Wa(Nr.bind(null,e,Ge,zt),t);break}Nr(e,Ge,zt);break;case 4:if(ir(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-bt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=_e()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*W0(n/1960))-n,10<n){e.timeoutHandle=Wa(Nr.bind(null,e,Ge,zt),n);break}Nr(e,Ge,zt);break;case 5:Nr(e,Ge,zt);break;default:throw Error(L(329))}}}return Xe(e,_e()),e.callbackNode===r?Sf.bind(null,e):null}function ul(e,t){var r=cs;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Ge,Ge=r,t!==null&&cl(t)),e}function cl(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function V0(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!_t(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~uu,t&=~vo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-bt(t),n=1<<r;e[r]=-1,t&=~n}}function Uc(e){if(ne&6)throw Error(L(327));bn();var t=$i(e,0);if(!(t&1))return Xe(e,_e()),null;var r=eo(e,t);if(e.tag!==0&&r===2){var n=Aa(e);n!==0&&(t=n,r=ul(e,n))}if(r===1)throw r=Ps,Lr(e,0),ir(e,t),Xe(e,_e()),r;if(r===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nr(e,Ge,zt),Xe(e,_e()),null}function du(e,t){var r=ne;ne|=1;try{return e(t)}finally{ne=r,ne===0&&(Tn=_e()+500,fo&&kr())}}function Ur(e){lr!==null&&lr.tag===0&&!(ne&6)&&bn();var t=ne;ne|=1;var r=dt.transition,n=ae;try{if(dt.transition=null,ae=1,e)return e()}finally{ae=n,dt.transition=r,ne=t,!(ne&6)&&kr()}}function hu(){Ze=fn.current,fe(fn)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,w0(r)),Se!==null)for(r=Se.return;r!==null;){var n=r;switch(ql(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fi();break;case 3:Nn(),fe(Je),fe(Me),tu();break;case 5:eu(n);break;case 4:Nn();break;case 13:fe(ve);break;case 19:fe(ve);break;case 10:Jl(n.type._context);break;case 22:case 23:hu()}r=r.return}if(Pe=e,Se=e=gr(e.current,null),Oe=Ze=t,Ne=0,Ps=null,uu=vo=Mr=0,Ge=cs=null,Ir!==null){for(t=0;t<Ir.length;t++)if(r=Ir[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ir=null}return e}function jf(e,t){do{var r=Se;try{if(Ql(),_i.current=Ji,Qi){for(var n=ye.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Qi=!1}if(Dr=0,Re=Ee=ye=null,ls=!1,Cs=0,lu.current=null,r===null||r.return===null){Ne=1,Ps=t,Se=null;break}e:{var i=e,o=r.return,l=r,u=t;if(t=Oe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Nc(o);if(y!==null){y.flags&=-257,Cc(y,o,l,i,t),y.mode&1&&Ec(i,c,t),t=y,u=c;var b=t.updateQueue;if(b===null){var _=new Set;_.add(u),t.updateQueue=_}else b.add(u);break e}else{if(!(t&1)){Ec(i,c,t),fu();break e}u=Error(L(426))}}else if(pe&&l.mode&1){var k=Nc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Cc(k,o,l,i,t),Gl(Cn(u,l));break e}}i=u=Cn(u,l),Ne!==4&&(Ne=2),cs===null?cs=[i]:cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=lf(i,u,t);wc(i,m);break e;case 1:l=u;var g=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pr===null||!pr.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=uf(i,l,t);wc(i,S);break e}}i=i.return}while(i!==null)}Cf(r)}catch(N){t=N,Se===r&&r!==null&&(Se=r=r.return);continue}break}while(1)}function Ef(){var e=Yi.current;return Yi.current=Ji,e===null?Ji:e}function fu(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Pe===null||!(Mr&268435455)&&!(vo&268435455)||ir(Pe,Oe)}function eo(e,t){var r=ne;ne|=2;var n=Ef();(Pe!==e||Oe!==t)&&(zt=null,Lr(e,t));do try{H0();break}catch(s){jf(e,s)}while(1);if(Ql(),ne=r,Yi.current=n,Se!==null)throw Error(L(261));return Pe=null,Oe=0,Ne}function H0(){for(;Se!==null;)Nf(Se)}function q0(){for(;Se!==null&&!vm();)Nf(Se)}function Nf(e){var t=Rf(e.alternate,e,Ze);e.memoizedProps=e.pendingProps,t===null?Cf(e):Se=t,lu.current=null}function Cf(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=M0(r,t),r!==null){r.flags&=32767,Se=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,Se=null;return}}else if(r=D0(r,t,Ze),r!==null){Se=r;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ne===0&&(Ne=5)}function Nr(e,t,r){var n=ae,s=dt.transition;try{dt.transition=null,ae=1,G0(e,t,r,n)}finally{dt.transition=s,ae=n}return null}function G0(e,t,r,n){do bn();while(lr!==null);if(ne&6)throw Error(L(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Nm(e,i),e===Pe&&(Se=Pe=null,Oe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ai||(ai=!0,Pf(Ai,function(){return bn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=dt.transition,dt.transition=null;var o=ae;ae=1;var l=ne;ne|=4,lu.current=null,F0(e,r),kf(r,e),f0(Fa),zi=!!Ua,Fa=Ua=null,e.current=r,B0(r),ym(),ne=l,ae=o,dt.transition=i}else e.current=r;if(ai&&(ai=!1,lr=e,Zi=s),i=e.pendingLanes,i===0&&(pr=null),bm(r.stateNode),Xe(e,_e()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xi)throw Xi=!1,e=al,al=null,e;return Zi&1&&e.tag!==0&&bn(),i=e.pendingLanes,i&1?e===ll?ds++:(ds=0,ll=e):ds=0,kr(),null}function bn(){if(lr!==null){var e=ah(Zi),t=dt.transition,r=ae;try{if(dt.transition=null,ae=16>e?16:e,lr===null)var n=!1;else{if(e=lr,lr=null,Zi=0,ne&6)throw Error(L(331));var s=ne;for(ne|=4,U=e.current;U!==null;){var i=U,o=i.child;if(U.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(U=c;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:us(8,d,i)}var h=d.child;if(h!==null)h.return=d,U=h;else for(;U!==null;){d=U;var f=d.sibling,y=d.return;if(xf(d),d===c){U=null;break}if(f!==null){f.return=y,U=f;break}U=y}}}var b=i.alternate;if(b!==null){var _=b.child;if(_!==null){b.child=null;do{var k=_.sibling;_.sibling=null,_=k}while(_!==null)}}U=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,U=o;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:us(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,U=m;break e}U=i.return}}var g=e.current;for(U=g;U!==null;){o=U;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,U=p;else e:for(o=g;U!==null;){if(l=U,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:go(9,l)}}catch(N){ke(l,l.return,N)}if(l===o){U=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,U=S;break e}U=l.return}}if(ne=s,kr(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(ao,e)}catch{}n=!0}return n}finally{ae=r,dt.transition=t}}return!1}function Fc(e,t,r){t=Cn(r,t),t=lf(e,t,1),e=fr(e,t,1),t=Be(),e!==null&&(zs(e,1,t),Xe(e,t))}function ke(e,t,r){if(e.tag===3)Fc(e,e,r);else for(;t!==null;){if(t.tag===3){Fc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pr===null||!pr.has(n))){e=Cn(r,e),e=uf(t,e,1),t=fr(t,e,1),e=Be(),t!==null&&(zs(t,1,e),Xe(t,e));break}}t=t.return}}function K0(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,Pe===e&&(Oe&r)===r&&(Ne===4||Ne===3&&(Oe&130023424)===Oe&&500>_e()-cu?Lr(e,0):uu|=r),Xe(e,t)}function Tf(e,t){t===0&&(e.mode&1?(t=Ys,Ys<<=1,!(Ys&130023424)&&(Ys=4194304)):t=1);var r=Be();e=qt(e,t),e!==null&&(zs(e,t,r),Xe(e,r))}function Q0(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Tf(e,r)}function J0(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(L(314))}n!==null&&n.delete(t),Tf(e,r)}var Rf;Rf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Qe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Qe=!1,z0(e,t,r);Qe=!!(e.flags&131072)}else Qe=!1,pe&&t.flags&1048576&&Oh(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ji(e,t),e=t.pendingProps;var s=Sn(t,Me.current);wn(t,r),s=nu(null,t,n,e,s,r);var i=su();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(n)?(i=!0,Bi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xl(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Ja(t,n,e,r),t=Za(null,t,n,!0,i,r)):(t.tag=0,pe&&i&&Hl(t),Fe(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ji(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=X0(n),e=vt(n,e),s){case 0:t=Xa(null,t,n,e,r);break e;case 1:t=Pc(null,t,n,e,r);break e;case 11:t=Tc(null,t,n,e,r);break e;case 14:t=Rc(null,t,n,vt(n.type,e),r);break e}throw Error(L(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vt(n,s),Xa(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vt(n,s),Pc(e,t,n,s,r);case 3:e:{if(ff(t),e===null)throw Error(L(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Mh(e,t),Gi(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Cn(Error(L(423)),t),t=Ic(e,t,n,r,s);break e}else if(n!==s){s=Cn(Error(L(424)),t),t=Ic(e,t,n,r,s);break e}else for(et=hr(t.stateNode.containerInfo.firstChild),tt=t,pe=!0,wt=null,r=zh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(jn(),n===s){t=Gt(e,t,r);break e}Fe(e,t,n,r)}t=t.child}return t;case 5:return Uh(t),e===null&&Ga(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ba(n,s)?o=null:i!==null&&Ba(n,i)&&(t.flags|=32),hf(e,t),Fe(e,t,o,r),t.child;case 6:return e===null&&Ga(t),null;case 13:return pf(e,t,r);case 4:return Zl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=En(t,null,n,r):Fe(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vt(n,s),Tc(e,t,n,s,r);case 7:return Fe(e,t,t.pendingProps,r),t.child;case 8:return Fe(e,t,t.pendingProps.children,r),t.child;case 12:return Fe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,de(Hi,n._currentValue),n._currentValue=o,i!==null)if(_t(i.value,o)){if(i.children===s.children&&!Je.current){t=Gt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Bt(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),Ka(i.return,r,t),l.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(L(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ka(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,wn(t,r),s=ht(s),n=n(s),t.flags|=1,Fe(e,t,n,r),t.child;case 14:return n=t.type,s=vt(n,t.pendingProps),s=vt(n.type,s),Rc(e,t,n,s,r);case 15:return cf(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vt(n,s),ji(e,t),t.tag=1,Ye(n)?(e=!0,Bi(t)):e=!1,wn(t,r),af(t,n,s),Ja(t,n,s,r),Za(null,t,n,!0,e,r);case 19:return mf(e,t,r);case 22:return df(e,t,r)}throw Error(L(156,t.tag))};function Pf(e,t){return nh(e,t)}function Y0(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,r,n){return new Y0(e,t,r,n)}function pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function X0(e){if(typeof e=="function")return pu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ol)return 11;if(e===Ll)return 14}return 2}function gr(e,t){var r=e.alternate;return r===null?(r=ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ci(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")pu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case rn:return Ar(r.children,s,i,t);case Il:o=8,s|=8;break;case wa:return e=ct(12,r,t,s|2),e.elementType=wa,e.lanes=i,e;case ba:return e=ct(13,r,t,s),e.elementType=ba,e.lanes=i,e;case ka:return e=ct(19,r,t,s),e.elementType=ka,e.lanes=i,e;case Ud:return yo(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Dd:o=10;break e;case Md:o=9;break e;case Ol:o=11;break e;case Ll:o=14;break e;case tr:o=16,n=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=ct(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ar(e,t,r,n){return e=ct(7,e,n,t),e.lanes=r,e}function yo(e,t,r,n){return e=ct(22,e,n,t),e.elementType=Ud,e.lanes=r,e.stateNode={isHidden:!1},e}function aa(e,t,r){return e=ct(6,e,null,t),e.lanes=r,e}function la(e,t,r){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Z0(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mu(e,t,r,n,s,i,o,l,u){return e=new Z0(e,t,r,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ct(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xl(i),e}function eg(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function If(e){if(!e)return yr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var r=e.type;if(Ye(r))return Ph(e,r,t)}return t}function Of(e,t,r,n,s,i,o,l,u){return e=mu(r,n,!0,e,s,i,o,l,u),e.context=If(null),r=e.current,n=Be(),s=mr(r),i=Bt(n,s),i.callback=t??null,fr(r,i,s),e.current.lanes=s,zs(e,s,n),Xe(e,n),e}function xo(e,t,r,n){var s=t.current,i=Be(),o=mr(s);return r=If(r),t.context===null?t.context=r:t.pendingContext=r,t=Bt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=fr(s,t,o),e!==null&&(kt(e,s,o,i),ki(e,s,o)),o}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Bc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gu(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}function tg(){return null}var Lf=typeof reportError=="function"?reportError:function(e){console.error(e)};function vu(e){this._internalRoot=e}wo.prototype.render=vu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));xo(e,t,null,null)};wo.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ur(function(){xo(null,e,null,null)}),t[Ht]=null}};function wo(e){this._internalRoot=e}wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=ch();e={blockedOn:null,target:e,priority:t};for(var r=0;r<sr.length&&t!==0&&t<sr[r].priority;r++);sr.splice(r,0,e),r===0&&hh(e)}};function yu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wc(){}function rg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=to(o);i.call(c)}}var o=Of(t,n,e,0,null,!1,!1,"",Wc);return e._reactRootContainer=o,e[Ht]=o.current,_s(e.nodeType===8?e.parentNode:e),Ur(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=to(u);l.call(c)}}var u=mu(e,0,!1,null,null,!1,!1,"",Wc);return e._reactRootContainer=u,e[Ht]=u.current,_s(e.nodeType===8?e.parentNode:e),Ur(function(){xo(t,u,r,n)}),u}function ko(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=to(o);l.call(u)}}xo(t,o,e,s)}else o=rg(r,t,e,s,n);return to(o)}lh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zn(t.pendingLanes);r!==0&&(zl(t,r|1),Xe(t,_e()),!(ne&6)&&(Tn=_e()+500,kr()))}break;case 13:Ur(function(){var n=qt(e,1);if(n!==null){var s=Be();kt(n,e,1,s)}}),gu(e,1)}};Dl=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var r=Be();kt(t,e,134217728,r)}gu(e,134217728)}};uh=function(e){if(e.tag===13){var t=mr(e),r=qt(e,t);if(r!==null){var n=Be();kt(r,e,t,n)}gu(e,t)}};ch=function(){return ae};dh=function(e,t){var r=ae;try{return ae=e,t()}finally{ae=r}};Ia=function(e,t,r){switch(t){case"input":if(ja(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ho(n);if(!s)throw Error(L(90));Bd(n),ja(n,s)}}}break;case"textarea":Vd(e,r);break;case"select":t=r.value,t!=null&&gn(e,!!r.multiple,t,!1)}};Yd=du;Xd=Ur;var ng={usingClientEntryPoint:!1,Events:[Ms,an,ho,Qd,Jd,du]},Kn={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sg={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=th(e),e===null?null:e.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||tg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var li=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!li.isDisabled&&li.supportsFiber)try{ao=li.inject(sg),Rt=li}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ng;st.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yu(t))throw Error(L(200));return eg(e,t,null,r)};st.createRoot=function(e,t){if(!yu(e))throw Error(L(299));var r=!1,n="",s=Lf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mu(e,1,!1,null,null,r,!1,n,s),e[Ht]=t.current,_s(e.nodeType===8?e.parentNode:e),new vu(t)};st.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=th(t),e=e===null?null:e.stateNode,e};st.flushSync=function(e){return Ur(e)};st.hydrate=function(e,t,r){if(!bo(t))throw Error(L(200));return ko(null,e,t,!0,r)};st.hydrateRoot=function(e,t,r){if(!yu(e))throw Error(L(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=Lf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Of(t,null,e,1,r??null,s,!1,i,o),e[Ht]=t.current,_s(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new wo(t)};st.render=function(e,t,r){if(!bo(t))throw Error(L(200));return ko(null,e,t,!1,r)};st.unmountComponentAtNode=function(e){if(!bo(e))throw Error(L(40));return e._reactRootContainer?(Ur(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};st.unstable_batchedUpdates=du;st.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bo(r))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return ko(e,t,r,!1,n)};st.version="18.3.1-next-f1338f8080-20240426";function Af(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Af)}catch(e){console.error(e)}}Af(),Ld.exports=st;var ig=Ld.exports,Vc=ig;ya.createRoot=Vc.createRoot,ya.hydrateRoot=Vc.hydrateRoot;const og="modulepreload",ag=function(e,t){return new URL(e,t).href},Hc={},Wr=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=ag(i,n),i in Hc)return;Hc[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":og,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.parse=pg;xu.serialize=mg;const lg=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,ug=/^[\u0021-\u003A\u003C-\u007E]*$/,cg=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,dg=/^[\u0020-\u003A\u003D-\u007E]*$/,hg=Object.prototype.toString,fg=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function pg(e,t){const r=new fg,n=e.length;if(n<2)return r;const s=(t==null?void 0:t.decode)||gg;let i=0;do{const o=e.indexOf("=",i);if(o===-1)break;const l=e.indexOf(";",i),u=l===-1?n:l;if(o>u){i=e.lastIndexOf(";",o-1)+1;continue}const c=qc(e,i,o),d=Gc(e,o,c),h=e.slice(c,d);if(r[h]===void 0){let f=qc(e,o+1,u),y=Gc(e,u,f);const b=s(e.slice(f,y));r[h]=b}i=u+1}while(i<n);return r}function qc(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function Gc(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function mg(e,t,r){const n=(r==null?void 0:r.encode)||encodeURIComponent;if(!lg.test(e))throw new TypeError(`argument name is invalid: ${e}`);const s=n(t);if(!ug.test(s))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+s;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!cg.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!dg.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!vg(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}function gg(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function vg(e){return hg.call(e)==="[object Date]"}var Kc="popstate";function yg(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return dl("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Is(s)}return wg(t,r,null,e)}function xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function It(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xg(){return Math.random().toString(36).substring(2,10)}function Qc(e,t){return{usr:e.state,key:e.key,idx:t}}function dl(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ln(t):t,state:r,key:t&&t.key||n||xg()}}function Is({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ln(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wg(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let k=d(),m=k==null?null:k-c;c=k,u&&u({action:l,location:_.location,delta:m})}function f(k,m){l="PUSH";let g=dl(_.location,k,m);r&&r(g,k),c=d()+1;let p=Qc(g,c),S=_.createHref(g);try{o.pushState(p,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(S)}i&&u&&u({action:l,location:_.location,delta:1})}function y(k,m){l="REPLACE";let g=dl(_.location,k,m);r&&r(g,k),c=d();let p=Qc(g,c),S=_.createHref(g);o.replaceState(p,"",S),i&&u&&u({action:l,location:_.location,delta:0})}function b(k){return bg(k)}let _={get action(){return l},get location(){return e(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Kc,h),u=k,()=>{s.removeEventListener(Kc,h),u=null}},createHref(k){return t(s,k)},createURL:b,encodeLocation(k){let m=b(k);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:y,go(k){return o.go(k)}};return _}function bg(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),xe(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Is(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function $f(e,t,r="/"){return kg(e,t,r,!1)}function kg(e,t,r,n){let s=typeof t=="string"?Ln(t):t,i=Kt(s.pathname||"/",r);if(i==null)return null;let o=zf(e);_g(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=Lg(i);l=Ig(o[u],c,n)}return l}function zf(e,t=[],r=[],n=""){let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(xe(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length));let c=Wt([n,u.relativePath]),d=r.concat(u);i.children&&i.children.length>0&&(xe(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),zf(i.children,t,d,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:Rg(c,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Df(i.path))s(i,o,u)}),t}function Df(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Df(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function _g(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Pg(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Sg=/^:[\w-]+$/,jg=3,Eg=2,Ng=1,Cg=10,Tg=-2,Jc=e=>e==="*";function Rg(e,t){let r=e.split("/"),n=r.length;return r.some(Jc)&&(n+=Tg),t&&(n+=Eg),r.filter(s=>!Jc(s)).reduce((s,i)=>s+(Sg.test(i)?jg:i===""?Ng:Cg),n)}function Pg(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Ig(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],c=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=ro({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=ro({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Wt([i,h.pathname]),pathnameBase:Dg(Wt([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Wt([i,h.pathnameBase]))}return o}function ro(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Og(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:h},f)=>{if(d==="*"){let b=l[f]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=l[f];return h&&!y?c[d]=void 0:c[d]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function Og(e,t=!1,r=!0){It(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Lg(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return It(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Kt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Ag(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ln(e):e;return{pathname:r?r.startsWith("/")?r:$g(r,t):t,search:Mg(n),hash:Ug(s)}}function $g(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ua(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zg(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Mf(e){let t=zg(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Uf(e,t,r,n=!1){let s;typeof e=="string"?s=Ln(e):(s={...e},xe(!s.pathname||!s.pathname.includes("?"),ua("?","pathname","search",s)),xe(!s.pathname||!s.pathname.includes("#"),ua("#","pathname","hash",s)),xe(!s.search||!s.search.includes("#"),ua("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let u=Ag(s,l),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var Wt=e=>e.join("/").replace(/\/\/+/g,"/"),Dg=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Mg=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ug=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Fg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Ff=["POST","PUT","PATCH","DELETE"];new Set(Ff);var Bg=["GET",...Ff];new Set(Bg);var An=x.createContext(null);An.displayName="DataRouter";var _o=x.createContext(null);_o.displayName="DataRouterState";var Bf=x.createContext({isTransitioning:!1});Bf.displayName="ViewTransition";var Wg=x.createContext(new Map);Wg.displayName="Fetchers";var Vg=x.createContext(null);Vg.displayName="Await";var Ot=x.createContext(null);Ot.displayName="Navigation";var Fs=x.createContext(null);Fs.displayName="Location";var Jt=x.createContext({outlet:null,matches:[],isDataRoute:!1});Jt.displayName="Route";var wu=x.createContext(null);wu.displayName="RouteError";function Hg(e,{relative:t}={}){xe(Bs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=x.useContext(Ot),{hash:s,pathname:i,search:o}=Ws(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Wt([r,i])),n.createHref({pathname:l,search:o,hash:s})}function Bs(){return x.useContext(Fs)!=null}function Vr(){return xe(Bs(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Fs).location}var Wf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vf(e){x.useContext(Ot).static||x.useLayoutEffect(e)}function Yt(){let{isDataRoute:e}=x.useContext(Jt);return e?sv():qg()}function qg(){xe(Bs(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(An),{basename:t,navigator:r}=x.useContext(Ot),{matches:n}=x.useContext(Jt),{pathname:s}=Vr(),i=JSON.stringify(Mf(n)),o=x.useRef(!1);return Vf(()=>{o.current=!0}),x.useCallback((u,c={})=>{if(It(o.current,Wf),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=Uf(u,JSON.parse(i),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Wt([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,i,s,e])}x.createContext(null);function Ws(e,{relative:t}={}){let{matches:r}=x.useContext(Jt),{pathname:n}=Vr(),s=JSON.stringify(Mf(r));return x.useMemo(()=>Uf(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function Gg(e,t){return Hf(e,t)}function Hf(e,t,r,n){var m;xe(Bs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(Ot),{matches:i}=x.useContext(Jt),o=i[i.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",d=o&&o.route;{let g=d&&d.path||"";qf(u,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let h=Vr(),f;if(t){let g=typeof t=="string"?Ln(t):t;xe(c==="/"||((m=g.pathname)==null?void 0:m.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${g.pathname}" was given in the \`location\` prop.`),f=g}else f=h;let y=f.pathname||"/",b=y;if(c!=="/"){let g=c.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(g.length).join("/")}let _=$f(e,{pathname:b});It(d||_!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),It(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=Xg(_&&_.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Wt([c,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Wt([c,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n);return t&&k?x.createElement(Fs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},k):k}function Kg(){let e=nv(),t=Fg(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:i},"ErrorBoundary")," or"," ",x.createElement("code",{style:i},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:s},r):null,o)}var Qg=x.createElement(Kg,null),Jg=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?x.createElement(Jt.Provider,{value:this.props.routeContext},x.createElement(wu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Yg({routeContext:e,match:t,children:r}){let n=x.useContext(An);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(Jt.Provider,{value:e},r)}function Xg(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let u=s.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);xe(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:d,errors:h}=r,f=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,d)=>{let h,f=!1,y=null,b=null;r&&(h=i&&c.route.id?i[c.route.id]:void 0,y=c.route.errorElement||Qg,o&&(l<0&&d===0?(qf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,b=null):l===d&&(f=!0,b=c.route.hydrateFallbackElement||null)));let _=t.concat(s.slice(0,d+1)),k=()=>{let m;return h?m=y:f?m=b:c.route.Component?m=x.createElement(c.route.Component,null):c.route.element?m=c.route.element:m=u,x.createElement(Yg,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:r!=null},children:m})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?x.createElement(Jg,{location:r.location,revalidation:r.revalidation,component:y,error:h,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):k()},null)}function bu(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zg(e){let t=x.useContext(An);return xe(t,bu(e)),t}function ev(e){let t=x.useContext(_o);return xe(t,bu(e)),t}function tv(e){let t=x.useContext(Jt);return xe(t,bu(e)),t}function ku(e){let t=tv(e),r=t.matches[t.matches.length-1];return xe(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function rv(){return ku("useRouteId")}function nv(){var n;let e=x.useContext(wu),t=ev("useRouteError"),r=ku("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sv(){let{router:e}=Zg("useNavigate"),t=ku("useNavigate"),r=x.useRef(!1);return Vf(()=>{r.current=!0}),x.useCallback(async(s,i={})=>{It(r.current,Wf),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Yc={};function qf(e,t,r){!t&&!Yc[e]&&(Yc[e]=!0,It(!1,r))}x.memo(iv);function iv({routes:e,future:t,state:r}){return Hf(e,void 0,r,t)}function ot(e){xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ov({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){xe(!Bs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Ln(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,y=x.useMemo(()=>{let b=Kt(u,o);return b==null?null:{location:{pathname:b,search:c,hash:d,state:h,key:f},navigationType:n}},[o,u,c,d,h,f,n]);return It(y!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:x.createElement(Ot.Provider,{value:l},x.createElement(Fs.Provider,{children:t,value:y}))}function av({children:e,location:t}){return Gg(hl(e),t)}function hl(e,t=[]){let r=[];return x.Children.forEach(e,(n,s)=>{if(!x.isValidElement(n))return;let i=[...t,s];if(n.type===x.Fragment){r.push.apply(r,hl(n.props.children,i));return}xe(n.type===ot,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=hl(n.props.children,i)),r.push(o)}),r}var Ti="get",Ri="application/x-www-form-urlencoded";function So(e){return e!=null&&typeof e.tagName=="string"}function lv(e){return So(e)&&e.tagName.toLowerCase()==="button"}function uv(e){return So(e)&&e.tagName.toLowerCase()==="form"}function cv(e){return So(e)&&e.tagName.toLowerCase()==="input"}function dv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hv(e,t){return e.button===0&&(!t||t==="_self")&&!dv(e)}var ui=null;function fv(){if(ui===null)try{new FormData(document.createElement("form"),0),ui=!1}catch{ui=!0}return ui}var pv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ca(e){return e!=null&&!pv.has(e)?(It(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ri}"`),null):e}function mv(e,t){let r,n,s,i,o;if(uv(e)){let l=e.getAttribute("action");n=l?Kt(l,t):null,r=e.getAttribute("method")||Ti,s=ca(e.getAttribute("enctype"))||Ri,i=new FormData(e)}else if(lv(e)||cv(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(n=u?Kt(u,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Ti,s=ca(e.getAttribute("formenctype"))||ca(l.getAttribute("enctype"))||Ri,i=new FormData(l,e),!fv()){let{name:c,type:d,value:h}=e;if(d==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,h)}}else{if(So(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ti,n=null,s=Ri,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function _u(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function gv(e,t){if(e.id in t)return t[e.id];try{let r=await Wr(()=>import(e.module),[],import.meta.url);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vv(e){return e!=null&&typeof e.page=="string"}function yv(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function xv(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await gv(i,r);return o.links?o.links():[]}return[]}));return _v(n.flat(1).filter(yv).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Xc(e,t,r,n,s,i){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var d;return r[c].pathname!==u.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return i==="assets"?t.filter((u,c)=>o(u,c)||l(u,c)):i==="data"?t.filter((u,c)=>{var h;let d=n.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function wv(e,t,{includeHydrateFallback:r}={}){return bv(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function bv(e){return[...new Set(e)]}function kv(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function _v(e,t){let r=new Set,n=new Set(t);return e.reduce((s,i)=>{if(t&&!vv(i)&&i.as==="script"&&i.href&&n.has(i.href))return s;let l=JSON.stringify(kv(i));return r.has(l)||(r.add(l),s.push({key:l,link:i})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sv=new Set([100,101,204,205]);function jv(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Kt(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function Gf(){let e=x.useContext(An);return _u(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ev(){let e=x.useContext(_o);return _u(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Su=x.createContext(void 0);Su.displayName="FrameworkContext";function Kf(){let e=x.useContext(Su);return _u(e,"You must render this element inside a <HydratedRouter> element"),e}function Nv(e,t){let r=x.useContext(Su),[n,s]=x.useState(!1),[i,o]=x.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,f=x.useRef(null);x.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let _=m=>{m.forEach(g=>{o(g.isIntersecting)})},k=new IntersectionObserver(_,{threshold:.5});return f.current&&k.observe(f.current),()=>{k.disconnect()}}},[e]),x.useEffect(()=>{if(n){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[n]);let y=()=>{s(!0)},b=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:Qn(l,y),onBlur:Qn(u,b),onMouseEnter:Qn(c,y),onMouseLeave:Qn(d,b),onTouchStart:Qn(h,y)}]:[!1,f,{}]}function Qn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Cv({page:e,...t}){let{router:r}=Gf(),n=x.useMemo(()=>$f(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?x.createElement(Rv,{page:e,matches:n,...t}):null}function Tv(e){let{manifest:t,routeModules:r}=Kf(),[n,s]=x.useState([]);return x.useEffect(()=>{let i=!1;return xv(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function Rv({page:e,matches:t,...r}){let n=Vr(),{manifest:s,routeModules:i}=Kf(),{basename:o}=Gf(),{loaderData:l,matches:u}=Ev(),c=x.useMemo(()=>Xc(e,t,u,s,n,"data"),[e,t,u,s,n]),d=x.useMemo(()=>Xc(e,t,u,s,n,"assets"),[e,t,u,s,n]),h=x.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,_=!1;if(t.forEach(m=>{var p;let g=s.routes[m.route.id];!g||!g.hasLoader||(!c.some(S=>S.route.id===m.route.id)&&m.route.id in l&&((p=i[m.route.id])!=null&&p.shouldRevalidate)||g.hasClientLoader?_=!0:b.add(m.route.id))}),b.size===0)return[];let k=jv(e,o);return _&&b.size>0&&k.searchParams.set("_routes",t.filter(m=>b.has(m.route.id)).map(m=>m.route.id).join(",")),[k.pathname+k.search]},[o,l,n,s,c,t,e,i]),f=x.useMemo(()=>wv(d,s),[d,s]),y=Tv(d);return x.createElement(x.Fragment,null,h.map(b=>x.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),f.map(b=>x.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),y.map(({key:b,link:_})=>x.createElement("link",{key:b,..._})))}function Pv(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Qf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qf&&(window.__reactRouterVersion="7.6.2")}catch{}function Iv({basename:e,children:t,window:r}){let n=x.useRef();n.current==null&&(n.current=yg({window:r,v5Compat:!0}));let s=n.current,[i,o]=x.useState({action:s.action,location:s.location}),l=x.useCallback(u=>{x.startTransition(()=>o(u))},[o]);return x.useLayoutEffect(()=>s.listen(l),[s,l]),x.createElement(ov,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var Jf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yf=x.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:h,...f},y){let{basename:b}=x.useContext(Ot),_=typeof c=="string"&&Jf.test(c),k,m=!1;if(typeof c=="string"&&_&&(k=c,Qf))try{let w=new URL(window.location.href),E=c.startsWith("//")?new URL(w.protocol+c):new URL(c),P=Kt(E.pathname,b);E.origin===w.origin&&P!=null?c=P+E.search+E.hash:m=!0}catch{It(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=Hg(c,{relative:s}),[p,S,N]=Nv(n,f),C=$v(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:h});function j(w){t&&t(w),w.defaultPrevented||C(w)}let v=x.createElement("a",{...f,...N,href:k||g,onClick:m||i?t:j,ref:Pv(y,S),target:u,"data-discover":!_&&r==="render"?"true":void 0});return p&&!_?x.createElement(x.Fragment,null,v,x.createElement(Cv,{page:g})):v});Yf.displayName="Link";var Ov=x.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...c},d){let h=Ws(o,{relative:c.relative}),f=Vr(),y=x.useContext(_o),{navigator:b,basename:_}=x.useContext(Ot),k=y!=null&&Fv(h)&&l===!0,m=b.encodeLocation?b.encodeLocation(h).pathname:h.pathname,g=f.pathname,p=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(g=g.toLowerCase(),p=p?p.toLowerCase():null,m=m.toLowerCase()),p&&_&&(p=Kt(p,_)||p);const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let N=g===m||!s&&g.startsWith(m)&&g.charAt(S)==="/",C=p!=null&&(p===m||!s&&p.startsWith(m)&&p.charAt(m.length)==="/"),j={isActive:N,isPending:C,isTransitioning:k},v=N?t:void 0,w;typeof n=="function"?w=n(j):w=[n,N?"active":null,C?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(j):i;return x.createElement(Yf,{...c,"aria-current":v,className:w,ref:d,style:E,to:o,viewTransition:l},typeof u=="function"?u(j):u)});Ov.displayName="NavLink";var Lv=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Ti,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...f},y)=>{let b=Mv(),_=Uv(l,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",m=typeof l=="string"&&Jf.test(l),g=p=>{if(u&&u(p),p.defaultPrevented)return;p.preventDefault();let S=p.nativeEvent.submitter,N=(S==null?void 0:S.getAttribute("formmethod"))||o;b(S||p.currentTarget,{fetcherKey:t,method:N,navigate:r,replace:s,state:i,relative:c,preventScrollReset:d,viewTransition:h})};return x.createElement("form",{ref:y,method:k,action:_,onSubmit:n?u:g,...f,"data-discover":!m&&e==="render"?"true":void 0})});Lv.displayName="Form";function Av(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xf(e){let t=x.useContext(An);return xe(t,Av(e)),t}function $v(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Yt(),u=Vr(),c=Ws(e,{relative:i});return x.useCallback(d=>{if(hv(d,t)){d.preventDefault();let h=r!==void 0?r:Is(u)===Is(c);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[u,l,c,r,n,t,e,s,i,o])}var zv=0,Dv=()=>`__${String(++zv)}__`;function Mv(){let{router:e}=Xf("useSubmit"),{basename:t}=x.useContext(Ot),r=rv();return x.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:u,body:c}=mv(n,t);if(s.navigate===!1){let d=s.fetcherKey||Dv();await e.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Uv(e,{relative:t}={}){let{basename:r}=x.useContext(Ot),n=x.useContext(Jt);xe(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ws(e||".",{relative:t})},o=Vr();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Wt([r,i.pathname])),Is(i)}function Fv(e,t={}){let r=x.useContext(Bf);xe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Xf("useViewTransitionState"),s=Ws(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Kt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Kt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ro(s.pathname,o)!=null||ro(s.pathname,i)!=null}[...Sv];const Bv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wr(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ju extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Wv extends ju{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Vv extends ju{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Hv extends ju{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fl||(fl={}));var qv=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Gv{constructor(t,{headers:r={},customFetch:n,region:s=fl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Bv(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return qv(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:u}=r;u||(u=this.region),u&&u!=="any"&&(l["x-region"]=u);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(l["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(l["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:c}).catch(b=>{throw new Wv(b)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Vv(d);if(!d.ok)throw new Hv(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield d.json():f==="application/octet-stream"?y=yield d.blob():f==="text/event-stream"?y=d:f==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Ke={},Eu={},jo={},Vs={},Eo={},No={},Kv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rn=Kv();const Qv=Rn.fetch,Zf=Rn.fetch.bind(Rn),ep=Rn.Headers,Jv=Rn.Request,Yv=Rn.Response,$n=Object.freeze(Object.defineProperty({__proto__:null,Headers:ep,Request:Jv,Response:Yv,default:Zf,fetch:Qv},Symbol.toStringTag,{value:"Module"})),Xv=Op($n);var Co={};Object.defineProperty(Co,"__esModule",{value:!0});let Zv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Co.default=Zv;var tp=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(No,"__esModule",{value:!0});const ey=tp(Xv),ty=tp(Co);let ry=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ey.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,u;let c=null,d=null,h=null,f=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const _=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const _=await i.text();try{c=JSON.parse(_),Array.isArray(c)&&i.status===404&&(d=[],c=null,f=200,y="OK")}catch{i.status===404&&_===""?(f=204,y="No Content"):c={message:_}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,f=200,y="OK"),c&&this.shouldThrowOnError)throw new ty.default(c)}return{error:c,data:d,count:h,status:f,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};No.default=ry;var ny=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eo,"__esModule",{value:!0});const sy=ny(No);let iy=class extends sy.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Eo.default=iy;var oy=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});const ay=oy(Eo);let ly=class extends ay.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Vs.default=ly;var uy=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jo,"__esModule",{value:!0});const Jn=uy(Vs);let cy=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Jn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Jn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Jn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Jn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};jo.default=cy;var To={},Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.version=void 0;Ro.version="0.0.0-automated";Object.defineProperty(To,"__esModule",{value:!0});To.DEFAULT_HEADERS=void 0;const dy=Ro;To.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${dy.version}`};var rp=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eu,"__esModule",{value:!0});const hy=rp(jo),fy=rp(Vs),py=To;let my=class np{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},py.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new hy.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new np(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let u;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",u=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new fy.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};Eu.default=my;var zn=rt&&rt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.PostgrestError=Ke.PostgrestBuilder=Ke.PostgrestTransformBuilder=Ke.PostgrestFilterBuilder=Ke.PostgrestQueryBuilder=Ke.PostgrestClient=void 0;const sp=zn(Eu);Ke.PostgrestClient=sp.default;const ip=zn(jo);Ke.PostgrestQueryBuilder=ip.default;const op=zn(Vs);Ke.PostgrestFilterBuilder=op.default;const ap=zn(Eo);Ke.PostgrestTransformBuilder=ap.default;const lp=zn(No);Ke.PostgrestBuilder=lp.default;const up=zn(Co);Ke.PostgrestError=up.default;var gy=Ke.default={PostgrestClient:sp.default,PostgrestQueryBuilder:ip.default,PostgrestFilterBuilder:op.default,PostgrestTransformBuilder:ap.default,PostgrestBuilder:lp.default,PostgrestError:up.default};const{PostgrestClient:vy,PostgrestQueryBuilder:r1,PostgrestFilterBuilder:n1,PostgrestTransformBuilder:s1,PostgrestBuilder:i1,PostgrestError:o1}=gy;let pl;typeof window>"u"?pl=require("ws"):pl=window.WebSocket;const yy=pl,xy="2.11.10",wy={"X-Client-Info":`realtime-js/${xy}`},by="1.0.0",cp=1e4,ky=1e3;var kn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kn||(kn={}));var Ue;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ue||(Ue={}));var xt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xt||(xt={}));var ml;(function(e){e.websocket="websocket"})(ml||(ml={}));var Tr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tr||(Tr={}));class _y{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const u=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class dp{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ce;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ce||(ce={}));const Zc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Sy(o,e,t,s),i),{})},Sy=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?hp(i,o):gl(o)},hp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Cy(t,r)}switch(e){case ce.bool:return jy(t);case ce.float4:case ce.float8:case ce.int2:case ce.int4:case ce.int8:case ce.numeric:case ce.oid:return Ey(t);case ce.json:case ce.jsonb:return Ny(t);case ce.timestamp:return Ty(t);case ce.abstime:case ce.date:case ce.daterange:case ce.int4range:case ce.int8range:case ce.money:case ce.reltime:case ce.text:case ce.time:case ce.timestamptz:case ce.timetz:case ce.tsrange:case ce.tstzrange:return gl(t);default:return gl(t)}},gl=e=>e,jy=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Ey=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ny=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Cy=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>hp(t,l))}return e},Ty=e=>typeof e=="string"?e.replace(" ","T"):e,fp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class da{constructor(t,r,n={},s=cp){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ed;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ed||(ed={}));class hs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hs.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=hs.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hs.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(k=>k.presence_ref),y=h.map(k=>k.presence_ref),b=d.filter(k=>y.indexOf(k.presence_ref)<0),_=h.filter(k=>f.indexOf(k.presence_ref)<0);b.length>0&&(l[c]=b),_.length>0&&(u[c]=_)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(u),d.length>0){const h=t[l].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);t[l].unshift(...f)}n(l,d,u)}),this.map(o,(l,u)=>{let c=t[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=c,s(l,c,u),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var td;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(td||(td={}));var rd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rd||(rd={}));var Dt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dt||(Dt={}));class Nu{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new da(this,xt.join,this.params,this.timeout),this.rejoinTimer=new dp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new hs(this),this.broadcastEndpointURL=fp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Dt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Dt.CLOSED));const u={},c={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(Dt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,y=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,b=[];for(let _=0;_<y;_++){const k=f[_],{filter:{event:m,schema:g,table:p,filter:S}}=k,N=d&&d[_];if(N&&N.event===m&&N.schema===g&&N.table===p&&N.filter===S)b.push(Object.assign(Object.assign({},k),{id:N.id}));else{this.unsubscribe(),this.state=Ue.errored,t==null||t(Dt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(Dt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Ue.errored,t==null||t(Dt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ue.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new da(this,xt.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new da(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=xt;if(n&&[l,u,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var b,_,k;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((k=(_=y.filter)===null||_===void 0?void 0:_.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var b,_,k,m,g,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const S=y.id,N=(b=y.filter)===null||b===void 0?void 0:b.event;return S&&((_=r.ids)===null||_===void 0?void 0:_.includes(S))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const S=(g=(m=y==null?void 0:y.filter)===null||m===void 0?void 0:m.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:_,table:k,commit_timestamp:m,type:g,errors:p}=b;f=Object.assign(Object.assign({},{schema:_,table:k,commit_timestamp:m,eventType:g,new:{},old:{},errors:p}),this._getPayloadRecords(b))}y.callback(f,n)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Nu.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xt.close,{},t)}_onError(t){this._on(xt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Zc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Zc(t.columns,t.old_record)),r}}const nd=()=>{},Ry=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Py{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=wy,this.params={},this.timeout=cp,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nd,this.ref=0,this.logger=nd,this.conn=null,this.sendBuffer=[],this.serializer=new _y,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Wr(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url).then(({default:u})=>u(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${ml.websocket}`,this.httpEndpoint=fp(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new dp(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=yy),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Iy(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:by}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kn.connecting:return Tr.Connecting;case kn.open:return Tr.Open;case kn.closing:return Tr.Closing;default:return Tr.Closed}}isConnected(){return this.connectionState()===Tr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Nu(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(xt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(ky,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(xt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ry],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Iy{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=kn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Cu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Te(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Oy extends Cu{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vl extends Cu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Ly=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const pp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wr(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Ay=()=>Ly(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wr(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url)).Response:Response}),yl=e=>{if(Array.isArray(e))return e.map(r=>yl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=yl(n)}),t};var Hr=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const ha=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$y=(e,t,r)=>Hr(void 0,void 0,void 0,function*(){const n=yield Ay();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new Oy(ha(s),e.status||500))}).catch(s=>{t(new vl(ha(s),s))}):t(new vl(ha(e),e))}),zy=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Hs(e,t,r,n,s,i){return Hr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,zy(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>$y(u,l,n))})})}function no(e,t,r,n){return Hr(this,void 0,void 0,function*(){return Hs(e,"GET",t,r,n)})}function nr(e,t,r,n,s){return Hr(this,void 0,void 0,function*(){return Hs(e,"POST",t,n,s,r)})}function Dy(e,t,r,n,s){return Hr(this,void 0,void 0,function*(){return Hs(e,"PUT",t,n,s,r)})}function My(e,t,r,n){return Hr(this,void 0,void 0,function*(){return Hs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function mp(e,t,r,n,s){return Hr(this,void 0,void 0,function*(){return Hs(e,"DELETE",t,n,s,r)})}var qe=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const Uy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fy{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=pp(s)}uploadOrUpdate(t,r,n,s){return qe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},sd),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}upload(t,r,n){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return qe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:sd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:u,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(u){if(Te(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield nr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Cu("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}})}update(t,r,n){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return qe(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}copy(t,r,n){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return qe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield nr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return qe(this,void 0,void 0,function*(){try{const s=yield nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}download(t,r){return qe(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield no(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Te(l))return{data:null,error:l};throw l}})}info(t){return qe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield no(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:yl(n),error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}})}exists(t){return qe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield My(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Te(n)&&n instanceof vl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return qe(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}list(t,r,n){return qe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Uy),r),{prefix:t||""});return{data:yield nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const By="2.7.1",Wy={"X-Client-Info":`storage-js/${By}`};var Qr=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class Vy{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Wy),r),this.fetch=pp(n)}listBuckets(){return Qr(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}getBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield no(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Qr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Qr(this,void 0,void 0,function*(){try{return{data:yield Dy(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield mp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}}class Hy extends Vy{constructor(t,r={},n){super(t,r,n)}from(t){return new Fy(this.url,this.headers,t,this.fetch)}}const qy="2.50.0";let ts="";typeof Deno<"u"?ts="deno":typeof document<"u"?ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ts="react-native":ts="node";const Gy={"X-Client-Info":`supabase-js-${ts}/${qy}`},Ky={headers:Gy},Qy={schema:"public"},Jy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yy={};var Xy=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};const Zy=e=>{let t;return e?t=e:typeof fetch>"u"?t=Zf:t=fetch,(...r)=>t(...r)},ex=()=>typeof Headers>"u"?ep:Headers,tx=(e,t,r)=>{const n=Zy(r),s=ex();return(i,o)=>Xy(void 0,void 0,void 0,function*(){var l;const u=(l=yield t())!==null&&l!==void 0?l:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var rx=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};function nx(e){return e.endsWith("/")?e:e+"/"}function sx(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:u,auth:c,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>rx(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const gp="2.70.0",en=30*1e3,xl=3,fa=xl*en,ix="http://localhost:9999",ox="supabase.auth.token",ax={"X-Client-Info":`gotrue-js/${gp}`},wl="X-Supabase-Api-Version",vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ux=6e5;class Tu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cx extends Tu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function dx(e){return q(e)&&e.name==="AuthApiError"}class yp extends Tu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _r extends Tu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class er extends _r{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hx(e){return q(e)&&e.name==="AuthSessionMissingError"}class ci extends _r{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class di extends _r{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hi extends _r{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fx(e){return q(e)&&e.name==="AuthImplicitGrantRedirectError"}class id extends _r{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bl extends _r{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function pa(e){return q(e)&&e.name==="AuthRetryableFetchError"}class od extends _r{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class fs extends _r{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ad=` 	
\r=`.split(""),px=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ad.length;t+=1)e[ad[t].charCodeAt(0)]=-2;for(let t=0;t<so.length;t+=1)e[so[t].charCodeAt(0)]=t;return e})();function ld(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(so[n]),t.queuedBits-=6}}function xp(e,t,r){const n=px[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ud(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{vx(o,n,r)};for(let o=0;o<e.length;o+=1)xp(e.charCodeAt(o),s,i);return t.join("")}function mx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gx(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}mx(n,t)}}function vx(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yx(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)xp(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xx(e){const t=[];return gx(e,r=>t.push(r)),new Uint8Array(t)}function wx(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ld(s,r,n)),ld(null,r,n),t.join("")}function bx(e){return Math.round(Date.now()/1e3)+e}function kx(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const gt=()=>typeof window<"u"&&typeof document<"u",jr={tested:!1,writable:!1},ps=()=>{if(!gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(jr.tested)return jr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),jr.tested=!0,jr.writable=!0}catch{jr.tested=!0,jr.writable=!1}return jr.writable};function _x(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const wp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wr(()=>Promise.resolve().then(()=>$n),void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Sx=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",bp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},fi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},pi=async(e,t)=>{await e.removeItem(t)};class Po{constructor(){this.promise=new Po.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Po.promiseConstructor=Promise;function ma(e){const t=e.split(".");if(t.length!==3)throw new fs("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!lx.test(t[n]))throw new fs("JWT not in base64url format");return{header:JSON.parse(ud(t[0])),payload:JSON.parse(ud(t[1])),signature:yx(t[2]),raw:{header:t[0],payload:t[1]}}}async function jx(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Ex(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Nx(e){return("0"+e.toString(16)).substr(-2)}function Cx(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Nx).join("")}async function Tx(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Rx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Tx(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jr(e,t,r=!1){const n=Cx();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await bp(e,`${t}-code-verifier`,s);const i=await Rx(n);return[i,n===i?"plain":"s256"]}const Px=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ix(e){const t=e.headers.get(wl);if(!t||!t.match(Px))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Ox(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Lx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ax=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(e){if(!Ax.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var $x=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Cr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zx=[502,503,504];async function cd(e){var t;if(!Sx(e))throw new bl(Cr(e),0);if(zx.includes(e.status))throw new bl(Cr(e),e.status);let r;try{r=await e.json()}catch(i){throw new yp(Cr(i),i)}let n;const s=Ix(e);if(s&&s.getTime()>=vp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new od(Cr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new od(Cr(r),e.status,r.weak_password.reasons);throw new cx(Cr(r),e.status||500,n)}const Dx=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Q(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[wl]||(i[wl]=vp["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await Mx(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function Mx(e,t,r,n,s,i){const o=Dx(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new bl(Cr(u),0)}if(l.ok||await cd(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await cd(u)}}function $t(e){var t;let r=null;Wx(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=bx(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function dd(e){const t=$t(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function or(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ux(e){return{data:e,error:null}}function Fx(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=$x(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Bx(e){return e}function Wx(e){return e.access_token&&e.refresh_token&&e.expires_in}const ga=["global","local","others"];var Vx=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Hx{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=wp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ga[0]){if(ga.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ga.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:or})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Vx(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Fx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:or})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bx});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(b.split(";")[1].split("=")[1]);c[`${k}Page`]=_}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(q(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Yr(t);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:or})}catch(r){if(q(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Yr(t);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:or})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Yr(t);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:or})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Yr(t.userId);try{const{data:r,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(q(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Yr(t.userId),Yr(t.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}}const qx={getItem:e=>ps()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ps()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ps()&&globalThis.localStorage.removeItem(e)}};function hd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Gx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Xr={debug:!!(globalThis&&ps()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Kx extends kp{}async function Qx(e,t,r){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Kx(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Gx();const Jx={url:ix,storageKey:ox,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ax,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fd(e,t,r){return await r()}class Os{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Os.nextInstanceID,Os.nextInstanceID+=1,this.instanceID>0&&gt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Jx),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Hx({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=wp(s.fetch),this.lock=s.lock||fd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:gt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Qx:this.lock=fd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ps()?this.storage=qx:(this.memoryStorage={},this.storage=hd(this.memoryStorage)):(this.memoryStorage={},this.storage=hd(this.memoryStorage)),gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${gp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=_x(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),gt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fx(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return q(r)?{error:r}:{error:new yp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:$t}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await Jr(this.storage,this.storageKey)),i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:b},xform:$t})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:$t})}else throw new di("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dd})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dd})}else throw new di("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ci}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,u,c,d,h,f,y;let b,_;if("message"in t)b=t.message,_=t.signature;else{const{chain:k,wallet:m,statement:g,options:p}=t;let S;if(gt())if(typeof m=="object")S=m;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=m}const N=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),g?{statement:g}:null));let j;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")j=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)j=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)b=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),_=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${N.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=C}}try{const{data:k,error:m}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:wx(_)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:$t});if(m)throw m;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new ci}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:m})}catch(k){if(q(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await fi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:$t});if(await pi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ci}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$t}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new ci}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:u}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Jr(this.storage,this.storageKey));const{error:h}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:u}=t,{data:c,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new di("You must provide either an email or phone number.")}catch(l){if(q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:$t});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Jr(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ux})}catch(i){if(q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new er;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new di("You must provide either an email or phone number and a type")}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<fa:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:or}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new er}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:or})})}catch(r){if(q(r))return hx(r)&&(await this._removeSession(),await pi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new er;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Jr(this.storage,this.storageKey));const{data:c,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:or});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(q(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new er;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=ma(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new er;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!gt())throw new hi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new id("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new id("No code detected.");const{data:g,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=t;if(!i||!l||!o||!c)throw new hi("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const y=f-d;y*1e3<=en&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const b=f-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,d);const{data:_,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(n){if(q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await fi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(dx(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await pi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=kx(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Jr(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(q(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,c,d;const{data:h,error:f}=i;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return gt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(q(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ex(async s=>(s>0&&await jx(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$t})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pa(i)&&Date.now()+o-n<en})}catch(n){if(this._debug(r,"error",n),q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),gt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await fi(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<fa;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fa}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),pa(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Po;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),q(i)){const o={session:null,error:i};return pa(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await bp(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await pi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),en);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/en);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${en}ms, refresh threshold is ${xl} ticks`),s<=xl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof kp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Jr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Q(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:u,error:c}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(q(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ma(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+ux>Date.now()))return n;const{data:s,error:i}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new fs("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new fs("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:y,error:b}=await this.getSession();if(b||!y.session)return{data:null,error:b};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=ma(n);if(Ox(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const c=Lx(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,xx(`${l}.${u}`)))throw new fs("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}}}Os.nextInstanceID=0;const Yx=Os;class Xx extends Yx{constructor(t){super(t)}}var Zx=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(e,t||[])).next())})};class ew{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=nx(t),u=new URL(l);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:Qy,realtime:Yy,auth:Object.assign(Object.assign({},Jy),{storageKey:c}),global:Ky},h=sx(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=tx(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new vy(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Hy(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Zx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xx({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Py(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tw=(e,t,r)=>new ew(e,t,r),pd={}.VITE_SUPABASE_URL,md={}.VITE_SUPABASE_ANON_KEY,B=pd&&md?tw(pd,md,{auth:{persistSession:!0,storage:localStorage,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},db:{schema:"public"}}):null,te=!!B,Rr=class Rr{constructor(){Un(this,"currentUser",null);Un(this,"currentSession",null);Un(this,"listeners",[]);this.initializeAuth()}static getInstance(){return Rr.instance||(Rr.instance=new Rr),Rr.instance}async initializeAuth(){if(!B)return;const{data:{session:t}}=await B.auth.getSession();this.currentSession=t,this.currentUser=(t==null?void 0:t.user)||null,B.auth.onAuthStateChange((r,n)=>{this.currentSession=n,this.currentUser=(n==null?void 0:n.user)||null,this.notifyListeners()}),this.notifyListeners()}getCurrentUser(){return this.currentUser}getCurrentSession(){return this.currentSession}isAuthenticated(){return!!this.currentUser}getUserId(){var t;return((t=this.currentUser)==null?void 0:t.id)||null}onAuthStateChange(t){return this.listeners.push(t),t(this.currentUser),()=>{this.listeners=this.listeners.filter(r=>r!==t)}}notifyListeners(){this.listeners.forEach(t=>t(this.currentUser))}async signIn(t,r){if(!B)throw new Error("Supabase non configurato");const{data:n,error:s}=await B.auth.signInWithPassword({email:t,password:r});if(s)throw s;return n}async signOut(){if(!B)throw new Error("Supabase non configurato");const{error:t}=await B.auth.signOut();if(t)throw t}async signUp(t,r){if(!B)throw new Error("Supabase non configurato");const{data:n,error:s}=await B.auth.signUp({email:t,password:r});if(s)throw s;return n}};Un(Rr,"instance");let io=Rr;const Y=io.getInstance(),rw=Object.freeze(Object.defineProperty({__proto__:null,AuthManager:io,authManager:Y,isSupabaseAvailable:te,supabase:B},Symbol.toStringTag,{value:"Module"}));var nw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),iw=(e,t)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},c)=>x.createElement("svg",{ref:c,...nw,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${sw(e)}`,...u},[...t.map(([d,h])=>x.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var X=iw;const rs=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ru=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ow=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),aw=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),pn=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ls=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),gd=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),lw=X("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),uw=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),cw=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),dw=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vd=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),hw=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Pi=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),xr=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),_p=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),fw=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Pu=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Io=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),pw=X("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),mw=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Sp=X("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Oo=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),kl=X("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Lo=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),jp=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_l=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gw=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),vw=X("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),va=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),mn=X("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Ep=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Np=X("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),yw=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),As=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Sr=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function xw({wine:e,open:t,onOpenChange:r,onUpdateInventory:n}){const[s,i]=x.useState(0);if(x.useEffect(()=>{e&&i(e.inventory)},[e]),!e)return null;const o=()=>{i(h=>h+1)},l=()=>{s>0&&i(h=>h-1)},u=h=>{const f=parseInt(h.target.value)||0;f>=0&&i(f)},c=()=>{n(e.id,s),r(!1)},d=()=>{i(e.inventory),r(!1)};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-neutral-900 rounded-lg p-6 w-full max-w-md border border-neutral-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-cream",children:"MODIFICA GIACENZA"}),a.jsx("button",{onClick:d,className:"text-neutral-400 hover:text-cream transition-colors",children:a.jsx(Sr,{size:24})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-cream font-medium mb-2",children:e.name}),a.jsxs("p",{className:"text-neutral-400 text-sm mb-4",children:["Giacenza attuale: ",e.inventory," | Scorta minima: ",e.minStock]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-cream text-sm font-medium mb-2",children:"NUOVA GIACENZA"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:l,disabled:s<=0,className:"w-10 h-10 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-md text-cream hover:bg-neutral-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(pw,{size:16})}),a.jsx("input",{type:"number",value:s,onChange:u,min:"0",className:"flex-1 px-3 py-2 bg-neutral-800 border border-neutral-600 rounded-md text-cream text-center text-lg font-medium focus:outline-none focus:border-amber-600"}),a.jsx("button",{onClick:o,className:"w-10 h-10 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-md text-cream hover:bg-neutral-700 transition-colors",children:a.jsx(Oo,{size:16})})]})]}),s<e.minStock&&a.jsx("div",{className:"bg-red-900/20 border border-red-700 rounded-md p-3",children:a.jsx("p",{className:"text-red-300 text-sm",children:"⚠️ Attenzione: giacenza sotto la scorta minima"})})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-neutral-800 border border-neutral-600 text-neutral-300 rounded-md hover:bg-neutral-700 transition-colors",children:"ANNULLA"}),a.jsx("button",{onClick:c,className:"flex-1 px-4 py-2 bg-amber-700 text-cream rounded-md hover:bg-amber-600 transition-colors font-medium",children:"SALVA"})]})]})}):null}function ww({wine:e,onUpdateInventory:t,onWineClick:r}){const[n,s]=x.useState(!1),i=e.inventory<=e.minStock,o=u=>{const d={rosso:"#8B0000",bianco:"#fff5d3",bollicine:"#fdc954",rosato:"#FFB6C1"}[u]||"#888888";return a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M7 2v6c0 3.5 2.24 6 5 6s5-2.5 5-6V2z",fill:d}),a.jsx("rect",{x:"11.2",y:"14",width:"1.6",height:"6",fill:d}),a.jsx("rect",{x:"8",y:"20",width:"8",height:"2",fill:d})]})},l=(u,c)=>{t&&t(u,c)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between p-3 px-2",children:[a.jsxs("div",{className:"flex items-center flex-1 mr-3",children:[a.jsx("div",{className:"mr-3 flex-shrink-0",children:o(e.type)}),a.jsx("h3",{className:"font-medium text-sm leading-tight text-cream cursor-pointer hover:underline",onClick:()=>r==null?void 0:r(e),children:e.name})]}),a.jsxs("div",{className:"flex items-center justify-end flex-shrink-0",style:{minWidth:"60px"},children:[a.jsx("span",{className:"text-cream font-medium text-sm cursor-pointer hover:bg-gray-700 px-2 py-1 rounded transition-colors mr-1",onClick:()=>s(!0),children:e.inventory}),i&&a.jsx(Ru,{className:"h-3 w-3 text-amber-400 flex-shrink-0"})]})]}),a.jsx(xw,{wine:e,open:n,onOpenChange:s,onUpdateInventory:l})]})}function bw({open:e,onOpenChange:t,searchTerm:r,onSearchChange:n}){return e?a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",children:a.jsx("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 w-full max-w-md mx-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-cream",children:"Ricerca Vini"}),a.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-cream",children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"relative",children:[a.jsx(jp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Cerca per nome o fornitore...",value:r,onChange:s=>n(s.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),a.jsx("div",{className:"mt-4 text-sm text-gray-400",children:"Cerca per nome del vino o fornitore"})]})})}):null}function kw({open:e,onOpenChange:t,filters:r,onFiltersChange:n}){if(!e)return null;const s=["","rosso","bianco","bollicine","rosato"],i=["","Cantina Valpolicella","Azienda Vinicola Piemontese","Tenuta Toscana","Cantina del Soave","Cantina Sarda","Villa Amagioia Varignana","Cantina Franciacorta","Cantina Valdobbiadene","Cantina Siciliana","Cantina Alto Adige","Cantina Abruzzese","Cantina Pugliese"];return a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",children:a.jsx("div",{className:"fixed top-16 left-1/2 transform -translate-x-1/2 w-full max-w-md mx-4",children:a.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-cream",children:"Filtri"}),a.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-cream",children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo di vino"}),a.jsxs("select",{value:r.wineType,onChange:o=>n({...r,wineType:o.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-cream focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tutti i tipi"}),s.slice(1).map(o=>a.jsx("option",{value:o,className:"capitalize",children:o},o))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fornitore"}),a.jsxs("select",{value:r.supplier,onChange:o=>n({...r,supplier:o.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-cream focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Tutti i fornitori"}),i.slice(1).map(o=>a.jsx("option",{value:o,children:o},o))]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showAlertsOnly",checked:r.showAlertsOnly,onChange:o=>n({...r,showAlertsOnly:o.target.checked}),className:"h-4 w-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-blue-500"}),a.jsx("label",{htmlFor:"showAlertsOnly",className:"ml-2 text-sm text-gray-300",children:"Solo vini con scorte basse"})]})]}),a.jsxs("div",{className:"mt-6 flex gap-2",children:[a.jsx("button",{onClick:()=>n({wineType:"",supplier:"",showAlertsOnly:!1}),className:"flex-1 px-4 py-2 bg-gray-700 text-cream rounded-lg hover:bg-gray-600 transition-colors",children:"Reset"}),a.jsx("button",{onClick:()=>t(!1),className:"flex-1 px-4 py-2 bg-blue-600 text-cream rounded-lg hover:bg-blue-700 transition-colors",children:"Applica"})]})]})})})}function _w({wine:e,open:t,onOpenChange:r,onUpdateWine:n,suppliers:s=[]}){const[i,o]=x.useState({price:"",minStock:"",supplier:"",description:"",type:""}),[l,u]=x.useState(!1);if(x.useEffect(()=>{e&&o({price:e.price||"",minStock:e.minStock.toString(),supplier:e.supplier||"",description:e.description||"",type:e.type||""})},[e]),!t||!e)return null;const c=async()=>{u(!0);try{n&&await n(e.id,{price:i.price,minStock:parseInt(i.minStock)||2,supplier:i.supplier,description:i.description,type:i.type}),r(!1)}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-cream",children:e.name}),a.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-cream",disabled:l,children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nome Vino *"}),a.jsx("input",{type:"text",value:e.name,disabled:!0,className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-gray-400 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Tipologia Vino"}),a.jsxs("select",{value:i.type,onChange:d=>o(h=>({...h,type:d.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"rosso",children:"Rosso"}),a.jsx("option",{value:"bianco",children:"Bianco"}),a.jsx("option",{value:"bollicine",children:"Bollicine"}),a.jsx("option",{value:"rosato",children:"Rosato"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Costo Vino (€)"}),a.jsx("input",{type:"text",value:i.price,onChange:d=>o(h=>({...h,price:d.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",placeholder:"Es: 15.50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Soglia Minima"}),a.jsx("input",{type:"number",value:i.minStock,onChange:d=>o(h=>({...h,minStock:d.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",placeholder:"2",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Fornitore"}),a.jsxs("select",{value:i.supplier,onChange:d=>o(h=>({...h,supplier:d.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Seleziona fornitore"}),s.map((d,h)=>a.jsx("option",{value:d,children:d},`supplier-${d}-${h}`))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Descrizione Completa"}),a.jsx("textarea",{value:i.description,onChange:d=>o(h=>({...h,description:d.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none resize-none",rows:2,placeholder:"Descrizione dettagliata del vino..."})]})]}),a.jsxs("div",{className:"flex gap-2 p-4 border-t border-gray-700",children:[a.jsx("button",{onClick:()=>r(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-cream rounded px-4 py-2 transition-colors",disabled:l,children:"Annulla"}),a.jsxs("button",{onClick:c,disabled:l,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-cream rounded px-4 py-2 flex items-center justify-center gap-2 transition-colors",children:[a.jsx(Lo,{className:"h-4 w-4"}),l?"Salvando...":"Salva"]})]})]})})}const mi=[{id:1,name:"Amarone della Valpolicella DOCG 2018",type:"rosso",supplier:"Cantina Valpolicella",inventory:3,minStock:2,price:"65.00",vintage:"2018",region:"Veneto",description:null},{id:2,name:"Soave DOC Classico 2022",type:"bianco",supplier:"Cantina del Soave",inventory:5,minStock:2,price:"18.00",vintage:"2022",region:"Veneto",description:null},{id:3,name:"Franciacorta DOCG Brut 2020",type:"bollicine",supplier:"Cantina Franciacorte",inventory:1,minStock:5,price:"35.00",vintage:"2020",region:"Lombardia",description:null},{id:4,name:"Chianti Classico DOCG 2021",type:"rosso",supplier:"Tenuta Toscana",inventory:4,minStock:2,price:"24.00",vintage:"2021",region:"Toscana",description:null},{id:5,name:"Prosecco di Valdobbiadene DOCG",type:"bollicine",supplier:"Villa Prosecco",inventory:6,minStock:2,price:"16.00",vintage:"2023",region:"Veneto",description:null},{id:6,name:"Pinot Grigio Alto Adige DOC 2023",type:"bianco",supplier:"Cantina Alto Adige",inventory:3,minStock:8,price:"22.00",vintage:"2023",region:"Alto Adige",description:null},{id:7,name:"Vermentino di Sardegna DOC 2023",type:"bianco",supplier:"Cantina Sarda",inventory:3,minStock:2,price:"19.00",vintage:"2023",region:"Sardegna",description:null}];function Iu(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[s,i]=x.useState(!0),[o,l]=x.useState(null),[u,c]=x.useState(!1);x.useEffect(()=>Y.onAuthStateChange(m=>{c(!!m),m?d():(t([]),n([]),i(!1))}),[]);const d=async()=>{try{if(i(!0),l(null),!te){t(mi);const C=Array.from(new Set(mi.map(j=>j.supplier)));n(C),i(!1);return}if(!Y.isAuthenticated()){l("Utente non autenticato"),i(!1);return}const k=Y.getUserId();if(!k)throw new Error("ID utente non disponibile");const{data:m,error:g}=await B.from("giacenze").select("*").eq("user_id",k).order("name");if(g){if(console.error("Errore nel caricamento vini da Supabase:",g),g.code==="42P01"){t(mi);const C=Array.from(new Set(mi.map(j=>j.supplier)));n(C),i(!1);return}throw g}const p=(m||[]).map(C=>({id:C.id,name:C.name,type:C.type,supplier:C.supplier,inventory:C.inventory,minStock:C.min_stock,price:C.price.toString(),vintage:C.vintage,region:C.region,description:C.description}));t(p);const{data:S,error:N}=await B.from("fornitori").select("nome").eq("user_id",k);if(N){console.error("Errore nel caricamento fornitori:",N);const C=Array.from(new Set(p.map(j=>j.supplier)));n(C)}else{const C=(S||[]).map(j=>j.nome);n(C)}}catch(k){console.error("Errore nel caricamento dei vini:",k),l(k instanceof Error?k.message:"Errore nel caricamento dei dati")}finally{i(!1)}},h=async(k,m)=>{try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const g=Y.getUserId();if(!g)throw new Error("ID utente non disponibile");const{error:p}=await B.from("giacenze").update({inventory:m,updated_at:new Date().toISOString()}).eq("id",k).eq("user_id",g);if(p)throw console.error("Errore nell'aggiornamento giacenza su Supabase:",p),p;return y(k,{inventory:m}),!0}catch(g){return console.error("Errore nell'aggiornamento della giacenza:",g),!1}},f=async(k,m)=>{try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const g=Y.getUserId();if(!g)throw new Error("ID utente non disponibile");const p={updated_at:new Date().toISOString()};m.name!==void 0&&(p.name=m.name),m.type!==void 0&&(p.type=m.type),m.supplier!==void 0&&(p.supplier=m.supplier),m.inventory!==void 0&&(p.inventory=m.inventory),m.minStock!==void 0&&(p.min_stock=m.minStock),m.price!==void 0&&(p.price=parseFloat(m.price)),m.vintage!==void 0&&(p.vintage=m.vintage),m.region!==void 0&&(p.region=m.region),m.description!==void 0&&(p.description=m.description);const{error:S}=await B.from("giacenze").update(p).eq("id",k).eq("user_id",g);if(S)throw console.error("Errore nell'aggiornamento vino su Supabase:",S),S;return y(k,m),!0}catch(g){return console.error("Errore nell'aggiornamento del vino:",g),!1}},y=(k,m)=>{t(g=>g.map(p=>p.id===k?{...p,...m}:p))};return{wines:e,suppliers:r,loading:s,error:o,isAuthenticated:u,refreshWines:d,updateWineInventory:h,updateWine:f,addWine:async k=>{try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const m=Y.getUserId();if(!m)throw new Error("ID utente non disponibile");const{data:g,error:p}=await B.from("giacenze").insert({name:k.name,type:k.type,supplier:k.supplier,inventory:k.inventory,min_stock:k.minStock,price:parseFloat(k.price),vintage:k.vintage,region:k.region,description:k.description,user_id:m,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(p)throw console.error("Errore nell'aggiunta vino su Supabase:",p),p;const S={id:g.id,name:g.name,type:g.type,supplier:g.supplier,inventory:g.inventory,minStock:g.min_stock,price:g.price.toString(),vintage:g.vintage,region:g.region,description:g.description};return t(N=>[...N,S]),S}catch(m){throw console.error("Errore nell'aggiunta del vino:",m),m}},deleteWine:async k=>{try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const m=Y.getUserId();if(!m)throw new Error("ID utente non disponibile");const{error:g}=await B.from("giacenze").delete().eq("id",k).eq("user_id",m);if(g)throw console.error("Errore nell'eliminazione vino da Supabase:",g),g;return t(p=>p.filter(S=>S.id!==k)),!0}catch(m){return console.error("Errore nell'eliminazione del vino:",m),!1}}}}function Sw(){const e=Yt(),{wines:t,suppliers:r,loading:n,error:s,isAuthenticated:i,refreshWines:o,updateWineInventory:l,updateWine:u}=Iu(),[c,d]=x.useState(""),[h,f]=x.useState(!1),[y,b]=x.useState(!1),[_,k]=x.useState(!1),[m,g]=x.useState(null),[p,S]=x.useState({wineType:"",supplier:"",showAlertsOnly:!1}),[N,C]=x.useState(!1),[j,v]=x.useState({name:"",type:"rosso",price:"",minStock:"2",supplier:"",description:""}),[w,E]=x.useState(!1),P=async(F,M)=>{await l(F,M)||console.error("Errore nell'aggiornamento della giacenza")},R=async(F,M)=>{await u(F,M)||console.error("Errore nell'aggiornamento del vino")},D=F=>{g(F),k(!0)},W=async()=>{if(j.name.trim()){E(!0);try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const F=Y.getUserId();if(!F)throw new Error("ID utente non disponibile");const{data:M,error:T}=await B.from("giacenze").insert({name:j.name,type:j.type,supplier:j.supplier||"Da definire",inventory:0,min_stock:parseInt(j.minStock)||2,price:j.price||"0",vintage:null,region:null,description:j.description||null,user_id:F,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(T)throw console.error("Errore nell'aggiunta vino su Supabase:",T),T;v({name:"",type:"rosso",price:"",minStock:"2",supplier:"",description:""}),C(!1),await o(),console.log("Vino aggiunto con successo:",M)}catch(F){console.error("Errore nell'aggiunta del vino:",F)}finally{E(!1)}}},ie=t.filter(F=>{const M=F.name.toLowerCase().includes(c.toLowerCase())||F.supplier.toLowerCase().includes(c.toLowerCase()),T=!p.wineType||F.type===p.wineType,I=!p.supplier||F.supplier===p.supplier,$=!p.showAlertsOnly||F.inventory<=F.minStock;return M&&T&&I&&$});return i?n?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-amber-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-cream",children:"Caricamento vini..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-400 mb-4",children:s}),a.jsx("button",{onClick:o,className:"bg-amber-600 hover:bg-amber-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Riprova"})]})}):a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between h-20 sm:h-24",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx("button",{onClick:()=>f(!0),className:"p-2 sm:p-2.5 text-cream hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Cerca",children:a.jsx(jp,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>b(!0),className:"p-2 sm:p-2.5 text-cream hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Filtri",children:a.jsx(hw,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>e("/settings"),className:"p-2 sm:p-2.5 text-cream hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Impostazioni",children:a.jsx(_l,{className:"h-5 w-5"})})]})]})})})}),a.jsx("main",{className:"flex-1 flex flex-col max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-8 w-full overflow-y-auto",children:ie.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-400 text-lg",children:t.length===0?"Nessun vino nel tuo inventario":"Nessun vino trovato con i filtri selezionati"})}):a.jsx("div",{className:"space-y-3",children:ie.map(F=>a.jsx(ww,{wine:F,onUpdateInventory:P,onWineClick:D},F.id))})}),a.jsx(bw,{open:h,onOpenChange:f,searchTerm:c,onSearchChange:d}),a.jsx(kw,{open:y,onOpenChange:b,filters:p,onFiltersChange:S}),a.jsx(_w,{wine:m,open:_,onOpenChange:k,onUpdateWine:R,suppliers:r}),!_&&a.jsx("button",{onClick:()=>C(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-black/30 backdrop-blur-sm hover:bg-black/40 text-amber-500 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center z-50 border border-red-900/30",title:"Aggiungi nuovo vino",children:a.jsx(Oo,{className:"h-6 w-6"})}),N&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-cream",children:"AGGIUNGI NUOVO VINO"}),a.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-cream",disabled:w,children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Nome Vino *"}),a.jsx("input",{type:"text",value:j.name,onChange:F=>v(M=>({...M,name:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",placeholder:"Inserisci il nome del vino"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Colore Vino"}),a.jsxs("select",{value:j.type,onChange:F=>v(M=>({...M,type:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"rosso",children:"Rosso"}),a.jsx("option",{value:"bianco",children:"Bianco"}),a.jsx("option",{value:"bollicine",children:"Bollicine"}),a.jsx("option",{value:"rosato",children:"Rosato"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Costo Vino (€)"}),a.jsx("input",{type:"text",value:j.price||"",onChange:F=>v(M=>({...M,price:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",placeholder:"Es: 15.50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Soglia Minima"}),a.jsx("input",{type:"number",value:j.minStock||"2",onChange:F=>v(M=>({...M,minStock:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",placeholder:"2",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Fornitore"}),a.jsxs("select",{value:j.supplier||"",onChange:F=>v(M=>({...M,supplier:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Seleziona fornitore"}),r.map((F,M)=>a.jsx("option",{value:F,children:F},`${F}-${M}`))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Descrizione Completa"}),a.jsx("textarea",{value:j.description||"",onChange:F=>v(M=>({...M,description:F.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:border-blue-500 focus:outline-none resize-none",rows:2,placeholder:"Descrizione dettagliata del vino..."})]})]}),a.jsxs("div",{className:"flex gap-2 p-4 border-t border-gray-700",children:[a.jsx("button",{onClick:()=>C(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-cream rounded px-4 py-2 transition-colors",disabled:w,children:"Annulla"}),a.jsxs("button",{onClick:W,disabled:!j.name.trim()||w,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-cream rounded px-4 py-2 flex items-center justify-center gap-2 transition-colors",children:[a.jsx(Lo,{className:"h-4 w-4"}),w?"Aggiungendo...":"Salva"]})]})]})})]}):a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-cream",children:"Effettua l'accesso per vedere i tuoi vini"})})})}function Cp({open:e,onOpenChange:t,user:r}){var d,h;const[n,s]=x.useState(""),[i,o]=x.useState("utente"),[l,u]=x.useState(!1);x.useEffect(()=>{if(r&&e){const f=r.user_metadata||{};s(f.full_name||f.name||""),o(f.role||"utente")}},[r,e]);const c=async()=>{if(!n.trim()){alert("⚠️ Inserisci un nome valido");return}if(!te||!B){alert("Modifica profilo non disponibile - servizio di autenticazione non configurato");return}u(!0);try{const{error:f}=await B.auth.updateUser({data:{full_name:n,role:i}});f?alert("❌ Errore durante l'aggiornamento del profilo: "+f.message):(alert(`✅ Profilo aggiornato con successo!

Nome: ${n}
Ruolo: ${i}`),t(!1),setTimeout(()=>window.location.reload(),1e3))}catch{alert("❌ Errore durante l'aggiornamento del profilo")}finally{u(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 rounded-xl border border-gray-700 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600/20 rounded-lg flex items-center justify-center",children:a.jsx(As,{className:"w-5 h-5 text-blue-400"})}),a.jsx("h2",{className:"text-xl font-semibold text-cream",children:"Gestione Profilo Utente"})]}),a.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-cream transition-colors",children:a.jsx(Sr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nome completo"}),a.jsx("input",{type:"text",value:n,onChange:f=>s(f.target.value),placeholder:"Inserisci il tuo nome completo",className:"w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Ruolo utente"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"role",value:"utente",checked:i==="utente",onChange:f=>o(f.target.value),className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(As,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-cream",children:"Utente"})]})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"role",value:"admin",checked:i==="admin",onChange:f=>o(f.target.value),className:"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 focus:ring-blue-500"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gw,{className:"w-4 h-4 text-yellow-400"}),a.jsx("span",{className:"text-cream",children:"Admin"})]})]})]})]}),r&&a.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Informazioni attuali"}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-400",children:[a.jsxs("div",{children:["Email: ",a.jsx("span",{className:"text-blue-400",children:r.email})]}),a.jsxs("div",{children:["Nome attuale: ",a.jsx("span",{className:"text-cream",children:((d=r.user_metadata)==null?void 0:d.full_name)||"Non impostato"})]}),a.jsxs("div",{children:["Ruolo attuale: ",a.jsx("span",{className:"text-yellow-400",children:((h=r.user_metadata)==null?void 0:h.role)||"utente"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-700",children:[a.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 text-gray-400 hover:text-cream transition-colors",children:"Annulla"}),a.jsx("button",{onClick:c,disabled:l,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-cream rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Salvataggio...":"Salva Modifiche"})]})]})}):null}function jw({onBack:e}){const[t,r]=x.useState(null),[n,s]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!te||!B)return;const{data:{user:f}}=await B.auth.getUser();f&&r(f)})()},[]);const i=async()=>{try{if(!te||!B){localStorage.clear(),sessionStorage.clear(),window.location.href="/";return}const{error:h}=await B.auth.signOut();h&&(console.error("Errore durante il logout:",h),localStorage.clear(),sessionStorage.clear()),window.location.href="/"}catch(h){console.error("Errore durante il logout:",h),localStorage.clear(),sessionStorage.clear(),window.location.href="/"}},o=h=>{h==="logout"?i():h==="email"?l():h==="password"?u():h==="profile"&&c()},l=()=>{const h=prompt("Inserisci il nuovo indirizzo email:",(t==null?void 0:t.email)||"");if(h&&h!==(t==null?void 0:t.email)){if(!te||!B){alert("Modifica email non disponibile - servizio di autenticazione non configurato");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)){alert("⚠️ Inserisci un indirizzo email valido");return}B.auth.updateUser({email:h}).then(({error:y})=>{alert(y?"❌ Errore durante la modifica dell'email: "+y.message:`✅ Richiesta di modifica email inviata!

Controlla la tua casella email attuale per confermare il cambiamento.`)})}},u=()=>{const h=prompt("Inserisci la nuova password (minimo 6 caratteri):");if(h){if(!te||!B){alert("Modifica password non disponibile - servizio di autenticazione non configurato");return}if(h.length<6){alert("⚠️ La password deve essere di almeno 6 caratteri");return}B.auth.updateUser({password:h}).then(({error:f})=>{alert(f?"❌ Errore durante la modifica della password: "+f.message:"✅ Password aggiornata con successo!")})}},c=()=>{s(!0)},d=[{id:"email",title:"EMAIL",icon:Io},{id:"password",title:"PASSWORD",icon:_p},{id:"profile",title:"PROFILO",icon:Np},{id:"logout",title:"ESCI",icon:Pu}];return a.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Torna alle impostazioni",children:a.jsx(ow,{className:"h-5 w-5"})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>window.location.href="/",className:"p-2 text-white hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",style:{filter:"brightness(1.2)",color:"#ffffff"},children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"space-y-4",children:d.map(h=>{const f=h.icon;return a.jsx("div",{onClick:()=>o(h.id),className:"bg-gray-800/50 border border-gray-700 p-4 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(f,{className:"h-5 w-5 text-gray-300"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-bold text-cream",children:h.title}),h.id==="email"&&(t==null?void 0:t.email)&&a.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:["Attuale: ",t.email]})]})]})},h.id)})}),a.jsx(Cp,{open:n,onOpenChange:s,user:t})]})]})}function Ou({isOpen:e,onClose:t,onSupplierAdded:r}){const[n,s]=x.useState(""),[i,o]=x.useState(""),[l,u]=x.useState(""),[c,d]=x.useState(!1),[h,f]=x.useState(""),y=async k=>{if(k.preventDefault(),!n.trim()||!i.trim()||!l.trim()){f("Tutti i campi sono obbligatori");return}if(!te||!Y.isAuthenticated()){f("Errore di autenticazione");return}const m=Y.getUserId();if(!m){f("ID utente non disponibile");return}d(!0),f("");try{const{data:g,error:p}=await B.from("fornitori").insert({user_id:m,nome:n.trim().toUpperCase(),email:i.trim(),telefono:l.trim()}).select().single();if(p){console.error("Errore Supabase:",p),p.code==="23505"?f("Un fornitore con questi dati esiste già"):p.code==="42501"?f("Permessi insufficienti. Verifica la configurazione RLS"):f(`Errore database: ${p.message}`);return}console.log("Fornitore aggiunto con successo:",g),s(""),o(""),u(""),r()}catch(g){console.error("Errore nell'aggiunta del fornitore:",g),f(`Errore inaspettato: ${g.message||"Operazione fallita"}`)}finally{d(!1)}},b=()=>{c||(s(""),o(""),u(""),f(""),t())},_=k=>{s(k.target.value.toUpperCase())};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-gray-800/90 border border-gray-700 rounded-xl w-full max-w-md mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[a.jsx("h2",{className:"text-lg font-bold text-cream",children:"NUOVO FORNITORE"}),a.jsx("button",{onClick:b,disabled:c,className:"p-2 text-gray-400 hover:text-cream hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[h&&a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 p-3 rounded-lg text-sm",children:h}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nome Fornitore *"}),a.jsxs("div",{className:"relative",children:[a.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"text",value:n,onChange:_,placeholder:"NOME FORNITORE",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent uppercase",disabled:c,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Fornitore *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"email",value:i,onChange:k=>o(k.target.value),placeholder:"es: info@cantinagaja.it",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",disabled:c,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Numero WhatsApp *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"tel",value:l,onChange:k=>u(k.target.value),placeholder:"es: 3331234567",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",disabled:c,required:!0})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:b,disabled:c,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:"Annulla"}),a.jsxs("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-3 bg-amber-500 hover:bg-amber-600 text-black font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[c?a.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}):a.jsx(Lo,{className:"h-4 w-4"}),c?"Salvando...":"Salva"]})]})]})]})}):null}function Tp({isOpen:e,onClose:t,onSupplierUpdated:r,supplier:n}){const[s,i]=x.useState(""),[o,l]=x.useState(""),[u,c]=x.useState(""),[d,h]=x.useState(!1),[f,y]=x.useState("");x.useEffect(()=>{n&&(i(n.nome),l(n.email),c(n.telefono))},[n]);const b=async m=>{if(m.preventDefault(),!s.trim()||!o.trim()||!u.trim()){y("Tutti i campi sono obbligatori");return}if(!te||!Y.isAuthenticated()||!n){y("Errore di autenticazione");return}h(!0),y("");try{const{data:g,error:p}=await B.from("fornitori").update({nome:s.trim(),email:o.trim(),telefono:u.trim()}).eq("id",n.id).select().single();if(p){console.error("Errore Supabase:",p),p.code==="23505"?y("Un fornitore con questi dati esiste già"):p.code==="42501"?y("Permessi insufficienti. Verifica la configurazione RLS"):y(`Errore database: ${p.message}`);return}console.log("Fornitore modificato con successo:",g),r()}catch(g){console.error("Errore nella modifica del fornitore:",g),y(`Errore inaspettato: ${g.message||"Operazione fallita"}`)}finally{h(!1)}},_=()=>{d||(y(""),t())},k=m=>{i(m.target.value.toUpperCase())};return!e||!n?null:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-gray-800/90 border border-gray-700 rounded-xl w-full max-w-md mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[a.jsx("h2",{className:"text-lg font-bold text-cream",children:"MODIFICA FORNITORE"}),a.jsx("button",{onClick:_,disabled:d,className:"p-2 text-gray-400 hover:text-cream hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(Sr,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[f&&a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 p-3 rounded-lg text-sm",children:f}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nome Fornitore *"}),a.jsxs("div",{className:"relative",children:[a.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"text",value:s,onChange:k,placeholder:"NOME FORNITORE",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent uppercase",disabled:d,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Fornitore *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"email",value:o,onChange:m=>l(m.target.value),placeholder:"es: info@cantinagaja.it",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",disabled:d,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Numero WhatsApp *"}),a.jsxs("div",{className:"relative",children:[a.jsx(Sp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"}),a.jsx("input",{type:"tel",value:u,onChange:m=>c(m.target.value),placeholder:"es: 3331234567",className:"w-full pl-10 pr-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-cream placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",disabled:d,required:!0})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:_,disabled:d,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-500 text-white font-medium rounded-lg transition-colors disabled:opacity-50",children:"Annulla"}),a.jsxs("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-3 bg-amber-500 hover:bg-amber-600 text-black font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[d?a.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}):a.jsx(Lo,{className:"h-4 w-4"}),d?"Salvando...":"Salva Modifiche"]})]})]})]})})}const Ao=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!0),[s,i]=x.useState(null),o=async()=>{var c;if(!te||!Y.isAuthenticated()){t([]),n(!1);return}const u=Y.getUserId();if(!u){i("ID utente non disponibile"),n(!1);return}try{i(null);const{data:d,error:h}=await B.from("fornitori").select("*").eq("user_id",u).order("created_at",{ascending:!1});if(h)throw h;t(d||[])}catch(d){console.error("Errore nel caricamento fornitori:",d),d.code==="42501"?i("Accesso negato. Verifica i permessi RLS"):(c=d.message)!=null&&c.includes("JWT")?i("Sessione scaduta. Rieffettua il login"):i(d.message||"Errore nel caricamento fornitori"),t([])}finally{n(!1)}};return x.useEffect(()=>{o()},[]),{suppliers:e,isLoading:r,error:s,refreshSuppliers:()=>{n(!0),o()}}};function Ew(){const e=Yt(),[t,r]=x.useState(null),[n,s]=x.useState(!1),[i,o]=x.useState(!1),[l,u]=x.useState(null),{suppliers:c,isLoading:d,error:h,refreshSuppliers:f}=Ao(),y=[{id:"account",title:"ACCOUNT",icon:As},{id:"general",title:"PREFERENZE",icon:_l},{id:"database",title:"ARCHIVIO VINI",icon:gd},{id:"suppliers",title:"FORNITORI",icon:mn}],b=_=>{u(_),o(!0)};return t==="account"?a.jsx(jw,{onBack:()=>r(null)}):t==="database"?a.jsxs("div",{className:"min-h-screen overflow-y-auto flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>r(null),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("div",{className:"w-10"})]})})}),a.jsx("main",{className:"flex-1 max-w-4xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 md:py-8 w-full",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(gd,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-cream mb-2",children:"ARCHIVIO VINI"}),a.jsx("p",{className:"text-gray-400",children:"Sezione in costruzione"})]})})]}):t==="suppliers"?a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>r(null),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Torna alla home",children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full overflow-hidden",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 p-4 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",onClick:()=>s(!0),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(mn,{className:"h-4 w-4 text-gray-300"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"text-sm font-bold text-cream",children:"NUOVO FORNITORE"})}),a.jsx(Ls,{className:"h-4 w-4 text-gray-500 group-hover:text-gray-400 transition-colors"})]})}),a.jsxs("div",{className:"mt-6 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Fornitori Attivi"}),d?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-gray-600 border-t-amber-500 rounded-full animate-spin"}),a.jsx("span",{className:"ml-2 text-gray-500",children:"Caricamento fornitori..."})]}):h?a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 p-3 rounded-lg text-sm",children:h}):c.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(mn,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"Nessun fornitore attivo"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Aggiungi il tuo primo fornitore!"})]}):c.map(_=>a.jsx("div",{className:"bg-gray-800/30 border border-gray-700/50 p-3 rounded-lg text-left transition-all duration-200 group hover:bg-gray-700/30 hover:border-gray-600/50 cursor-pointer",onClick:()=>b(_),title:"Clicca per modificare le informazioni del fornitore",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-gray-700/30 rounded-md",children:a.jsx(mn,{className:"h-3.5 w-3.5 text-gray-400"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h5",{className:"text-sm font-medium text-cream uppercase",children:_.nome.toUpperCase()})})]})},_.id))]})]}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})})]}),a.jsx(Ou,{isOpen:n,onClose:()=>s(!1),onSupplierAdded:()=>{f(),s(!1)}}),a.jsx(Tp,{isOpen:i,onClose:()=>{o(!1),u(null)},onSupplierUpdated:()=>{f(),o(!1),u(null)},supplier:l})]}):t==="general"?a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between h-20",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("button",{onClick:()=>r(null),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("div",{className:"w-10"})]})})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full overflow-hidden",children:[a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_l,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-cream mb-2",children:"PREFERENZE"}),a.jsx("p",{className:"text-gray-400",children:"Sezione in costruzione"})]}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-auto text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})})]})]}):a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center justify-between h-20",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alla home",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",style:{filter:"brightness(1.2)",color:"#ffffff"},children:a.jsx(xr,{className:"h-6 w-6"})})]})})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:y.map(_=>{const k=_.icon;return a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 p-3 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",onClick:()=>{_.id==="account"?e("/settings/account"):_.id==="suppliers"?e("/settings/fornitori"):_.id==="database"?e("/settings/archivi"):_.id==="general"?e("/settings/preferenze"):r(_.id)},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(k,{className:"h-4 w-4 text-gray-300"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"text-sm font-bold text-cream",children:_.title})}),a.jsx(Ls,{className:"h-4 w-4 text-gray-500 group-hover:text-gray-400 transition-colors"})]})},_.id)})}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-auto text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})})]})]})}var Rp={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((r,n)=>{e.exports=n()})(rt,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,l={},u=0,c={};function d(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(w){var E=N(w);E.chunkSize=parseInt(E.chunkSize),w.step||w.chunk||(E.chunkSize=null),this._handle=new _(E),(this._handle.streamer=this)._config=E}).call(this,v),this.parseChunk=function(w,E){var P=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<P){let D=this._config.newline;D||(R=this._config.quoteChar||'"',D=this._handle.guessLineEndings(w,R)),w=[...w.split(D).slice(P)].join(D)}this.isFirstChunk&&j(this._config.beforeFirstChunk)&&(R=this._config.beforeFirstChunk(w))!==void 0&&(w=R),this.isFirstChunk=!1,this._halted=!1;var P=this._partialLine+w,R=(this._partialLine="",this._handle.parse(P,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(w=R.meta.cursor,P=(this._finished||(this._partialLine=P.substring(w-this._baseIndex),this._baseIndex=w),R&&R.data&&(this._rowCount+=R.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)n.postMessage({results:R,workerId:c.WORKER_ID,finished:P});else if(j(this._config.chunk)&&!E){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=R=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!P||!j(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(w){j(this._config.error)?this._config.error(w):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:w,finished:!1})}}function h(v){var w;(v=v||{}).chunkSize||(v.chunkSize=c.RemoteChunkSize),d.call(this,v),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(w=new XMLHttpRequest,this._config.withCredentials&&(w.withCredentials=this._config.withCredentials),i||(w.onload=C(this._chunkLoaded,this),w.onerror=C(this._chunkError,this)),w.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var E,P=this._config.downloadRequestHeaders;for(E in P)w.setRequestHeader(E,P[E])}var R;this._config.chunkSize&&(R=this._start+this._config.chunkSize-1,w.setRequestHeader("Range","bytes="+this._start+"-"+R));try{w.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&w.status===0&&this._chunkError()}},this._chunkLoaded=function(){w.readyState===4&&(w.status<200||400<=w.status?this._chunkError():(this._start+=this._config.chunkSize||w.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(w),this.parseChunk(w.responseText)))},this._chunkError=function(E){E=w.statusText||E,this._sendError(new Error(E))}}function f(v){(v=v||{}).chunkSize||(v.chunkSize=c.LocalChunkSize),d.call(this,v);var w,E,P=typeof FileReader<"u";this.stream=function(R){this._input=R,E=R.slice||R.webkitSlice||R.mozSlice,P?((w=new FileReader).onload=C(this._chunkLoaded,this),w.onerror=C(this._chunkError,this)):w=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),R=E.call(R,this._start,D)),w.readAsText(R,this._config.encoding));P||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(w.error)}}function y(v){var w;d.call(this,v=v||{}),this.stream=function(E){return w=E,this._nextChunk()},this._nextChunk=function(){var E,P;if(!this._finished)return E=this._config.chunkSize,w=E?(P=w.substring(0,E),w.substring(E)):(P=w,""),this._finished=!w,this.parseChunk(P)}}function b(v){d.call(this,v=v||{});var w=[],E=!0,P=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){P&&w.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),w.length?this.parseChunk(w.shift()):E=!0},this._streamData=C(function(R){try{w.push(typeof R=="string"?R:R.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(w.shift()))}catch(D){this._streamError(D)}},this),this._streamError=C(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=C(function(){this._streamCleanUp(),P=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function _(v){var w,E,P,R,D=Math.pow(2,53),W=-D,ie=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,F=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,T=0,I=0,$=!1,O=!1,z=[],A={data:[],errors:[],meta:{}};function Z(V){return v.skipEmptyLines==="greedy"?V.join("").trim()==="":V.length===1&&V[0].length===0}function re(){if(A&&P&&(me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),P=!1),v.skipEmptyLines&&(A.data=A.data.filter(function(H){return!Z(H)})),oe()){let H=function(be,je){j(v.transformHeader)&&(be=v.transformHeader(be,je)),z.push(be)};if(A)if(Array.isArray(A.data[0])){for(var V=0;oe()&&V<A.data.length;V++)A.data[V].forEach(H);A.data.splice(0,1)}else A.data.forEach(H)}function K(H,be){for(var je=v.header?{}:[],le=0;le<H.length;le++){var ue=le,ee=H[le],ee=((pt,G)=>(ge=>(v.dynamicTypingFunction&&v.dynamicTyping[ge]===void 0&&(v.dynamicTyping[ge]=v.dynamicTypingFunction(ge)),(v.dynamicTyping[ge]||v.dynamicTyping)===!0))(pt)?G==="true"||G==="TRUE"||G!=="false"&&G!=="FALSE"&&((ge=>{if(ie.test(ge)&&(ge=parseFloat(ge),W<ge&&ge<D))return 1})(G)?parseFloat(G):F.test(G)?new Date(G):G===""?null:G):G)(ue=v.header?le>=z.length?"__parsed_extra":z[le]:ue,ee=v.transform?v.transform(ee,ue):ee);ue==="__parsed_extra"?(je[ue]=je[ue]||[],je[ue].push(ee)):je[ue]=ee}return v.header&&(le>z.length?me("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+le,I+be):le<z.length&&me("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+le,I+be)),je}var se;A&&(v.header||v.dynamicTyping||v.transform)&&(se=1,!A.data.length||Array.isArray(A.data[0])?(A.data=A.data.map(K),se=A.data.length):A.data=K(A.data,0),v.header&&A.meta&&(A.meta.fields=z),I+=se)}function oe(){return v.header&&z.length===0}function me(V,K,se,H){V={type:V,code:K,message:se},H!==void 0&&(V.row=H),A.errors.push(V)}j(v.step)&&(R=v.step,v.step=function(V){A=V,oe()?re():(re(),A.data.length!==0&&(T+=V.data.length,v.preview&&T>v.preview?E.abort():(A.data=A.data[0],R(A,M))))}),this.parse=function(V,K,se){var H=v.quoteChar||'"',H=(v.newline||(v.newline=this.guessLineEndings(V,H)),P=!1,v.delimiter?j(v.delimiter)&&(v.delimiter=v.delimiter(V),A.meta.delimiter=v.delimiter):((H=((be,je,le,ue,ee)=>{var pt,G,ge,Xt;ee=ee||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var qr=0;qr<ee.length;qr++){for(var St,Dn=ee[qr],Ae=0,jt=0,Ce=0,He=(ge=void 0,new m({comments:ue,delimiter:Dn,newline:je,preview:10}).parse(be)),Lt=0;Lt<He.data.length;Lt++)le&&Z(He.data[Lt])?Ce++:(St=He.data[Lt].length,jt+=St,ge===void 0?ge=St:0<St&&(Ae+=Math.abs(St-ge),ge=St));0<He.data.length&&(jt/=He.data.length-Ce),(G===void 0||Ae<=G)&&(Xt===void 0||Xt<jt)&&1.99<jt&&(G=Ae,pt=Dn,Xt=jt)}return{successful:!!(v.delimiter=pt),bestDelimiter:pt}})(V,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess)).successful?v.delimiter=H.bestDelimiter:(P=!0,v.delimiter=c.DefaultDelimiter),A.meta.delimiter=v.delimiter),N(v));return v.preview&&v.header&&H.preview++,w=V,E=new m(H),A=E.parse(w,K,se),re(),$?{meta:{paused:!0}}:A||{meta:{paused:!1}}},this.paused=function(){return $},this.pause=function(){$=!0,E.abort(),w=j(v.chunk)?"":w.substring(E.getCharIndex())},this.resume=function(){M.streamer._halted?($=!1,M.streamer.parseChunk(w,!0)):setTimeout(M.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,E.abort(),A.meta.aborted=!0,j(v.complete)&&v.complete(A),w=""},this.guessLineEndings=function(be,H){be=be.substring(0,1048576);var H=new RegExp(k(H)+"([^]*?)"+k(H),"gm"),se=(be=be.replace(H,"")).split("\r"),H=be.split(`
`),be=1<H.length&&H[0].length<se[0].length;if(se.length===1||be)return`
`;for(var je=0,le=0;le<se.length;le++)se[le][0]===`
`&&je++;return je>=se.length/2?`\r
`:"\r"}}function k(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(v){var w=(v=v||{}).delimiter,E=v.newline,P=v.comments,R=v.step,D=v.preview,W=v.fastMode,ie=null,F=!1,M=v.quoteChar==null?'"':v.quoteChar,T=M;if(v.escapeChar!==void 0&&(T=v.escapeChar),(typeof w!="string"||-1<c.BAD_DELIMITERS.indexOf(w))&&(w=","),P===w)throw new Error("Comment character same as delimiter");P===!0?P="#":(typeof P!="string"||-1<c.BAD_DELIMITERS.indexOf(P))&&(P=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var I=0,$=!1;this.parse=function(O,z,A){if(typeof O!="string")throw new Error("Input must be a string");var Z=O.length,re=w.length,oe=E.length,me=P.length,V=j(R),K=[],se=[],H=[],be=I=0;if(!O)return Ae();if(W||W!==!1&&O.indexOf(M)===-1){for(var je=O.split(E),le=0;le<je.length;le++){if(H=je[le],I+=H.length,le!==je.length-1)I+=E.length;else if(A)return Ae();if(!P||H.substring(0,me)!==P){if(V){if(K=[],Xt(H.split(w)),jt(),$)return Ae()}else Xt(H.split(w));if(D&&D<=le)return K=K.slice(0,D),Ae(!0)}}return Ae()}for(var ue=O.indexOf(w,I),ee=O.indexOf(E,I),pt=new RegExp(k(T)+k(M),"g"),G=O.indexOf(M,I);;)if(O[I]===M)for(G=I,I++;;){if((G=O.indexOf(M,G+1))===-1)return A||se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:K.length,index:I}),St();if(G===Z-1)return St(O.substring(I,G).replace(pt,M));if(M===T&&O[G+1]===T)G++;else if(M===T||G===0||O[G-1]!==T){ue!==-1&&ue<G+1&&(ue=O.indexOf(w,G+1));var ge=qr((ee=ee!==-1&&ee<G+1?O.indexOf(E,G+1):ee)===-1?ue:Math.min(ue,ee));if(O.substr(G+1+ge,re)===w){H.push(O.substring(I,G).replace(pt,M)),O[I=G+1+ge+re]!==M&&(G=O.indexOf(M,I)),ue=O.indexOf(w,I),ee=O.indexOf(E,I);break}if(ge=qr(ee),O.substring(G+1+ge,G+1+ge+oe)===E){if(H.push(O.substring(I,G).replace(pt,M)),Dn(G+1+ge+oe),ue=O.indexOf(w,I),G=O.indexOf(M,I),V&&(jt(),$))return Ae();if(D&&K.length>=D)return Ae(!0);break}se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:K.length,index:I}),G++}}else if(P&&H.length===0&&O.substring(I,I+me)===P){if(ee===-1)return Ae();I=ee+oe,ee=O.indexOf(E,I),ue=O.indexOf(w,I)}else if(ue!==-1&&(ue<ee||ee===-1))H.push(O.substring(I,ue)),I=ue+re,ue=O.indexOf(w,I);else{if(ee===-1)break;if(H.push(O.substring(I,ee)),Dn(ee+oe),V&&(jt(),$))return Ae();if(D&&K.length>=D)return Ae(!0)}return St();function Xt(Ce){K.push(Ce),be=I}function qr(Ce){var He=0;return He=Ce!==-1&&(Ce=O.substring(G+1,Ce))&&Ce.trim()===""?Ce.length:He}function St(Ce){return A||(Ce===void 0&&(Ce=O.substring(I)),H.push(Ce),I=Z,Xt(H),V&&jt()),Ae()}function Dn(Ce){I=Ce,Xt(H),H=[],ee=O.indexOf(E,I)}function Ae(Ce){if(v.header&&!z&&K.length&&!F){var He=K[0],Lt=Object.create(null),$o=new Set(He);let Lu=!1;for(let Gr=0;Gr<He.length;Gr++){let Et=He[Gr];if(Lt[Et=j(v.transformHeader)?v.transformHeader(Et,Gr):Et]){let Mn,Au=Lt[Et];for(;Mn=Et+"_"+Au,Au++,$o.has(Mn););$o.add(Mn),He[Gr]=Mn,Lt[Et]++,Lu=!0,(ie=ie===null?{}:ie)[Mn]=Et}else Lt[Et]=1,He[Gr]=Et;$o.add(Et)}Lu&&console.warn("Duplicate headers found and renamed."),F=!0}return{data:K,errors:se,meta:{delimiter:w,linebreak:E,aborted:$,truncated:!!Ce,cursor:be+(z||0),renamedHeaders:ie}}}function jt(){R(Ae()),K=[],se=[]}},this.abort=function(){$=!0},this.getCharIndex=function(){return I}}function g(v){var w=v.data,E=l[w.workerId],P=!1;if(w.error)E.userError(w.error,w.file);else if(w.results&&w.results.data){var R={abort:function(){P=!0,p(w.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:S,resume:S};if(j(E.userStep)){for(var D=0;D<w.results.data.length&&(E.userStep({data:w.results.data[D],errors:w.results.errors,meta:w.results.meta},R),!P);D++);delete w.results}else j(E.userChunk)&&(E.userChunk(w.results,R,w.file),delete w.results)}w.finished&&!P&&p(w.workerId,w.results)}function p(v,w){var E=l[v];j(E.userComplete)&&E.userComplete(w),E.terminate(),delete l[v]}function S(){throw new Error("Not implemented.")}function N(v){if(typeof v!="object"||v===null)return v;var w,E=Array.isArray(v)?[]:{};for(w in v)E[w]=N(v[w]);return E}function C(v,w){return function(){v.apply(w,arguments)}}function j(v){return typeof v=="function"}return c.parse=function(v,w){var E=(w=w||{}).dynamicTyping||!1;if(j(E)&&(w.dynamicTypingFunction=E,E={}),w.dynamicTyping=E,w.transform=!!j(w.transform)&&w.transform,!w.worker||!c.WORKERS_SUPPORTED)return E=null,c.NODE_STREAM_INPUT,typeof v=="string"?(v=(P=>P.charCodeAt(0)!==65279?P:P.slice(1))(v),E=new(w.download?h:y)(w)):v.readable===!0&&j(v.read)&&j(v.on)?E=new b(w):(n.File&&v instanceof File||v instanceof Object)&&(E=new f(w)),E.stream(v);(E=(()=>{var P;return!!c.WORKERS_SUPPORTED&&(P=(()=>{var R=n.URL||n.webkitURL||null,D=r.toString();return c.BLOB_URL||(c.BLOB_URL=R.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(P=new n.Worker(P)).onmessage=g,P.id=u++,l[P.id]=P)})()).userStep=w.step,E.userChunk=w.chunk,E.userComplete=w.complete,E.userError=w.error,w.step=j(w.step),w.chunk=j(w.chunk),w.complete=j(w.complete),w.error=j(w.error),delete w.worker,E.postMessage({input:v,config:w,workerId:E.id})},c.unparse=function(v,w){var E=!1,P=!0,R=",",D=`\r
`,W='"',ie=W+W,F=!1,M=null,T=!1,I=((()=>{if(typeof w=="object"){if(typeof w.delimiter!="string"||c.BAD_DELIMITERS.filter(function(z){return w.delimiter.indexOf(z)!==-1}).length||(R=w.delimiter),typeof w.quotes!="boolean"&&typeof w.quotes!="function"&&!Array.isArray(w.quotes)||(E=w.quotes),typeof w.skipEmptyLines!="boolean"&&typeof w.skipEmptyLines!="string"||(F=w.skipEmptyLines),typeof w.newline=="string"&&(D=w.newline),typeof w.quoteChar=="string"&&(W=w.quoteChar),typeof w.header=="boolean"&&(P=w.header),Array.isArray(w.columns)){if(w.columns.length===0)throw new Error("Option columns is empty");M=w.columns}w.escapeChar!==void 0&&(ie=w.escapeChar+W),w.escapeFormulae instanceof RegExp?T=w.escapeFormulae:typeof w.escapeFormulae=="boolean"&&w.escapeFormulae&&(T=/^[=+\-@\t\r].*$/)}})(),new RegExp(k(W),"g"));if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return $(null,v,F);if(typeof v[0]=="object")return $(M||Object.keys(v[0]),v,F)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||M),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),$(v.fields||[],v.data||[],F);throw new Error("Unable to serialize unrecognized input");function $(z,A,Z){var re="",oe=(typeof z=="string"&&(z=JSON.parse(z)),typeof A=="string"&&(A=JSON.parse(A)),Array.isArray(z)&&0<z.length),me=!Array.isArray(A[0]);if(oe&&P){for(var V=0;V<z.length;V++)0<V&&(re+=R),re+=O(z[V],V);0<A.length&&(re+=D)}for(var K=0;K<A.length;K++){var se=(oe?z:A[K]).length,H=!1,be=oe?Object.keys(A[K]).length===0:A[K].length===0;if(Z&&!oe&&(H=Z==="greedy"?A[K].join("").trim()==="":A[K].length===1&&A[K][0].length===0),Z==="greedy"&&oe){for(var je=[],le=0;le<se;le++){var ue=me?z[le]:le;je.push(A[K][ue])}H=je.join("").trim()===""}if(!H){for(var ee=0;ee<se;ee++){0<ee&&!be&&(re+=R);var pt=oe&&me?z[ee]:ee;re+=O(A[K][pt],ee)}K<A.length-1&&(!Z||0<se&&!be)&&(re+=D)}}return re}function O(z,A){var Z,re;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(re=!1,T&&typeof z=="string"&&T.test(z)&&(z="'"+z,re=!0),Z=z.toString().replace(I,ie),(re=re||E===!0||typeof E=="function"&&E(z,A)||Array.isArray(E)&&E[A]||((oe,me)=>{for(var V=0;V<me.length;V++)if(-1<oe.indexOf(me[V]))return!0;return!1})(Z,c.BAD_DELIMITERS)||-1<Z.indexOf(R)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?W+Z+W:Z)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=m,c.ParserHandle=_,c.NetworkStreamer=h,c.FileStreamer=f,c.StringStreamer=y,c.ReadableStreamStreamer=b,n.jQuery&&((s=n.jQuery).fn.parse=function(v){var w=v.config||{},E=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var W=0;W<this.files.length;W++)E.push({file:this.files[W],inputElem:this,instanceConfig:s.extend({},w)})}),P(),this;function P(){if(E.length===0)j(v.complete)&&v.complete();else{var D,W,ie,F,M=E[0];if(j(v.before)){var T=v.before(M.file,M.inputElem);if(typeof T=="object"){if(T.action==="abort")return D="AbortError",W=M.file,ie=M.inputElem,F=T.reason,void(j(v.error)&&v.error({name:D},W,ie,F));if(T.action==="skip")return void R();typeof T.config=="object"&&(M.instanceConfig=s.extend(M.instanceConfig,T.config))}else if(T==="skip")return void R()}var I=M.instanceConfig.complete;M.instanceConfig.complete=function($){j(I)&&I($,M.file,M.inputElem),R()},c.parse(M.file,M.instanceConfig)}}function R(){E.splice(0,1),P()}}),o&&(n.onmessage=function(v){v=v.data,c.WORKER_ID===void 0&&v&&(c.WORKER_ID=v.workerId),typeof v.input=="string"?n.postMessage({workerId:c.WORKER_ID,results:c.parse(v.input,v.config),finished:!0}):(n.File&&v.input instanceof File||v.input instanceof Object)&&(v=c.parse(v.input,v.config))&&n.postMessage({workerId:c.WORKER_ID,results:v,finished:!0})}),(h.prototype=Object.create(d.prototype)).constructor=h,(f.prototype=Object.create(d.prototype)).constructor=f,(y.prototype=Object.create(y.prototype)).constructor=y,(b.prototype=Object.create(d.prototype)).constructor=b,c})})(Rp);var Nw=Rp.exports;const yd=kd(Nw),Cw=[{name:"ROSSI",type:"rosso"},{name:"BIANCHI",type:"bianco"},{name:"BOLLICINE",type:"bollicine"},{name:"ROSATI",type:"rosato"}];function Tw(e){const t=/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/,r=e.match(t);return r?r[1]:null}function Rw(e,t){return`https://docs.google.com/spreadsheets/d/${e}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(t)}`}async function Pw(e,t){if(!te||!B)return!1;const{data:r,error:n}=await B.from("categorie").select("id").eq("user_id",e).eq("nome",t).single();return!n&&!!r}async function Iw(e,t){if(!te||!B)return!1;try{const{error:r}=await B.from("categorie").insert({user_id:e,nome:t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return!r}catch(r){return console.error("Errore nella creazione della categoria:",r),!1}}async function Ow(e,t,r){if(!te||!B)return!1;try{const{error:n}=await B.from("giacenze").insert({name:t.trim(),type:r.toLowerCase().trim(),supplier:"-",inventory:0,min_stock:0,price:0,vintage:null,region:null,description:null,user_id:e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});return!n}catch(n){return console.error("Errore nel salvataggio del vino:",n),!1}}async function Lw(e,t,r){const n=Rw(e,t.name),s=[];let i=0,o=!1;try{const l=await fetch(n);if(!l.ok)throw new Error(`Errore HTTP: ${l.status}`);const u=await l.text();let c;try{c=yd.parse(u,{header:!1,skipEmptyLines:!0})}catch{throw console.error("Errore parsing CSV:",u),new Error(`Errore parsing dati dal tab ${t.name}`)}return new Promise(d=>{yd.parse(u,{header:!0,skipEmptyLines:!0,complete:async h=>{try{await Pw(r,t.name)||(await Iw(r,t.name)?o=!0:s.push(`Impossibile creare la categoria ${t.name}`));for(const[y,b]of h.data.entries()){const _=b,k=_.NAME||_.Name||_.name||_.NOME||_.Nome||_.nome;k&&k.trim()?await Ow(r,k.trim(),t.type)?i++:s.push(`Errore nel salvare il vino "${k}" dal tab ${t.name}`):s.push(`Riga ${y+1} nel tab ${t.name}: nome vino mancante`)}d({wines:i,categoryCreated:o,errors:s})}catch(f){s.push(`Errore nel processare il tab ${t.name}: ${f}`),d({wines:i,categoryCreated:o,errors:s})}},error:h=>{s.push(`Errore nel parsing del CSV per ${t.name}: ${h.message}`),d({wines:0,categoryCreated:!1,errors:s})}})})}catch(l){return s.push(`Errore nel download del tab ${t.name}: ${l}`),{wines:0,categoryCreated:!1,errors:s}}}async function Aw(e){const t=Y.getUserId();if(!t)return{success:!1,msg:"Utente non autenticato",importedWines:0,importedCategories:0};if(!te||!B)return{success:!1,msg:"Database non disponibile",importedWines:0,importedCategories:0};const r=Tw(e);if(!r)return{success:!1,msg:"Link Google Sheets non valido",importedWines:0,importedCategories:0};let n=0,s=0;const i=[];for(const l of Cw)try{const u=await Lw(r,l,t);n+=u.wines,u.categoryCreated&&s++,i.push(...u.errors)}catch(u){i.push(`Errore generale nel tab ${l.name}: ${u}`)}let o="";return n>0?(o=`✅ ${n} vini importati`,s>0&&(o+=` da ${s} nuove categorie`)):o="❌ Nessun vino importato",{success:n>0,msg:o,importedWines:n,importedCategories:s,errors:i.length>0?i:void 0}}function xd(){const e=Yt(),[t,r]=x.useState(""),[n,s]=x.useState(!1),[i,o]=x.useState(!1),[l,u]=x.useState("idle"),[c,d]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{y()},[]),x.useEffect(()=>{if(h){const k=setTimeout(()=>f(""),5e3);return()=>clearTimeout(k)}},[h]);const y=async()=>{const k=Y.getUserId();if(!(!k||!te||!B))try{const{data:m,error:g}=await B.from("impostazioni").select("google_sheet_url").eq("user_id",k).single();m&&m.google_sheet_url&&r(m.google_sheet_url)}catch(m){console.error("Error loading existing sheet link:",m)}},b=async()=>{const k=Y.getUserId();if(!k||!t.trim()){u("error"),d("Inserisci un link valido al Google Sheet");return}if(!te||!B){u("error"),d("Supabase non disponibile");return}o(!0),u("idle");try{const{data:m}=await B.from("impostazioni").select("id").eq("user_id",k).single();let g;if(m?g=await B.from("impostazioni").update({google_sheet_url:t.trim()}).eq("user_id",k):g=await B.from("impostazioni").insert({user_id:k,google_sheet_url:t.trim()}),g.error)throw g.error;u("success"),d("✅ Link Google Sheet salvato con successo!")}catch(m){console.error("Error saving sheet link:",m),u("error"),d("❌ Errore durante il salvataggio del link")}finally{o(!1)}},_=async()=>{if(!window.confirm(`ATTENZIONE
⚠️ Tutti i vini saranno sostituiti con quelli del Google Sheet.
Vuoi continuare?`)||!window.confirm(`⚠️ Azione definitiva.
Continuare?`))return;if(!Y.getUserId()){u("error"),d("Utente non autenticato");return}if(!t.trim()){u("error"),d("Inserisci un link al Google Sheet");return}s(!0),u("idle"),f("");try{const p=await Aw(t);p.success?(u("success"),d(`✅ Importazione completata - ${p.importedWines} vini importati`),f(p.msg),i||await b()):(u("error"),d(`❌ ${p.msg}`),f("")),p.errors&&p.errors.length>0&&console.warn("Avvisi durante l'importazione:",p.errors)}catch(p){console.error("Errore importazione Google Sheet:",p),u("error"),d("❌ Errore durante l'importazione"),f("")}finally{s(!1)}};return a.jsxs("div",{className:"min-h-screen text-white",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>e("/settings/archivi"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alla pagina archivi",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-yellow-300 hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"max-w-xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold text-center text-white mb-8 tracking-wide",children:"SYNCRO GOOGLE SHEET"}),a.jsx("div",{className:"mb-6 flex justify-center",children:a.jsxs("a",{href:"https://docs.google.com/spreadsheets/d/1tRershHMvfmA8GHfhmzk5mts6CxLwBl7wH3Q0c9roSA/copy",target:"_blank",rel:"noopener noreferrer",className:"w-1/2 flex items-center justify-center gap-2 text-black font-semibold hover:opacity-90 transition-all duration-200 shadow-lg hover:shadow-xl",style:{borderRadius:"12px",padding:"12px 24px",fontSize:"14px",backgroundColor:"#e0b300",border:"2px solid #c9a100"},children:[a.jsx(uw,{className:"w-4 h-4"}),"Scarica Google Sheet"]})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Link Google Sheet"}),a.jsx("input",{type:"url",value:t,onChange:k=>r(k.target.value),className:"w-full p-3 text-white bg-black/40 focus:outline-none focus:ring-2 focus:ring-red-500/50 rounded-lg placeholder-gray-600",placeholder:"incolla qui il link",disabled:n||i,required:!0})]}),l!=="idle"&&a.jsx("div",{className:"mb-6",children:l==="success"?a.jsx("div",{className:"p-3 rounded-lg border border-green-500 bg-green-500/10",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pn,{className:"w-5 h-5 text-green-400"}),a.jsx("p",{className:"text-green-300 text-sm font-medium",children:c})]})}):a.jsx("div",{className:"p-3 rounded-lg border border-red-500 bg-red-500/10",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rs,{className:"w-5 h-5 text-red-400"}),a.jsx("p",{className:"text-red-300 text-sm font-medium",children:c})]})})}),h&&a.jsx("div",{className:"mb-6 p-3 rounded-lg border border-green-500 bg-green-500/10",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pn,{className:"w-5 h-5 text-green-400"}),a.jsx("p",{className:"text-green-300 text-sm font-medium",children:h})]})}),a.jsx("div",{className:"flex items-center justify-center pt-2 mb-6",children:a.jsx("button",{onClick:_,disabled:n||!t.trim(),className:"w-1/2 flex items-center justify-center gap-2 text-white hover:opacity-90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",style:{borderRadius:"12px",padding:"12px 24px",fontWeight:"600",fontSize:"14px",backgroundColor:"#1B4D3E",border:"2px solid #0F5132",background:"linear-gradient(135deg, #1B4D3E 0%, #0F5132 100%)"},children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ep,{className:"w-4 h-4"}),"Importa ora"]})})}),a.jsx("div",{className:"max-w-xl mx-auto",children:a.jsxs("div",{className:"p-6 rounded-lg border border-white/10",style:{backgroundColor:"#1a0000"},children:[a.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"💡 Come preparare il Google Sheet:"}),a.jsxs("ol",{className:"text-sm text-gray-400 space-y-2 list-decimal list-inside",children:[a.jsx("li",{children:"Crea tab separati chiamati: ROSSI, BIANCHI, BOLLICINE, ROSATI"}),a.jsx("li",{children:'In ogni tab, crea una colonna "NAME" con i nomi dei vini'}),a.jsx("li",{children:"Inserisci i vini (un vino per riga nella colonna NAME)"}),a.jsx("li",{children:'Clicca su "Condividi" → "Modifica le autorizzazioni di accesso"'}),a.jsx("li",{children:'Seleziona "Chiunque abbia il link può visualizzare"'}),a.jsx("li",{children:"Copia il link e incollalo qui sopra"})]})]})})]})})]})}function gi({onLoginSuccess:e}){const[t,r]=x.useState(""),[n,s]=x.useState(""),[i,o]=x.useState(!1),[l,u]=x.useState(!0),[c,d]=x.useState(!1),[h,f]=x.useState(null),y=async b=>{b.preventDefault(),d(!0),f(null);try{l?await Y.signIn(t,n):await Y.signUp(t,n),e==null||e()}catch(_){f(_.message||"Errore durante l'autenticazione")}finally{d(!1)}};return a.jsx("div",{className:"h-screen flex items-center justify-center p-3 overflow-hidden",style:{backgroundColor:"#2c0405"},children:a.jsxs("div",{className:"rounded-lg p-6 w-full max-w-xs shadow-xl",style:{backgroundColor:"#24161d",border:"1px solid #374151"},children:[a.jsx("div",{className:"text-center mb-6",children:a.jsx("div",{className:"flex items-center justify-center mb-3",children:a.jsx("img",{src:"/logo1.png",alt:"Logo",className:"h-44 w-44 object-contain"})})}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-xs font-medium text-cream mb-1",children:"EMAIL"}),a.jsx("input",{type:"email",id:"email",value:t,onChange:b=>r(b.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 text-cream rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all text-sm",placeholder:"inserisci la tua email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-xs font-medium text-cream mb-1",children:"PASSWORD"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:i?"text":"password",id:"password",value:n,onChange:b=>s(b.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 text-cream rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all pr-10 text-sm",placeholder:"inserisci la password",required:!0}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cream transition-colors",children:i?a.jsx(cw,{className:"h-4 w-4"}):a.jsx(dw,{className:"h-4 w-4"})})]})]}),h&&a.jsx("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-3 py-2 rounded-md text-xs",children:h}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-amber-700 hover:bg-amber-600 disabled:opacity-50 text-cream font-semibold py-2 px-3 rounded-md transition-colors duration-200 flex items-center justify-center gap-1 text-sm",children:c?a.jsx("div",{className:"w-4 h-4 border-2 border-cream border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[l?a.jsx(fw,{className:"h-4 w-4"}):a.jsx(yw,{className:"h-4 w-4"}),l?"ACCEDI":"REGISTRATI"]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:()=>{u(!l),f(null)},className:"text-amber-400 hover:text-amber-300 transition-colors text-xs",children:l?"Non hai un account? Registrati":"Hai già un account? Accedi"})})]})]})})}function wd(){const[e,t]=x.useState({assistantEdits:0,agentCheckpoints:0,totalCost:0,monthlyBudget:25,lastReset:new Date().toISOString().slice(0,7)});x.useEffect(()=>{const s=localStorage.getItem("replit-cost-tracker");s&&t(JSON.parse(s))},[]);const r=e.monthlyBudget-e.totalCost,n=e.totalCost/e.monthlyBudget*100;return a.jsxs("div",{className:"bg-gray-900/95 backdrop-blur-sm p-6 rounded-xl border border-gray-700 max-w-md mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(lw,{className:"h-6 w-6 text-green-400"}),a.jsx("h2",{className:"text-xl font-bold text-cream",children:"💰 SALDO REPLIT"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Speso questo mese:"}),a.jsxs("span",{className:"text-2xl font-bold text-red-400",children:["$",e.totalCost.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Budget rimanente:"}),a.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["$",r.toFixed(2)]})]}),a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mt-3",children:a.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${n>90?"bg-red-500":n>70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(n,100)}%`}})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4 text-sm",children:[a.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[a.jsx("div",{className:"text-gray-400",children:"Assistant Edits"}),a.jsx("div",{className:"text-blue-400 font-bold",children:e.assistantEdits})]}),a.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[a.jsx("div",{className:"text-gray-400",children:"Agent Checkpoints"}),a.jsx("div",{className:"text-purple-400 font-bold",children:e.agentCheckpoints})]})]}),n>90&&a.jsxs("div",{className:"flex items-center mt-3 p-2 bg-red-900/20 border border-red-700/30 rounded",children:[a.jsx(Ru,{className:"h-4 w-4 text-red-400 mr-2"}),a.jsx("span",{className:"text-sm text-red-400",children:"⚠️ Budget quasi esaurito!"})]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-3 text-center",children:["Reset automatico: ",new Date().toLocaleDateString("it-IT",{month:"long",year:"numeric"})]})]})]})}function $w(e){if(!e||typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let Sl=1;class zw{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...s}=t,i=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:Sl++,o=this.toasts.find(u=>u.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:n}),{...u,...t,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...s,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const l=s.then(async c=>{if(o=["resolve",c],Zr.isValidElement(c))i=!1,this.create({id:n,type:"default",message:c});else if(Mw(c)&&!c.ok){i=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${c.status}`):r.error,f=typeof r.description=="function"?await r.description(`HTTP error! status: ${c.status}`):r.description,b=typeof h=="object"&&!Zr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:f,...b})}else if(c instanceof Error){i=!1;const h=typeof r.error=="function"?await r.error(c):r.error,f=typeof r.description=="function"?await r.description(c):r.description,b=typeof h=="object"&&!Zr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:f,...b})}else if(r.success!==void 0){i=!1;const h=typeof r.success=="function"?await r.success(c):r.success,f=typeof r.description=="function"?await r.description(c):r.description,b=typeof h=="object"&&!Zr.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:f,...b})}}).catch(async c=>{if(o=["reject",c],r.error!==void 0){i=!1;const d=typeof r.error=="function"?await r.error(c):r.error,h=typeof r.description=="function"?await r.description(c):r.description,y=typeof d=="object"&&!Zr.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:h,...y})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),u=()=>new Promise((c,d)=>l.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(t,r)=>{const n=(r==null?void 0:r.id)||Sl++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const at=new zw,Dw=(e,t)=>{const r=(t==null?void 0:t.id)||Sl++;return at.addToast({title:e,...t,id:r}),r},Mw=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Uw=Dw,Fw=()=>at.toasts,Bw=()=>at.getActiveToasts(),At=Object.assign(Uw,{success:at.success,info:at.info,warning:at.warning,error:at.error,custom:at.custom,message:at.message,promise:at.promise,dismiss:at.dismiss,loading:at.loading},{getHistory:Fw,getToasts:Bw});$w("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ww(){const[e,t]=x.useState(null);return x.useEffect(()=>{B.auth.getUser().then(({data:r})=>{t((r==null?void 0:r.user)??null)})},[]),e}function bd(){const e=Yt();Ww();const{suppliers:t,isLoading:r,refreshSuppliers:n}=Ao(),{refreshWines:s}=Iu(),[i,o]=x.useState(""),[l,u]=x.useState(""),[c,d]=x.useState("2"),[h,f]=x.useState("0"),[y,b]=x.useState(""),[_,k]=x.useState(0),[m,g]=x.useState(!1),[p,S]=x.useState(""),[N,C]=x.useState(!1),[j,v]=x.useState(!1),[w,E]=x.useState(!1),[P,R]=x.useState(!1),[D,W]=x.useState(null);function ie(O){return O.replace(/[\u2028\r]/g,`
`).replace(/\n{2,}/g,`
`).split(`
`).map(A=>A.trim()).filter(A=>A!=="")}function F(){let O=y;const z=/(\s*[-–]?\s*\d{1,3}\s*€|\s*\d{1,3}\s*euro)/gi;let A=O.split(z);const Z=[];for(let V=0;V<A.length-1;V+=2){const K=A[V],se=A[V+1];if(K&&se){const H=K.trim();H.length>3&&Z.push(H)}}if(Z.length===0){const V=ie(O);Z.push(...V.filter(K=>K.length>3))}const re=Z.map(V=>V.replace(/[\u200B-\u200D\uFEFF\u00A0\u2028\u2029]/g," ").replace(/[€–""''…•·]/g,"").replace(/\s*[-–]?\s*\d{1,3}\s*€/gi,"").replace(/\s*\d{1,3}\s*euro/gi,"").replace(/\s+/g," ").trim()).filter(V=>V.length>3),oe=re.join(`
`);b(oe),k(re.length);const me=document.getElementById("count-righe");me&&(me.textContent=`${re.length}`)}async function M(){if(p.trim())try{const{data:O,error:z}=await B.auth.getUser();if(z||!O.user)return At.error("Devi essere loggato per aggiungere categorie.");const{error:A}=await B.from("categorie").insert({user_id:O.user.id,nome:p.trim(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});A?(console.error(A),At.error("Errore nell'aggiunta della categoria.")):(o(p.trim()),At.success("Categoria aggiunta con successo!"),S(""),g(!1))}catch(O){console.error("Errore:",O),At.error("Errore durante l'aggiunta della categoria.")}}const T=()=>{n(),C(!1)};function I(O){if(!i||i===""){v(!0),setTimeout(()=>{v(!1)},5e3);return}W(O?"replace":"add"),R(!0)}async function $(O){var Z;const z=((Z=document.getElementById("elenco-vini"))==null?void 0:Z.value)||y,A=ie(z);if(A.length===0)return At.warning("Nessun vino da salvare.");try{const{data:re,error:oe}=await B.auth.getUser();if(oe||!re.user)return At.error("Devi essere loggato per salvare.");const me=re.user.id;if(O){const{error:se}=await B.from("giacenze").delete().eq("user_id",me).eq("type",i.toLowerCase());if(se)return console.error(se),At.error("Errore nella cancellazione dei vini esistenti.")}const V=A.map(se=>({name:se,type:i.toLowerCase(),supplier:l||"Da definire",inventory:parseInt(h)||0,min_stock:parseInt(c)||2,price:0,vintage:null,region:null,description:null,user_id:me,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),{error:K}=await B.from("giacenze").insert(V);if(K)console.error(K),At.error("Errore nel salvataggio dei vini.");else{E(!0),setTimeout(()=>{E(!1)},5e3),await s(),b(""),k(0);const se=document.getElementById("count-righe");se&&(se.textContent="0")}}catch(re){console.error("Errore generale:",re),At.error("Errore durante il salvataggio.")}}return a.jsxs("div",{className:"min-h-screen text-white",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>e("/settings/archivi"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alla pagina archivi",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",style:{filter:"brightness(1.2)",color:"#ffffff"},children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("div",{className:"max-w-xl mx-auto",style:{padding:"20px"},children:[a.jsx("h1",{className:"text-2xl font-bold text-center text-cream mb-6",children:"INSERISCI LISTA VINI"}),a.jsx("div",{className:"mb-2",children:a.jsxs("div",{className:"text-sm text-gray-400 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"Incolla qui dentro la lista vini e clicca qui"}),a.jsxs("button",{onClick:F,className:"text-yellow-500 hover:text-yellow-600 inline-flex items-center",title:"Ottimizza testo",children:[a.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:a.jsxs("g",{children:[a.jsx("path",{d:"M12 2L13.09 8.26L19 9L13.09 9.74L12 16L10.91 9.74L5 9L10.91 8.26L12 2Z",fill:"#FFD700",stroke:"#FFA500",strokeWidth:"0.5"}),a.jsx("path",{d:"M18 5L18.5 6.5L20 7L18.5 7.5L18 9L17.5 7.5L16 7L17.5 6.5L18 5Z",fill:"#FFD700"}),a.jsx("path",{d:"M6 18L6.5 19.5L8 20L6.5 20.5L6 22L5.5 20.5L4 20L5.5 19.5L6 18Z",fill:"#FFD700"})]})}),a.jsx("span",{className:"text-white font-bold",children:"AI"})]})]}),a.jsx("div",{id:"count-righe",className:"text-green-400 text-sm mr-4",children:_})]})}),a.jsx("div",{className:"relative mb-4",children:a.jsx("textarea",{id:"elenco-vini",rows:10,placeholder:"Es: Soave Classico DOC Inama, Veneto",className:"text-sm border border-[#4a2a2a]",style:{borderRadius:"12px",padding:"12px",backgroundColor:"rgba(50, 0, 0, 0.6)",color:"white",width:"100%"},value:y,onChange:O=>b(O.target.value)})}),a.jsxs("div",{className:"mb-4",children:[j&&a.jsx("div",{className:"mb-3 p-3 rounded-lg border border-yellow-500 bg-yellow-500/10",children:a.jsx("p",{className:"text-yellow-300 text-sm font-medium",children:"⚠️ Seleziona almeno una tipologia di vino prima di salvare la lista."})}),w&&a.jsx("div",{className:"mb-3 p-3 rounded-lg border border-green-500 bg-green-500/10",children:a.jsx("p",{className:"text-green-300 text-sm font-medium",children:"✅ Lista vini salvata con successo!"})}),a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Seleziona TIPOLOGIA vino (obbligatorio)"}),a.jsxs("div",{className:"flex items-center gap-3 p-2 border border-[#4a2a2a]",style:{borderRadius:"12px",backgroundColor:"rgba(50, 0, 0, 0.6)"},children:[a.jsxs("select",{className:"flex-1 bg-transparent text-white border-none outline-none",style:{padding:"8px 0",fontSize:"16px",appearance:"none",backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23ffffff" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"8px center",backgroundSize:"12px",paddingLeft:"30px"},value:i,onChange:O=>o(O.target.value),children:[a.jsx("option",{value:"",style:{color:"#6b7280"},children:"seleziona..."}),a.jsx("option",{children:"Bianco"}),a.jsx("option",{children:"Rosso"}),a.jsx("option",{children:"Bollicine"}),a.jsx("option",{children:"Rosato"})]}),a.jsx("button",{onClick:()=>g(!0),className:"flex items-center justify-center text-white hover:bg-red-700 transition-colors border border-[#2c1b1b]",style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:"rgba(80, 0, 0, 0.9)",fontSize:"18px",fontWeight:"bold"},title:"Aggiungi categoria",children:"+"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Seleziona FORNITORE (opzionale)"}),a.jsxs("div",{className:"flex items-center gap-3 p-2 border border-[#4a2a2a]",style:{borderRadius:"12px",backgroundColor:"rgba(50, 0, 0, 0.6)"},children:[a.jsxs("select",{className:"flex-1 bg-transparent text-white border-none outline-none",style:{padding:"8px 0",fontSize:"16px",appearance:"none",backgroundImage:`url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23ffffff" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>')`,backgroundRepeat:"no-repeat",backgroundPosition:"8px center",backgroundSize:"12px",paddingLeft:"30px"},value:l,onChange:O=>u(O.target.value),children:[a.jsx("option",{value:"",style:{color:"#6b7280"},children:"nessuno..."}),r?a.jsx("option",{disabled:!0,style:{color:"#9ca3af"},children:"Caricamento fornitori..."}):t.length===0?a.jsx("option",{disabled:!0,style:{color:"#9ca3af"},children:"Nessun fornitore trovato"}):t.map(O=>a.jsx("option",{value:O.nome,style:{color:"white"},children:O.nome},O.id))]}),a.jsx("button",{onClick:()=>C(!0),className:"flex items-center justify-center text-white hover:bg-red-700 transition-colors border border-[#2c1b1b]",style:{width:"36px",height:"36px",borderRadius:"8px",backgroundColor:"rgba(80, 0, 0, 0.9)",fontSize:"18px",fontWeight:"bold"},title:"Aggiungi fornitore",children:"+"})]})]}),a.jsxs("div",{className:"flex gap-3 mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Soglia Minima"}),a.jsx("input",{type:"number",value:c,onChange:O=>d(O.target.value),min:"0",className:"w-full p-3 border border-[#4a2a2a] text-white bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500",style:{borderRadius:"12px",backgroundColor:"rgba(50, 0, 0, 0.6)"},placeholder:"2"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Giacenza"}),a.jsx("input",{type:"number",value:h,onChange:O=>f(O.target.value),min:"0",className:"w-full p-3 border border-[#4a2a2a] text-white bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500",style:{borderRadius:"12px",backgroundColor:"rgba(50, 0, 0, 0.6)"},placeholder:"0"})]})]}),a.jsxs("div",{className:"flex items-center pt-2 gap-3",children:[a.jsxs("button",{className:"flex items-center justify-center gap-2 text-white hover:opacity-90 transition-opacity",style:{borderRadius:"12px",padding:"14px 20px",fontWeight:"600",fontSize:"16px",flex:"1",backgroundColor:"#166534"},onClick:()=>I(!1),children:[a.jsx(Ep,{className:"w-4 h-4"}),"Aggiungi a lista esistente"]}),a.jsxs("button",{className:"flex items-center justify-center gap-2 text-white hover:bg-[#455a6b] transition-colors",style:{borderRadius:"12px",padding:"14px 20px",fontWeight:"600",fontSize:"16px",flex:"1",backgroundColor:"#526D82"},onClick:()=>I(!0),children:[a.jsx(kl,{className:"w-4 h-4"}),"Sostituisci lista esistente"]})]})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-cream",children:"Aggiungi Categoria"}),a.jsx("button",{onClick:()=>{g(!1),S("")},className:"text-gray-400 hover:text-cream",children:"×"})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nome Categoria"}),a.jsx("input",{type:"text",value:p,onChange:O=>S(O.target.value),placeholder:"Es: Dessert, Champagne...",className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-cream focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:()=>{g(!1),S("")},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-cream rounded px-4 py-2 transition-colors",children:"Annulla"}),a.jsx("button",{onClick:M,disabled:!p.trim(),className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-cream rounded px-4 py-2 transition-colors",children:"Aggiungi"})]})]})]})}),a.jsx(Ou,{isOpen:N,onClose:()=>C(!1),onSupplierAdded:T}),P&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[a.jsx("h3",{className:"text-xl font-bold text-cream",children:"Conferma Salvataggio"}),a.jsx("button",{onClick:()=>{R(!1),W(null)},className:"text-gray-400 hover:text-cream",children:"×"})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"mb-6",children:D==="replace"?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-red-300 text-center font-semibold",children:"🚨 ATTENZIONE: Stai per SOSTITUIRE completamente la lista esistente!"}),a.jsxs("p",{className:"text-red-400 text-sm text-center mt-2",children:['Tutti i vini della categoria "',i,'" verranno eliminati e sostituiti con questa nuova lista.']}),a.jsx("p",{className:"text-gray-400 text-sm text-center mt-2",children:"Questa operazione NON può essere annullata. Sei sicuro di voler procedere?"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-gray-300 text-center",children:"⚠️ Sei sicuro di voler salvare la lista vini?"}),a.jsx("p",{className:"text-gray-400 text-sm text-center mt-2",children:'Premi "Conferma" per procedere, oppure "Annulla" per modificare.'})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{R(!1),W(null)},className:"flex-1 bg-gray-700 hover:bg-gray-600 text-cream rounded px-4 py-2 transition-colors",children:"Annulla"}),a.jsx("button",{onClick:()=>{R(!1),D==="add"?$(!1):D==="replace"&&$(!0),W(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-cream rounded px-4 py-2 transition-colors",children:"Conferma"})]})]})]})})]})}function Vw(){const e=Yt(),[t,r]=x.useState(!1),[n,s]=x.useState(!1),[i,o]=x.useState(null),[l,u]=x.useState(!1),[c,d]=x.useState(!1),{suppliers:h,isLoading:f,error:y,refreshSuppliers:b}=Ao(),_=m=>{o(m),s(!0)},k=async()=>{if(!te||!Y.isAuthenticated()){alert("Errore di autenticazione");return}const m=Y.getUserId();if(!m){alert("ID utente non disponibile");return}d(!0);try{const{error:g}=await B.from("fornitori").delete().eq("user_id",m);if(g)throw console.error("Errore nell'eliminazione fornitori:",g),g;console.log("Reset fornitori completato con successo"),b(),u(!1)}catch(g){console.error("Errore durante il reset fornitori:",g),alert("Errore durante il reset dei fornitori. Riprova.")}finally{d(!1)}};return a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>e("/settings"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Torna alla home",children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full overflow-hidden",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 p-4 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",onClick:()=>r(!0),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(Oo,{className:"h-4 w-4 text-gray-300"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"text-sm font-bold text-cream",children:"NUOVO FORNITORE"})}),a.jsx(Ls,{className:"h-4 w-4 text-gray-500 group-hover:text-gray-400 transition-colors"})]})}),h.length>0&&a.jsx("div",{className:"bg-red-800/30 border border-red-700/50 p-4 rounded-xl text-left transition-all duration-200 group hover:bg-red-700/30 hover:border-red-600/50 cursor-pointer",onClick:()=>u(!0),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-700/50 rounded-lg group-hover:bg-red-600/50 transition-colors",children:a.jsx(va,{className:"h-4 w-4 text-red-300"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-bold text-red-300",children:"RESET FORNITORI"}),a.jsx("p",{className:"text-xs text-red-400/70",children:"Elimina tutti i fornitori"})]}),a.jsx(Ls,{className:"h-4 w-4 text-red-500 group-hover:text-red-400 transition-colors"})]})}),a.jsxs("div",{className:"mt-6 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"Fornitori Attivi"}),f?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-gray-600 border-t-amber-500 rounded-full animate-spin"}),a.jsx("span",{className:"ml-2 text-gray-500",children:"Caricamento fornitori..."})]}):y?a.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 p-3 rounded-lg text-sm",children:y}):h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(mn,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"Nessun fornitore attivo"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Aggiungi il tuo primo fornitore!"})]}):h.map(m=>a.jsx("div",{className:"bg-gray-800/30 border border-gray-700/50 p-3 rounded-lg text-left transition-all duration-200 group hover:bg-gray-700/30 hover:border-gray-600/50 cursor-pointer",onClick:()=>_(m),title:"Clicca per modificare le informazioni del fornitore",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-gray-700/30 rounded-md",children:a.jsx(mn,{className:"h-3.5 w-3.5 text-gray-400"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h5",{className:"text-sm font-medium text-cream uppercase",children:m.nome.toUpperCase()})}),a.jsx("div",{className:"p-1.5 text-gray-500 rounded-md",children:a.jsx(mw,{className:"h-3.5 w-3.5"})})]})},m.id))]})]}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})})]}),a.jsx(Ou,{isOpen:t,onClose:()=>r(!1),onSupplierAdded:()=>{b(),r(!1)}}),a.jsx(Tp,{isOpen:n,onClose:()=>{s(!1),o(null)},onSupplierUpdated:()=>{b(),s(!1),o(null)},supplier:i}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-md w-full p-6 border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-red-700/20 rounded-lg",children:a.jsx(va,{className:"h-5 w-5 text-red-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Conferma Reset Fornitori"})]}),a.jsxs("p",{className:"text-gray-300 mb-6",children:["Sei sicuro di voler eliminare ",a.jsx("strong",{children:"tutti i fornitori"}),"? Questa operazione non può essere annullata."]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:()=>u(!1),disabled:c,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors disabled:opacity-50",children:"Annulla"}),a.jsx("button",{onClick:k,disabled:c,className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2",children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Eliminazione..."]}):a.jsxs(a.Fragment,{children:[a.jsx(va,{className:"h-4 w-4"}),"Elimina Tutto"]})})]})]})})]})}function Hw({}){const[e,t]=x.useState(!1),[r,n]=x.useState("idle"),[s,i]=x.useState("");x.useState("");const[o,l]=x.useState(!1),[u,c]=x.useState(!1),[d,h]=x.useState(""),[f,y]=x.useState(null),[b,_]=x.useState(!1),[k,m]=x.useState("idle"),[g,p]=x.useState("");x.useEffect(()=>{(async()=>{const R=Y.getUserId();if(!(!R||!te))try{const{data:D,error:W}=await B.from("user_settings").select("google_sheet_url").eq("user_id",R).single();!W&&(D!=null&&D.google_sheet_url)&&y(D.google_sheet_url)}catch(D){console.error("Error loading sheet link:",D)}})()},[]);const S=async(P,R,D)=>{if(!te||!B)throw new Error("Supabase non disponibile");const{data:W,error:ie}=await B.from("giacenze").insert({name:P.trim(),type:R.toLowerCase().trim(),supplier:"-",inventory:0,min_stock:0,price:0,vintage:null,region:null,description:null,user_id:D,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(ie)throw console.error("Errore Supabase:",ie),ie;return W},N=async()=>{if(!Y.getUserId()){m("error"),p("Utente non autenticato");return}if(!d.trim()){m("error"),p("Inserisci un link al Google Sheet");return}_(!0),m("idle");try{m("error"),p("❌ Importazione Google Sheets temporaneamente disabilitata. Usa il metodo manuale."),await C()}catch(R){console.error("Errore importazione Google Sheet:",R),m("error"),p("❌ Errore durante l'importazione")}finally{_(!1)}},C=async()=>{const P=Y.getUserId();if(!(!P||!d.trim()||!te))try{const{error:R}=await B.from("user_settings").upsert({user_id:P,google_sheet_url:d,updated_at:new Date().toISOString()});R?console.error("Error saving sheet link:",R):(y(d),m("success"),p("✅ Link aggiornato con successo"),h(""))}catch(R){console.error("Error saving sheet link:",R)}},j=async()=>{const P=Y.getUserId();if(!(!P||!te))try{const{error:R}=await B.from("user_settings").delete().eq("user_id",P);R||(y(null),m("success"),p("✅ Link eliminato con successo"))}catch(R){console.error("Error deleting sheet link:",R)}},v=()=>{f&&(h(f),y(null))},w=async(P,R)=>{const D=Y.getUserId();if(!D){n("error"),i("Utente non autenticato");return}if(!te){n("error"),i("Supabase non configurato");return}t(!0),n("idle");try{const W=P.split(`
`).filter(T=>T.trim());if(W.length===0)throw new Error("Nessun dato da importare");let ie=0;const F=[];for(let T=0;T<W.length;T++){const I=W[T].trim();if(I)try{let $="",O="";if(I.includes(",")){const z=I.split(",").map(A=>A.replace(/"/g,"").trim());if(z.length>=2)$=z[0],O=z[1].toLowerCase();else{F.push(`Riga ${T+1}: Formato CSV non valido - deve contenere almeno nome,tipo`);continue}}else{const z=I.indexOf(" ");if(z===-1){F.push(`Riga ${T+1}: Formato non valido - deve contenere nome e tipo separati da spazio`);continue}$=I.substring(0,z).trim(),O=I.substring(z+1).trim().toLowerCase()}if(!$||!O){F.push(`Riga ${T+1}: Nome o tipo mancante`);continue}if(!["rosso","bianco","bollicine","rosato"].includes(O)){F.push(`Riga ${T+1}: Tipo non valido - deve essere rosso, bianco, bollicine o rosato`);continue}await S($,O,D),ie++}catch($){console.error(`Errore riga ${T+1}:`,$),F.push(`Riga ${T+1}: ${$ instanceof Error?$.message:"Errore sconosciuto"}`)}}n("success");let M=`${R} importato con successo - ${ie} vini elaborati`;F.length>0&&(M+=` (${F.length} errori)`),i(M)}catch(W){console.error("Errore durante l'importazione:",W),n("error"),i(`Errore durante l'importazione: ${W instanceof Error?W.message:"Errore sconosciuto"}`)}finally{t(!1)}},E=async P=>{var D;const R=(D=P.target.files)==null?void 0:D[0];if(R)try{const W=await R.text();await w(W,`File "${R.name}"`)}catch(W){console.error("Errore nella lettura del file:",W),n("error"),i("Errore nella lettura del file"),t(!1)}};return a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[(r!=="idle"||k!=="idle")&&a.jsxs("div",{className:"space-y-3",children:[r!=="idle"&&a.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${r==="success"?"bg-green-900/20 border border-green-800":"bg-red-900/20 border border-red-800"}`,children:[r==="success"?a.jsx(pn,{className:"w-5 h-5 text-green-400"}):a.jsx(rs,{className:"w-5 h-5 text-red-400"}),a.jsx("p",{className:`text-sm ${r==="success"?"text-green-300":"text-red-300"}`,children:s})]}),k!=="idle"&&a.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg ${k==="success"?"bg-green-900/20 border border-green-800":"bg-red-900/20 border border-red-800"}`,children:[k==="success"?a.jsx(pn,{className:"w-5 h-5 text-green-400"}):a.jsx(rs,{className:"w-5 h-5 text-red-400"}),a.jsx("p",{className:`text-sm ${k==="success"?"text-green-300":"text-red-300"}`,children:g})]})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-2xl",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(vd,{className:"w-6 h-6 text-amber-400"}),a.jsx("h3",{className:"text-xl font-bold text-cream uppercase",children:"CARICA FILE"})]}),a.jsx("div",{className:"space-y-3 mb-6",children:a.jsxs("button",{onClick:()=>{c(!1),l(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(Pi,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"GOOGLE SHEETS"})]})}),a.jsxs("div",{className:"text-center py-12 mb-6",children:[a.jsx("input",{type:"file",accept:".csv,.xlsx,.xls,.txt",onChange:E,className:"hidden",id:"modal-file-upload",disabled:e}),a.jsx("div",{className:"w-16 h-16 bg-gray-700/50 rounded-lg flex items-center justify-center mx-auto mb-6",children:a.jsx(vd,{className:"w-8 h-8 text-gray-400"})}),a.jsx("p",{className:"text-cream font-medium mb-2 text-lg",children:"Seleziona file"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"CSV, TXT, Excel (max 10MB)"})]}),a.jsx("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"space-y-2 text-sm text-gray-400",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium text-cream",children:"Formato:"})," Nome Tipo (per riga)"]}),a.jsx("p",{children:"Solo nome e tipo vino necessari"})]})}),r!=="idle"&&a.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg mb-4 ${r==="success"?"bg-green-900/20 border border-green-800":"bg-red-900/20 border border-red-800"}`,children:[r==="success"?a.jsx(pn,{className:"w-5 h-5 text-green-400"}):a.jsx(rs,{className:"w-5 h-5 text-red-400"}),a.jsx("p",{className:`text-sm ${r==="success"?"text-green-300":"text-red-300"}`,children:s})]}),a.jsx("div",{className:"flex gap-3",children:a.jsx("button",{onClick:()=>{c(!1),n("idle"),i("")},className:"flex-1 px-4 py-3 bg-gray-700 text-cream rounded-lg hover:bg-gray-600 transition-colors",disabled:e,children:"Chiudi"})})]})})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-2xl",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(Pi,{className:"w-6 h-6 text-blue-400"}),a.jsx("h3",{className:"text-xl font-bold text-cream uppercase",children:"GOOGLE SHEET"})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Incolla link Google Sheet pubblico"}),a.jsx("input",{type:"url",value:d,onChange:P=>h(P.target.value),className:"w-full px-4 py-3 bg-gray-800/70 text-cream rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder-gray-400 mb-4",placeholder:"https://docs.google.com/spreadsheets/...",disabled:b}),f&&a.jsx("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Pi,{className:"w-5 h-5 text-blue-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-cream font-medium text-sm",children:"Google Sheet collegato"}),a.jsx("p",{className:"text-gray-400 text-xs truncate max-w-xs",children:f})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-cream transition-colors",title:"Modifica link",children:a.jsx(Edit,{className:"w-4 h-4"})}),a.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-red-400 transition-colors",title:"Elimina link",children:a.jsx(Trash2,{className:"w-4 h-4"})})]})]})}),k!=="idle"&&a.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-lg mb-4 ${k==="success"?"bg-green-900/20 border border-green-800":"bg-red-900/20 border border-red-800"}`,children:[k==="success"?a.jsx(pn,{className:"w-5 h-5 text-green-400"}):a.jsx(rs,{className:"w-5 h-5 text-red-400"}),a.jsx("p",{className:`text-sm ${k==="success"?"text-green-300":"text-red-300"}`,children:g})]}),a.jsxs("div",{className:"space-y-3 text-xs text-gray-400 mb-6",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Formato:"})," Nome | Tipo"]}),a.jsx("p",{children:"Solo nome e tipo vino (rosso/bianco/bollicine/rosato)"}),a.jsx("p",{children:"Altri campi impostati automaticamente"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{l(!1),m("idle"),p("")},className:"flex-1 px-4 py-3 bg-gray-700 text-cream rounded-lg hover:bg-gray-600 transition-colors",disabled:b,children:"Chiudi"}),a.jsx("button",{onClick:N,disabled:b||!d.trim(),className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:b?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Oo,{className:"w-4 h-4"}),"Importa"]})})]})]})})})]})}function qw(){const e=Yt();Iu();const{suppliers:t}=Ao(),[r,n]=x.useState(()=>Array.from({length:100},(p,S)=>({id:`row-${S}`,tipologia:"",nomeVino:"",produttore:"",provenienza:"",costo:"",vendita:"",margine:"",fornitore:""}))),[s,i]=x.useState([]),[o,l]=x.useState(!1),u=["Bollicine","Bianchi","Rossi","Rosati"],c=t.length>0?t.map(p=>p.nome):["Fornitore A","Fornitore B","Fornitore C"],d=["Cantina Alfa","Cantina Beta","Cantina Gamma"],[h,f]=x.useState(14),y=()=>({fontSize:`${h}px`}),b=(p,S)=>{if(S.ctrlKey||S.metaKey)i(N=>N.includes(p)?N.filter(C=>C!==p):[...N,p]);else if(S.shiftKey&&s.length>0){const N=s[s.length-1],C=Math.min(N,p),j=Math.max(N,p),v=Array.from({length:j-C+1},(w,E)=>C+E);i(v)}else i([p])},_=(p,S,N)=>{n(C=>C.map((j,v)=>{if(v===p){const w={...j,[S]:N};if(S==="costo"||S==="vendita"){w[S]=N;const E=S==="costo"?N:j.costo,P=S==="vendita"?N:j.vendita,R=E&&E!==""?parseFloat(E):0,D=P&&P!==""?parseFloat(P):0;if(R>0||D>0){const W=D-R;let ie="";R>0&&(ie=` (${(W/R*100).toFixed(1)}%)`),w.margine=`${W.toFixed(2)}${ie}`}else w.margine=""}return w}return j}))},k=p=>{const S=Array.from({length:p},(N,C)=>({id:`row-${Date.now()}-${C}`,tipologia:"",nomeVino:"",produttore:"",provenienza:"",costo:"",vendita:"",margine:"",fornitore:""}));n(N=>[...N,...S]),l(!1)},m=()=>{const p=r.filter(N=>N.tipologia.trim()!==""||N.nomeVino.trim()!==""||N.produttore.trim()!==""||N.provenienza.trim()!==""||N.fornitore.trim()!==""||N.costo.trim()!==""||N.vendita.trim()!=="");n(p),i([]),l(!1);const S=r.length-p.length;S>0?alert(`${S} righe vuote eliminate`):alert("Nessuna riga vuota trovata")},g=p=>{const S=s.includes(p),N=s.length>1;if(S&&N){const j=`Confermi l'eliminazione delle righe ${[...s].sort((v,w)=>v-w).map(v=>v+1).join(", ")}?`;window.confirm(j)&&(n(v=>v.filter((w,E)=>!s.includes(E))),i([]))}else{const C=`Confermi l'eliminazione della riga ${p+1}?`;window.confirm(C)&&(n(j=>j.filter((v,w)=>w!==p)),i(j=>j.filter(v=>v!==p).map(v=>v>p?v-1:v)))}};return a.jsxs("div",{className:"h-[95vh] flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0 sticky top-0 z-10",children:a.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("button",{onClick:()=>e("/settings"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-24 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})]})})}),a.jsxs("main",{className:"flex-1 flex flex-col px-3 py-4 min-h-0",children:[a.jsx("div",{className:"pb-4 mb-6",children:a.jsx(Hw,{})}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a.jsxs("button",{onClick:()=>console.log("Esporta"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors text-sm font-medium",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Esporta"]}),a.jsxs("button",{onClick:()=>console.log("Filtra"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})}),"Filtra"]}),a.jsxs("button",{onClick:()=>console.log("Visualizza"),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm font-medium",children:[a.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Visualizza"]}),a.jsxs("button",{onClick:()=>console.log("Cerca"),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors text-sm font-medium",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Cerca"]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{onClick:()=>{f(p=>Math.max(10,p-5))},className:"flex items-center justify-center px-2 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-l-lg transition-colors text-sm font-bold",disabled:h<=10,style:{opacity:h<=10?.5:1},children:"-"}),a.jsx("button",{className:"flex items-center gap-2 px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white transition-colors text-sm font-medium border-l border-r border-gray-500",style:{cursor:"default"},children:"Font"}),a.jsx("button",{onClick:()=>{f(p=>Math.min(24,p+5))},className:"flex items-center justify-center px-2 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-r-lg transition-colors text-sm font-bold",disabled:h>=24,style:{opacity:h>=24?.5:1},children:"+"})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{onClick:()=>{confirm("Sei sicuro di voler resettare tutti i dati?")&&n(Array.from({length:100},(p,S)=>({id:`row-${S}`,tipologia:"",nomeVino:"",produttore:"",provenienza:"",costo:"",vendita:"",margine:"",fornitore:""})))},className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors text-sm font-medium",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})})]})}),a.jsxs("div",{className:"rounded-lg shadow-2xl border border-amber-900 overflow-hidden flex-1 min-h-0",style:{backgroundColor:"#8B4513"},children:[a.jsx("div",{className:"h-full overflow-x-auto overflow-y-auto",children:a.jsxs("table",{className:"w-full table-fixed min-w-[1200px]",style:{borderCollapse:"collapse"},children:[a.jsx("thead",{className:"sticky top-0 z-30 shadow-lg",style:{backgroundColor:"#3b1d1d"},children:a.jsxs("tr",{children:[a.jsx("th",{className:"w-8 px-2 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"#"}),a.jsx("th",{className:"w-32 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Tipologia"}),a.jsx("th",{className:"w-48 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Nome Vino"}),a.jsx("th",{className:"w-40 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Produttore"}),a.jsx("th",{className:"w-36 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Provenienza"}),a.jsx("th",{className:"w-32 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Fornitore"}),a.jsx("th",{className:"w-24 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Costo €"}),a.jsx("th",{className:"w-24 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Vendita €"}),a.jsx("th",{className:"w-24 px-3 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 border-r-2 border-r-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Margine"}),a.jsx("th",{className:"w-16 px-2 py-3 text-center align-middle text-sm font-bold text-white border border-amber-900 uppercase bg-[#3b1d1d] backdrop-blur-sm",children:"Azioni"})]})}),a.jsx("tbody",{children:r.map((p,S)=>{const N=s.includes(S),C={backgroundColor:N?"#E6D7B8":"#F5F0E6",borderWidth:N?"2px":"1px",borderColor:N?"#D97706":"#92400e"};return a.jsxs("tr",{onClick:j=>b(S,j),className:"cursor-pointer transition-all duration-200 hover:bg-opacity-80",style:C,children:[a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("div",{className:"w-full h-full px-2 py-2 text-center text-gray-600 font-medium select-none",style:{fontSize:`${h*.7}px`,userSelect:"none"},children:S+1})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsxs("select",{value:p.tipologia,onChange:j=>_(S,"tipologia",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner text-center select-none",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6",userSelect:"none",...y()},children:[a.jsx("option",{value:"",children:"...."}),u.map(j=>a.jsx("option",{value:j,children:j},j))]})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("input",{type:"text",value:p.nomeVino,onChange:j=>_(S,"nomeVino",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner select-none",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6",userSelect:"none",...y()}})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6"},children:a.jsxs("select",{value:p.produttore,onChange:j=>_(S,"produttore",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner text-center select-none",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6",userSelect:"none",...y()},children:[a.jsx("option",{value:"",children:"...."}),d.map(j=>a.jsx("option",{value:j,children:j},j))]})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6"},children:a.jsx("input",{type:"text",value:p.provenienza,onChange:j=>_(S,"provenienza",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner select-none",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6",userSelect:"none",...y()}})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6"},children:a.jsxs("select",{value:p.fornitore,onChange:j=>_(S,"fornitore",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner text-center select-none",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6",userSelect:"none",...y()},children:[a.jsx("option",{value:"",children:"...."}),c.map(j=>a.jsx("option",{value:j,children:j},j))]})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("input",{type:"text",value:p.costo||"",onChange:j=>_(S,"costo",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner text-center select-none",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6",userSelect:"none",...y()},placeholder:"0"})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("input",{type:"text",value:p.vendita||"",onChange:j=>_(S,"vendita",j.target.value),className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 focus:bg-white focus:shadow-inner text-center select-none",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6",userSelect:"none",...y()},placeholder:"0"})}),a.jsx("td",{className:"border border-amber-900 p-0",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("input",{type:"text",value:p.margine||"",readOnly:!0,className:"w-full h-full px-2 py-2 bg-transparent border-none outline-none text-gray-600 text-center cursor-not-allowed select-none",style:{backgroundColor:N?"#E6D7B8":"#f5f0e6",userSelect:"none",...y()}})}),a.jsx("td",{className:"border border-amber-900",style:{backgroundColor:N?"#E6D7B8":"#F5F0E6"},children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:j=>{j.stopPropagation(),g(S)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",title:"Elimina riga",children:"🗑️"})})})]},p.id)})})]})}),a.jsxs("div",{className:"sticky bottom-0 z-20 border-t border-amber-900 relative",children:[o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-30",onClick:()=>l(!1)}),a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-40 border border-amber-900 rounded-lg shadow-2xl",style:{backgroundColor:"#3b1d1d"},children:a.jsxs("div",{className:"p-2 space-y-1",children:[a.jsxs("button",{onClick:()=>k(1),className:"w-full flex items-center gap-3 px-4 py-2 text-white hover:bg-amber-900 hover:bg-opacity-30 rounded transition-colors text-sm font-medium",children:[a.jsx("span",{className:"text-green-400 font-bold",children:"➕"}),"Aggiungi 1"]}),a.jsxs("button",{onClick:()=>k(10),className:"w-full flex items-center gap-3 px-4 py-2 text-white hover:bg-amber-900 hover:bg-opacity-30 rounded transition-colors text-sm font-medium",children:[a.jsx("span",{className:"text-green-400 font-bold",children:"➕"}),"Aggiungi 10"]}),a.jsxs("button",{onClick:()=>k(50),className:"w-full flex items-center gap-3 px-4 py-2 text-white hover:bg-amber-900 hover:bg-opacity-30 rounded transition-colors text-sm font-medium",children:[a.jsx("span",{className:"text-green-400 font-bold",children:"➕"}),"Aggiungi 50"]}),a.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-4 py-2 text-white hover:bg-red-600 hover:bg-opacity-60 rounded transition-colors text-sm font-medium",children:[a.jsx("span",{className:"text-red-400 font-bold",children:"➖"}),"ELIMINA VUOTE"]})]})})]}),a.jsx("button",{onClick:()=>l(!o),className:"w-full py-2 text-white font-semibold hover:bg-opacity-80 transition-colors border-none text-xs",style:{backgroundColor:"#3b1d1d"},children:"Aggiungi Righe"})]})]})]})]})}function Gw(){const e=Yt(),[t,r]=x.useState(null),[n,s]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!te||!B)return;const{data:{user:f}}=await B.auth.getUser();f&&r(f)})()},[]);const i=async()=>{try{if(!te||!B){localStorage.clear(),sessionStorage.clear(),window.location.href="/";return}const{error:h}=await B.auth.signOut();h&&(console.error("Errore durante il logout:",h),localStorage.clear(),sessionStorage.clear()),window.location.href="/"}catch(h){console.error("Errore durante il logout:",h),localStorage.clear(),sessionStorage.clear(),window.location.href="/"}},o=h=>{h==="logout"?i():h==="email"?l():h==="password"?u():h==="profile"&&c()},l=()=>{const h=prompt("Inserisci il nuovo indirizzo email:",(t==null?void 0:t.email)||"");if(h&&h!==(t==null?void 0:t.email)){if(!te||!B){alert("Modifica email non disponibile - servizio di autenticazione non configurato");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)){alert("⚠️ Inserisci un indirizzo email valido");return}B.auth.updateUser({email:h}).then(({error:y})=>{alert(y?"❌ Errore durante la modifica dell'email: "+y.message:`✅ Richiesta di modifica email inviata!

Controlla la tua casella email attuale per confermare il cambiamento.`)})}},u=()=>{const h=prompt("Inserisci la nuova password (minimo 6 caratteri):");if(h){if(!te||!B){alert("Modifica password non disponibile - servizio di autenticazione non configurato");return}if(h.length<6){alert("⚠️ La password deve essere di almeno 6 caratteri");return}B.auth.updateUser({password:h}).then(({error:f})=>{alert(f?"❌ Errore durante la modifica della password: "+f.message:"✅ Password aggiornata con successo!")})}},c=()=>{s(!0)},d=[{id:"email",title:"EMAIL",icon:Io},{id:"password",title:"PASSWORD",icon:_p},{id:"profile",title:"PROFILO",icon:Np},{id:"logout",title:"ESCI",icon:Pu}];return a.jsxs("div",{className:"min-h-screen",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>e("/settings"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:text-cream hover:bg-gray-800 rounded-lg transition-colors",title:"Vai alla home",style:{filter:"brightness(1.2)",color:"#ffffff"},children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:d.map(h=>{const f=h.icon;return a.jsx("div",{onClick:()=>o(h.id),className:"bg-gray-800/50 border border-gray-700 p-3 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(f,{className:"h-4 w-4 text-gray-300"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-bold text-cream",children:h.title}),h.id==="email"&&(t==null?void 0:t.email)&&a.jsxs("p",{className:"text-xs text-blue-400 mt-1",children:["Attuale: ",t.email]})]})]})},h.id)})}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-auto text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})}),a.jsx(Cp,{open:n,onOpenChange:s,user:t})]})]})}function Kw(){const e=Yt(),[t,r]=x.useState(!1),[n,s]=x.useState(!1),[i,o]=x.useState(!1),l=[{id:"language",title:"LINGUA",icon:Pi},{id:"notifications",title:"NOTIFICHE",icon:aw},{id:"testmode",title:"RISOLUZIONI",icon:vw},{id:"reset",title:"RESET",icon:kl}],u=async()=>{await Y.signOut()&&e("/")},c=async()=>{o(!0);try{if(!te||!Y.isAuthenticated())throw new Error("Supabase non configurato o utente non autenticato");const d=Y.getUserId();if(!d)throw new Error("ID utente non disponibile");const{supabase:h}=await Wr(()=>Promise.resolve().then(()=>rw),void 0,import.meta.url),{error:f}=await h.from("giacenze").delete().eq("user_id",d);if(f)throw console.error("Errore nell'eliminazione vini:",f),f;const{error:y}=await h.from("fornitori").delete().eq("user_id",d);if(y)throw console.error("Errore nell'eliminazione fornitori:",y),y;console.log("Reset completato con successo"),s(!1),r(!1),e("/")}catch(d){console.error("Errore durante il reset:",d),alert("Errore durante il reset dei dati. Riprova.")}finally{o(!1)}};return a.jsxs("div",{className:"h-screen max-h-screen overflow-hidden flex flex-col",style:{background:"linear-gradient(to bottom right, #1f0202, #2d0505, #1f0202)"},children:[a.jsx("header",{className:"border-b border-red-900/30 bg-black/30 backdrop-blur-sm flex-shrink-0",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-20",children:[a.jsx("button",{onClick:()=>e("/settings"),className:"p-2 text-white hover:text-cream hover:bg-white/10 rounded-full transition-all duration-200 hover:scale-105",title:"Torna alle impostazioni",style:{filter:"brightness(1.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),a.jsx("img",{src:"/logo2.png",alt:"WINENODE",className:"h-32 w-auto object-contain"}),a.jsx("button",{onClick:()=>e("/"),className:"p-2 text-white hover:bg-gray-700 rounded-lg transition-colors",title:"Torna alla home",children:a.jsx(xr,{className:"h-6 w-6"})})]})})}),a.jsxs("main",{className:"flex-1 flex flex-col max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full overflow-hidden",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:l.map(d=>{const h=d.icon;return a.jsx("div",{className:"bg-gray-800/50 border border-gray-700 p-3 rounded-xl text-left transition-all duration-200 group hover:bg-gray-700/50 hover:border-gray-600 cursor-pointer",onClick:()=>{console.log(`Clicked on ${d.id}`),d.id==="reset"?(console.log("Opening reset confirmation..."),r(!0)):d.id==="language"?alert("Funzionalità lingua in sviluppo"):d.id==="notifications"?alert("Funzionalità notifiche in sviluppo"):d.id==="testmode"&&alert("Funzionalità test in sviluppo")},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-700/50 rounded-lg group-hover:bg-gray-600/50 transition-colors",children:a.jsx(h,{className:"h-4 w-4 text-gray-300"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsx("h3",{className:"text-sm font-bold text-cream",children:d.title})}),a.jsx(Ls,{className:"h-4 w-4 text-gray-500 group-hover:text-gray-400 transition-colors"})]})},d.id)})}),te&&a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:u,className:"w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(Pu,{className:"h-5 w-5"}),"DISCONNETTI"]})}),a.jsx("div",{className:"flex-1"}),a.jsx("div",{className:"mt-auto text-center",children:a.jsxs("div",{className:"text-gray-400",style:{fontSize:"8px"},children:[a.jsx("div",{className:"mb-1",children:"Versione: 1.0.0"}),a.jsxs("div",{children:["Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")," -"," ",new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})})]}),t&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-red-600 rounded-full flex items-center justify-center",children:a.jsx(kl,{className:"h-6 w-6 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-cream mb-2",children:"Reset Completo"}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Sei sicuro di voler resettare tutti i dati? Questa operazione eliminerà:"}),a.jsxs("ul",{className:"text-left text-gray-300 mb-6 space-y-1",children:[a.jsx("li",{children:"• Tutti i vini del tuo inventario"}),a.jsx("li",{children:"• Tutti i fornitori"}),a.jsx("li",{children:"• Tutte le giacenze"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>r(!1),className:"flex-1 px-4 py-2 bg-gray-700 text-cream rounded-lg hover:bg-gray-600 transition-colors",children:"Annulla"}),a.jsx("button",{onClick:()=>{console.log("First confirmation accepted, showing final confirmation..."),r(!1),s(!0)},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Continua"})]})]})})}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gray-900 border border-red-500 rounded-lg w-full max-w-md",children:a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-red-700 rounded-full flex items-center justify-center",children:a.jsx(Ru,{className:"h-6 w-6 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-red-400 mb-2",children:"ATTENZIONE!"}),a.jsxs("p",{className:"text-gray-300 mb-4",children:["Questa operazione è ",a.jsx("strong",{className:"text-red-400",children:"IRREVERSIBILE"}),"."]}),a.jsx("p",{className:"text-gray-300 mb-6",children:"Tutti i tuoi dati verranno eliminati definitivamente. Sei assolutamente sicuro?"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 bg-gray-700 text-cream rounded-lg hover:bg-gray-600 transition-colors",disabled:i,children:"No, annulla"}),a.jsx("button",{onClick:()=>{console.log("Final confirmation accepted, starting reset..."),c()},disabled:i,className:"flex-1 px-4 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Resettando..."]}):"Sì, elimina tutto"})]})]})})})]})}function Qw(){const[e,t]=x.useState(!1),[r,n]=x.useState(!0),[s,i]=x.useState(null),[o,l]=x.useState(!0),[u,c]=x.useState(!1),[d,h]=x.useState(!1);return x.useEffect(()=>{const f=y=>{const b=y.target;b.tagName==="INPUT"||b.tagName==="TEXTAREA"||y.key==="s"&&y.ctrlKey&&(y.preventDefault(),h(!d))};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[d]),x.useEffect(()=>{if(console.log("🔧 App startup - Supabase available:",te),console.log("🌐 Current URL:",window.location.href),!te){c(!0),l(!1);return}return Y.onAuthStateChange(y=>{console.log("👤 Auth state changed:",y?"Logged in":"Logged out"),t(!!y),i(y?{access_token:y.token,token_type:"Bearer",expires_in:3600,refresh_token:y.refreshToken,user:y}:null),n(!1)})},[]),r?a.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-amber-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-cream",children:"Caricamento..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsxs(av,{children:[a.jsx(ot,{path:"/",element:s||u?a.jsx(Sw,{}):a.jsx(gi,{})}),a.jsx(ot,{path:"/settings",element:s||u?a.jsx(Ew,{}):a.jsx(gi,{})}),a.jsx(ot,{path:"/settings/fornitori",element:s||u?a.jsx(Vw,{}):a.jsx(gi,{})}),a.jsx(ot,{path:"/settings/archivi",element:a.jsx(qw,{})}),a.jsx(ot,{path:"/settings/archivi/manuale",element:a.jsx(bd,{})}),a.jsx(ot,{path:"/settings/google-sheets",element:a.jsx(xd,{})}),a.jsx(ot,{path:"/settings/preferenze",element:a.jsx(Kw,{})}),a.jsx(ot,{path:"/settings/account",element:a.jsx(Gw,{})}),a.jsx(ot,{path:"/google-sheets",element:s||u?a.jsx(xd,{}):a.jsx(gi,{})}),a.jsx(ot,{path:"/manual-wine-insert",element:a.jsx(bd,{})}),a.jsx(ot,{path:"/saldo",element:a.jsx(wd,{})})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:a.jsxs("div",{onClick:f=>f.stopPropagation(),children:[a.jsx(wd,{}),a.jsx("div",{className:"text-center mt-4",children:a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg text-sm",children:"Chiudi (o premi Ctrl+S)"})})]})})]})}ya.createRoot(document.getElementById("root")).render(a.jsx(Zr.StrictMode,{children:a.jsx(Iv,{children:a.jsx(Qw,{})})}));
